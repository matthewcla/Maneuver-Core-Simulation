{"mappings":"AAAA;;;CAGC,GACD,MAAM,iBAAiB;IACnB,iBAAyB;IACzB,YAAyB;IACzB,mBAAyB;QAAC;QAAI;KAAG;IACjC,sBAAyB;IACzB,yBAAyB;IACzB,oBAAyB;AAC7B;AAEA,yCAAyC;AACzC,MAAM,oBAAsB;IAAC;IAAG;IAAI;IAAK;CAAI;AAC7C,MAAM,sBAAsB;IAAC;IAAG;CAAE,EAAO,SAAS;AAClD,MAAM,qBAAsB,EAAE,EAAW,QAAQ;AACjD,MAAM,kBAAsB,GAAa,6BAA6B;AACtE,MAAM,oBAAsB,MAAe,mCAAmC;AAE9E,SAAS,SAAS,GAAG,EAAE,GAAG;IACtB,MAAM,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC;IACxB,MAAM,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC;IACxB,MAAM,KAAK,IAAI,EAAE,GAAG,IAAI,EAAE;IAC1B,MAAM,KAAK,IAAI,EAAE,GAAG,IAAI,EAAE;IAE1B,MAAM,KAAO,KAAG,KAAK,KAAG;IACxB,MAAM,OAAO,KAAK,OAAO,MAAM,CAAG,CAAA,KAAG,KAAK,KAAG,EAAC,IAAK;IACnD,MAAM,OAAO,KAAK,KAAG;IACrB,MAAM,OAAO,KAAK,KAAG;IACrB,MAAM,OAAO,KAAK,IAAI,CAAC,OAAK,OAAO,OAAK;IACxC,OAAO;QAAE,GAAG;QAAM,GAAG;IAAK;AAC9B;AAEA,MAAM,QAAQ;IACZ,SAAQ,KAAK,SAAS,eAAe;QACnC,OAAQ,GAAG,iBAAiB,QACpB,GAAG,uBAAuB,QAC1B,GAAG,oBAAoB,QACvB,GAAG,mBAAmB;IAChC;IACA;QACE,OAAQ,SAAS,cAAc,QACvB,SAAS,oBAAoB,QAC7B,SAAS,mBAAmB,QAC5B,SAAS,gBAAgB;IACnC;IACA;QACE,OAAO,SAAS,iBAAiB,IAC1B,SAAS,uBAAuB,IAChC,SAAS,oBAAoB,IAC7B,SAAS,mBAAmB;IACrC;AACF;AAEA,MAAM;IACF,YAAY,GAAG,CAAC;QACZ,IAAI,CAAC,GAAG,GAAG;QACX,IAAI,CAAC,MAAM,GAAG;IAClB;IACA,aAAa,OAAO,EAAC;QACjB,MAAM,SAAS,EAAE;QACjB,MAAM,aAAa;YAAC;YAAkB;YAAU;YAAW;SAAc;QACzE,MAAM,OAAO,UAAU,CAAC,KAAK,KAAK,CAAC,KAAK,MAAM,KAAG,WAAW,MAAM,EAAE;QACpE,MAAM,UAAU,IAAI,CAAC,YAAY,CAAC,MAAM;QACxC,OAAO,IAAI,CAAC;QACZ,MAAM,SAAS,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,eAAe,GAAC,GAAG,IAAI,CAAC,GAAG,CAAC,eAAe,GAAC;QAClF,IAAI,IAAI,IAAE,GAAE,IAAE,QAAO,IAAI;YACrB,MAAM,IAAI,IAAI,CAAC,cAAc,CAAC,SAAS;YACvC,OAAO,IAAI,CAAC;QAChB;QACA,IAAI,IAAI,IAAE,GAAE,IAAE,IAAI,CAAC,GAAG,CAAC,kBAAkB,EAAC,IACtC,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC;QAEjC,OAAO;IACX;IACA,aAAa,IAAI,EAAC,GAAG,EAAC;QAClB,MAAM,MAAM,IAAI,CAAC,KAAK,CAAC,GAAE;QACzB,IAAI,KAAK,KAAK;QACd,OAAO;YACH,KAAK;gBACD,MAAM,IAAI,CAAC,KAAK,CAAC,IAAG;gBACpB,MAAM,AAAC,CAAA,IAAI,MAAM,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,KAAI,GAAE,IAAG;gBAAK;YACvD,KAAK;gBACD,MAAM,IAAI,CAAC,KAAK,CAAC,KAAI;gBACrB,MAAM,AAAC,CAAA,IAAI,MAAM,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,IAAG,EAAC,IAAG;gBAAK;YACrD,KAAK;gBACD,MAAM,IAAI,CAAC,KAAK,CAAC,KAAI;gBACrB,MAAM,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,IAAG;gBACjC,MAAM,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAE;gBAAI;YACvC,KAAK;YACL;gBACI,MAAM,IAAI,CAAC,KAAK,CAAC,IAAG;gBACpB,MAAM,AAAC,CAAA,IAAI,MAAM,GAAG,GAAE,IAAG;gBAAK;QACtC;QACA,MAAM,OAAO,IAAI,CAAC,KAAK,CAAC,GAAE;QAC1B,MAAM,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,KAAK,KAAK,KAAK;QAC5C,IAAI,CAAC,QAAQ,CAAC,KAAK;QACnB,IAAI,SAAS,GAAG;QAChB,OAAO;IACX;IACA,eAAe,GAAG,EAAE,QAAQ,EAAC;QACzB,MAAM,MAAM,IAAI,CAAC,KAAK,CAAC,GAAE;QACzB,MAAM,MAAM,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,QAAQ,IAAE;QACxC,MAAM,MAAM,IAAI,CAAC,KAAK,CAAC,GAAE;QACzB,MAAM,MAAM,IAAI,CAAC,KAAK,CAAC,GAAE;QACzB,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,KAAK,KAAK,KAAK;QAC1C,IAAG,KAAK,MAAM,KAAG,IAAI,CAAC,GAAG,CAAC,uBAAuB,IAAI,SAAS,MAAM,EAAC;YACjE,MAAM,MAAM,QAAQ,CAAC,KAAK,KAAK,CAAC,KAAK,MAAM,KAAG,SAAS,MAAM,EAAE;YAC/D,EAAE,MAAM,GAAG,AAAC,CAAA,KAAK,KAAK,CAAC,IAAI,CAAC,GAAC,EAAE,CAAC,EAAE,IAAI,CAAC,GAAC,EAAE,CAAC,IAAE,MAAI,KAAK,EAAE,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,IAAG,EAAC,IAAG;QACvF;QACA,OAAO;IACX;IACA,YAAY,GAAG,EAAC;QACZ,MAAM,MAAM,IAAI,CAAC,KAAK,CAAC,GAAE;QACzB,MAAM,MAAM,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,QAAQ,IAAE;QACxC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,KAAK,KAAK,GAAG;QACxC,EAAE,QAAQ,GAAG;QACb,OAAO;IACX;IACA,OAAO,GAAG,EAAC,OAAO,EAAC,KAAK,EAAC,MAAM,EAAC,KAAK,EAAC;QAClC,MAAM,KAAM,OAAO,IAAI,CAAC,MAAM,IAAI,QAAQ,CAAC,GAAG;QAC9C,MAAM,MAAM,UAAU,KAAK,EAAE,GAAG;QAChC,OAAO;YACH;YACA,GAAG,IAAI,CAAC,GAAG,QAAQ,KAAK,GAAG,CAAC;YAC5B,GAAG,IAAI,CAAC,GAAG,QAAQ,KAAK,GAAG,CAAC;YAC5B,QAAQ,SAAS;YACjB;YACA,OAAO;YACP,kBAAkB;YAClB,OAAO;gBAAE;gBAAQ;YAAM;YACvB,gBAAgB;YAChB,cAAc;QAClB;IACJ;IACA,SAAS,GAAG,EAAC,GAAG,EAAC;QACb,IAAI,IAAI,IAAE,GAAE,IAAE,IAAG,IAAI;YACjB,MAAM,SAAO,IAAI,CAAC,IAAI,CAAC,MAAM,SAAO,IAAI,CAAC,IAAI,CAAC;YAC9C,MAAM,EAAC,CAAC,EAAC,CAAC,EAAC,GAAC,SAAS;gBAAC,GAAG,GAAG;gBAAC,GAAG,MAAM;YAAA,GAAE;gBAAC,GAAG,GAAG;gBAAC,GAAG,MAAM;YAAA;YACzD,MAAM,OAAK,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,EAAE,GAAC,IACrC,OAAK,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,EAAE,GAAC;YACvC,IAAG,IAAE,IAAI,CAAC,GAAG,CAAC,UAAU,IAAI,IAAE,QAAQ,IAAE,MAAM;YAC9C,IAAI,MAAM,GAAC,AAAC,CAAA,IAAI,MAAM,GAAC,IAAI,CAAC,KAAK,CAAC,IAAG,EAAC,IAAG;QAC7C;IACJ;IACA,KAAK,CAAC,EAAC;QAAC,MAAM,MAAI,AAAC,CAAA,KAAG,EAAE,MAAM,AAAD,IAAG,KAAK,EAAE,GAAC;QAAI,OAAM;YAAC,IAAG,EAAE,KAAK,GAAC,KAAK,GAAG,CAAC;YAAK,IAAG,EAAE,KAAK,GAAC,KAAK,GAAG,CAAC;QAAI;IAAC;IACrG,MAAM,CAAC,EAAC,CAAC,EAAC;QAAC,OAAO,IAAE,KAAK,MAAM,KAAI,CAAA,IAAE,CAAA;IAAE;IACvC,SAAS,CAAC,EAAC,CAAC,EAAC;QAAC,OAAO,KAAK,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,GAAE,IAAE;IAAG;AACtD;AAEA,MAAM;IACF,YAAY,KAAK,CAAC;QAAC,IAAI,CAAC,CAAC,GAAC;IAAM;IAChC,OAAO,OAAO,EAAC,WAAW,EAAC,GAAG,EAAC;QAC3B,IAAG,IAAI,CAAC,CAAC,CAAC,gBAAgB,IAAE,IAAI,CAAC,CAAC,CAAC,QAAQ,EAAE;QAC7C,OAAO,IAAI,CAAC,CAAC,CAAC,KAAK;YACf,KAAK;gBACD,IAAG,IAAI,CAAC,gBAAgB,CAAC,aAAY,MAAO,IAAI,CAAC,aAAa;gBAC9D;YACJ,KAAK;gBAAwB;YAC7B,KAAK;gBACD,IAAI,CAAC,cAAc,CAAC;gBAAU;YAClC,KAAK;gBACD,IAAI,CAAC,aAAa,CAAC;gBAAU;QACrC;IACJ;IACA,iBAAiB,GAAG,EAAC,GAAG,EAAC;QACrB,MAAM,MAAI,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACjC,KAAI,MAAM,SAAS,IAAI;YACnB,IAAG,UAAQ,IAAI,CAAC,CAAC,IAAE,MAAM,QAAQ,EAAE;YACnC,MAAM,MAAI,IAAI,CAAC,WAAW,CAAC;YAC3B,MAAM,EAAC,CAAC,EAAC,CAAC,EAAC,GAAC,SAAS,KAAI;YACzB,IAAG,IAAE,IAAI,UAAU,IAAI,IAAE,KAAK,IAAE,IAAI,iBAAiB,CAAC,EAAE,GAAC,IAAG;gBACxD,IAAI,CAAC,CAAC,CAAC,MAAM,GAAC;gBAAO,OAAO;YAChC;QACJ;QAAE,OAAO;IACb;IACA,gBAAe;QACX,MAAM,MAAI,AAAC,IAAI,CAAC,CAAC,CAAC,MAAM,IAAE,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,EAAC,IAAI,CAAC,CAAC,CAAC,MAAM,KAAI;QAC1E,IAAI,WAAS,GAAG,WAAS;QACzB,OAAO;YACH,KAAK;gBAAW,WAAS;gBAAI;YAC7B,KAAK;gBAAiB,WAAS;gBAAI;YACnC,KAAK;gBAAc,WAAS;gBAAG,WAAS,OAAK,IAAI,CAAC,CAAC,CAAC,KAAK;gBAAE;YAC3D;gBAAS,WAAS;QACtB;QACA,IAAI,CAAC,CAAC,CAAC,aAAa,GAAC,AAAC,CAAA,IAAI,CAAC,CAAC,CAAC,MAAM,GAAC,WAAS,GAAE,IAAG;QAClD,IAAI,CAAC,CAAC,CAAC,YAAY,GAAC,KAAK,GAAG,CAAC,GAAE,IAAI,CAAC,CAAC,CAAC,KAAK,GAAC;QAC5C,IAAI,CAAC,CAAC,CAAC,KAAK,GAAC;IACjB;IACA,eAAe,EAAE,EAAC;QACd,MAAM,WAAS,KAAG,KAAG;QACrB,MAAM,MAAI,IAAE,KAAG;QACf,MAAM,QAAM,AAAE,CAAA,IAAI,CAAC,CAAC,CAAC,aAAa,GAAG,IAAI,CAAC,CAAC,CAAC,MAAM,GAAG,GAAE,IAAG,MAAK;QAC/D,IAAG,KAAK,GAAG,CAAC,SAAO,UACf,IAAI,CAAC,CAAC,CAAC,MAAM,GAAC,AAAC,CAAA,IAAI,CAAC,CAAC,CAAC,MAAM,GAAC,KAAK,IAAI,CAAC,SAAO,WAAS,GAAE,IAAG;aACzD,IAAI,CAAC,CAAC,CAAC,MAAM,GAAC,IAAI,CAAC,CAAC,CAAC,aAAa;QACzC,IAAG,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,GAAC,IAAI,CAAC,CAAC,CAAC,YAAY,IAAE,KAC1C,IAAI,CAAC,CAAC,CAAC,KAAK,IAAE,KAAK,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,YAAY,GAAG,IAAI,CAAC,CAAC,CAAC,KAAK,IAAE;aACzD,IAAI,CAAC,CAAC,CAAC,KAAK,GAAC,IAAI,CAAC,CAAC,CAAC,YAAY;QACvC,IAAG,CAAC,IAAI,CAAC,gBAAgB,CAAC;eAAI,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM;SAAC,EAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,GACrE,IAAI,CAAC,CAAC,CAAC,KAAK,GAAC;IAErB;IACA,cAAc,EAAE,EAAC;QACb,MAAM,WAAS,IAAE,KAAG;QACpB,MAAM,MAAI,MAAI,KAAG;QACjB,MAAM,QAAM,AAAE,CAAA,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC,CAAC,MAAM,GAAG,GAAE,IAAG,MAAK;QAC9D,IAAG,KAAK,GAAG,CAAC,SAAO,UACf,IAAI,CAAC,CAAC,CAAC,MAAM,GAAC,AAAC,CAAA,IAAI,CAAC,CAAC,CAAC,MAAM,GAAC,KAAK,IAAI,CAAC,SAAO,WAAS,GAAE,IAAG;aACzD,IAAI,CAAC,CAAC,CAAC,MAAM,GAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM;QACxC,IAAG,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,GAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,IAAE,KACzC,IAAI,CAAC,CAAC,CAAC,KAAK,IAAE,KAAK,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,KAAK,IAAE;aACxD,IAAI,CAAC,CAAC,CAAC,KAAK,GAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK;QACtC,IAAG,KAAK,GAAG,CAAC,SAAO,KAAK,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,GAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,IAAE,KAAI;YAClE,IAAI,CAAC,CAAC,CAAC,KAAK,GAAC;YACb,OAAO,IAAI,CAAC,CAAC,CAAC,MAAM;QACxB;IACJ;IACA,mBAAmB,CAAC,EAAC,CAAC,EAAC;QACnB,MAAM,MAAI,AAAC,CAAA,KAAK,KAAK,CAAC,EAAE,CAAC,GAAC,EAAE,CAAC,EAAC,EAAE,CAAC,GAAC,EAAE,CAAC,IAAE,MAAI,KAAK,EAAE,GAAC,GAAE,IAAG;QACxD,MAAM,WAAS,KAAK,GAAG,CAAC,AAAE,CAAA,EAAE,MAAM,GAAG,EAAE,MAAM,GAAG,GAAE,IAAG,MAAK;QAC1D,IAAG,WAAS,OAAK,WAAS,KAAK,OAAO;QACtC,MAAM,SAAO,AAAC,CAAA,MAAM,EAAE,MAAM,GAAG,GAAE,IAAG;QACpC,IAAG,SAAO,SAAO,SAAO,OAAO,OAAO;QACtC,IAAG,SAAO,KAAG,SAAO,OAAO,OAAO;QAClC,OAAO;IACX;IACA,YAAY,CAAC,EAAC;QAAC,MAAM,MAAI,AAAC,CAAA,KAAG,EAAE,MAAM,AAAD,IAAG,KAAK,EAAE,GAAC;QAAI,OAAM;YAAC,GAAE,EAAE,CAAC;YAAC,GAAE,EAAE,CAAC;YAAC,IAAG,EAAE,KAAK,GAAC,KAAK,GAAG,CAAC;YAAK,IAAG,EAAE,KAAK,GAAC,KAAK,GAAG,CAAC;QAAI;IAAC;AAC5H;AAEA;;;CAGC,GACD,MAAM;IACF,aAAc;QACV,sDAAsD;QACtD,IAAI,CAAC,kBAAkB,GAAG;QAC1B,2CAA2C;QAC3C,IAAI,CAAC,eAAe,GAAG;QACvB,iCAAiC;QACjC,IAAI,CAAC,MAAM,GAAG,SAAS,cAAc,CAAC;QACtC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;QAElC,IAAI,CAAC,IAAI,CAAC,MAAM,EACZ,QAAQ,KAAK,CAAC;QAElB,QAAQ,GAAG,CAAC,+BAA+B,IAAI,CAAC,GAAG;QACnD,IAAI,CAAC,IAAI,CAAC,GAAG,EACT,QAAQ,KAAK,CAAC;QAElB,IAAI,CAAC,WAAW,GAAG,SAAS,cAAc,CAAC;QAC3C,IAAI,CAAC,YAAY,GAAG,SAAS,cAAc,CAAC;QAE5C,oBAAoB;QACpB,IAAI,CAAC,YAAY,GAAG,SAAS,cAAc,CAAC;QAC5C,IAAI,CAAC,QAAQ,GAAG,SAAS,cAAc,CAAC;QACxC,IAAI,CAAC,WAAW,GAAI,SAAS,cAAc,CAAC;QAC5C,IAAI,CAAC,YAAY,GAAG,SAAS,cAAc,CAAC;QAC5C,IAAI,CAAC,OAAO,GAAG,SAAS,cAAc,CAAC;QACvC,IAAI,CAAC,KAAK,GAAG,SAAS,cAAc,CAAC;QACrC,IAAI,CAAC,MAAM,GAAG,SAAS,cAAc,CAAC;QACtC,IAAI,CAAC,gBAAgB,GAAG,SAAS,cAAc,CAAC;QAChD,IAAI,CAAC,iBAAiB,GAAG,SAAS,cAAc,CAAC;QACjD,IAAI,CAAC,kBAAkB,GAAG,SAAS,cAAc,CAAC;QAClD,IAAI,CAAC,eAAe,GAAG,SAAS,cAAc,CAAC;QAC/C,IAAI,CAAC,gBAAgB,GAAG,SAAS,cAAc,CAAC;QAChD,IAAI,CAAC,iBAAiB,GAAG,SAAS,cAAc,CAAC;QAEjD,IAAI,CAAC,QAAQ,GAAG,SAAS,cAAc,CAAC;QAExC,IAAI,CAAC,aAAa,GAAG,SAAS,aAAa,CAAC;QAC5C,oEAAoE;QACpE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,aAAa;QAEtC,IAAI,CAAC,WAAW,GAAG,SAAS,cAAc,CAAC;QAC3C,IAAI,CAAC,cAAc,GAAG,SAAS,cAAc,CAAC;QAC9C,IAAI,CAAC,YAAY,GAAG,SAAS,cAAc,CAAC;QAC5C,IAAI,CAAC,WAAW,GAAG,SAAS,cAAc,CAAC;QAC3C,IAAI,CAAC,aAAa,GAAG,SAAS,cAAc,CAAC;QAG7C,wBAAwB;QACxB,IAAI,CAAC,UAAU,GAAG,iBAAiB,SAAS,eAAe,EAAE,gBAAgB,CAAC,iBAAiB,IAAI;QACnG,IAAI,CAAC,UAAU,GAAG,iBAAiB,SAAS,eAAe,EAAE,gBAAgB,CAAC,iBAAiB,IAAI;QACnG,IAAI,CAAC,eAAe,GAAG,iBAAiB,SAAS,eAAe,EAAE,gBAAgB,CAAC,uBAAuB,IAAI;QAC9G,IAAI,CAAC,eAAe,GAAG,iBAAiB,SAAS,eAAe,EAAE,gBAAgB,CAAC,uBAAuB,IAAI;QAC9G,IAAI,CAAC,eAAe,GAAG,iBAAiB,SAAS,eAAe,EAAE,gBAAgB,CAAC,uBAAuB,IAAI;QAC9G,IAAI,CAAC,WAAW,GAAG;QAEnB,qBAAqB;QACrB,IAAI,CAAC,OAAO,GAAG;YACX,QAAQ;YACR,OAAO;YACP,IAAI;YACJ,GAAG;YACH,GAAG;YACH,eAAe;YACf,cAAc;YACd,YAAY;YACZ,WAAW;YACX,uBAAuB;QAC3B;QACA,IAAI,CAAC,MAAM,GAAG;YACV;gBAAE,IAAI;gBAAM,gBAAgB;gBAAK,cAAc;gBAAK,QAAQ;gBAAK,OAAO;YAAI;YAC5E;gBAAE,IAAI;gBAAM,gBAAgB;gBAAK,cAAc;gBAAK,QAAQ;gBAAK,OAAO;YAAI;YAC5E;gBAAE,IAAI;gBAAM,gBAAgB;gBAAK,cAAc;gBAAK,QAAQ;gBAAK,OAAO;YAAI;YAC5E;gBAAE,IAAI;gBAAM,gBAAgB;gBAAK,cAAc;gBAAK,QAAQ;gBAAK,OAAO;YAAI;YAC5E;gBAAE,IAAI;gBAAM,gBAAgB;gBAAK,cAAc;gBAAK,QAAQ;gBAAK,OAAO;YAAI;SAC/E;QAED,IAAI,CAAC,eAAe,GAAG;QACvB,IAAI,CAAC,cAAc,GAAG;QACtB,IAAI,CAAC,aAAa,GAAG;QACrB,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,aAAa,GAAG;QACrB,IAAI,CAAC,eAAe,GAAG;QACvB,IAAI,CAAC,GAAG,GAAG,OAAO,gBAAgB,IAAI;QACtC,IAAI,CAAC,cAAc,GAAG;YAAE,GAAG;YAAG,GAAG;QAAE;QACnC,IAAI,CAAC,aAAa,GAAG,IAAI,IAAI,CAAC,GAAG;QACjC,IAAI,CAAC,YAAY,GAAG;YAAE,GAAG;YAAG,GAAG;QAAE;QACjC,IAAI,CAAC,aAAa,GAAG;QACrB,IAAI,CAAC,aAAa,GAAI;QACtB,IAAI,CAAC,mBAAmB,GAAG;QAC3B,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,iBAAiB,GAAG;QACzB,IAAI,CAAC,eAAe,GAAG;QAEvB,uBAAuB;QACvB,IAAI,CAAC,QAAQ,GAAG;YACZ,WAAW;YACX,OAAO;YACP,MAAM;gBAAC,GAAG;gBAAG,GAAG;YAAC;YACjB,eAAe;gBAAC,GAAG;gBAAG,GAAG;YAAC;QAC9B;QACA,IAAI,CAAC,YAAY,GAAG,CAAC;QAErB,gCAAgC;QAChC,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,WAAW,GAAG;YAAC;YAAK;YAAK;YAAM;SAAK;QACzC,IAAI,CAAC,mBAAmB,GAAG;QAC3B,IAAI,CAAC,WAAW,GAAG;YAAC;YAAG;YAAI;SAAG;QAC9B,+EAA+E;QAC/E,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,mBAAmB;QACxE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ;QACxD,IAAI,CAAC,eAAe,GAAG;QACvB,IAAI,CAAC,QAAQ,GAAG;YAAC;YAAI;SAAG;QACxB,IAAI,CAAC,SAAS,GAAG;YAAC;YAAK;SAAI;QAC3B,IAAI,CAAC,kBAAkB,GAAG;QAC1B,IAAI,CAAC,WAAW,GAAG;QACnB,IAAI,CAAC,mBAAmB,GAAG;QAC3B,IAAI,CAAC,WAAW,GAAG;QACnB,IAAI,CAAC,aAAa,GAAG;QACrB,IAAI,CAAC,YAAY,GAAG;QACpB,IAAI,CAAC,aAAa,GAAG;QAErB,kDAAkD;QAClD,IAAI,CAAC,eAAe,CAAC,IAAI,GAAK,IAAI,CAAC,kBAAkB;QACrD,IAAI,CAAC,gBAAgB,CAAC,IAAI,GAAI,IAAI,CAAC,WAAW;QAC9C,IAAI,CAAC,iBAAiB,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW;QAE9C,8BAA8B;QAC9B,IAAI,CAAC,YAAY,GAAG,SAAS,aAAa,CAAC;QAC3C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC;QAC9C,IAAI,CAAC,WAAW,GAAG;QAEnB,gDAAgD;QAChD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI;QACvC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI;QACzD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI;QACrD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI;QAEzD,IAAI,CAAC,WAAW;IACpB;IAEA,8BAA8B;IAC9B,cAAc;QACV,IAAI,CAAC,qBAAqB;QAE1B,MAAM,mBAAmB;QACzB,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,mBAAmB,IAAI,CAAC,GAAG;QAC/C,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,mBAAmB,IAAI,CAAC,GAAG;QAChD,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK;QAC3C,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM;QAC7C,IAAI,CAAC,eAAe;QACpB,IAAI,CAAC,WAAW,GAAG;QAEnB,IAAI,CAAC,iBAAiB,GAAG;QACzB,IAAI,CAAC,cAAc;QACnB,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,GACrB,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAA;YAChB,IAAI,MAAM,cAAc,KAAK,aAAa,MAAM,YAAY,KAAK,WAAW;gBACxE,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,MAAM,YAAY,GAAG,KAAK,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,cAAc;gBAC5F,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,MAAM,YAAY,GAAG,KAAK,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,cAAc;YAChG,OAAO,IAAI,MAAM,CAAC,KAAK,aAAa,MAAM,CAAC,KAAK,WAAW;gBACvD,MAAM,KAAK,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;gBACnC,MAAM,KAAK,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;gBACnC,MAAM,YAAY,GAAG,KAAK,IAAI,CAAC,MAAM,IAAI,MAAM;gBAC/C,MAAM,cAAc,GAAG,AAAC,CAAA,IAAI,CAAC,SAAS,CAAC,KAAK,KAAK,CAAC,IAAI,OAAO,GAAE,IAAK;YACxE;YACA,IAAI,CAAC,MAAM,WAAW,EAAE;gBACpB,MAAM,WAAW,GAAG,IAAI,kBAAkB;gBAC1C,MAAM,IAAI,GAAG,IAAI;YACrB;QACJ;QAGJ,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAA,IAAK,IAAI,CAAC,gBAAgB,CAAC;QAC/C,IAAI,CAAC,iBAAiB;QAEtB,IAAI,CAAC,kBAAkB;QACvB,IAAI,CAAC,qBAAqB;QAC1B,IAAI,CAAC,OAAO;QAEZ,IAAI,CAAC,aAAa,GAAG,YAAY,GAAG;QACpC,IAAI,IAAI,CAAC,mBAAmB,EACxB,IAAI,CAAC,aAAa;QAEtB,IAAI,SAAS,KAAK,IAAI,SAAS,KAAK,CAAC,KAAK,EACtC,SAAS,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,IAAM,IAAI,CAAC,OAAO;IAEpD;IAEA,+BAA+B;IAC/B,wBAAwB;QACpB,qBAAqB;QACrB,IAAI,OAAO,YAAY,EAAE;YACrB,MAAM,OAAO;gBAAE,SAAS;YAAM;YAC9B,IAAI,CAAC,MAAM,EAAE,iBAAiB,eAAe,IAAI,CAAC,iBAAiB,EAAE;YACrE,IAAI,CAAC,MAAM,EAAE,iBAAiB,aAAa,IAAI,CAAC,eAAe,EAAE;YACjE,IAAI,CAAC,MAAM,EAAE,iBAAiB,gBAAgB,IAAI,CAAC,eAAe,EAAE;YACpE,IAAI,CAAC,MAAM,EAAE,iBAAiB,iBAAiB,IAAI,CAAC,eAAe,EAAE;YACrE,IAAI,CAAC,MAAM,EAAE,iBAAiB,eAAe,IAAI,CAAC,iBAAiB,EAAE;YAErE,iEAAiE;YACjE,IAAI,CAAC,aAAa,EAAE,iBAAiB,eAAe,CAAC;gBACjD,IAAI,EAAE,MAAM,KAAK,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,0BAA0B,CAAC;YAClE,GAAG;YACH,IAAI,CAAC,aAAa,EAAE,iBAAiB,eAAe,CAAC;gBACjD,IAAI,EAAE,MAAM,KAAK,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,0BAA0B,CAAC;YAClE,GAAG;YACH,IAAI,CAAC,aAAa,EAAE,iBAAiB,aAAa,CAAC;gBAC/C,IAAI,EAAE,MAAM,KAAK,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,wBAAwB,CAAC;YAChE,GAAG;YACH,IAAI,CAAC,aAAa,EAAE,iBAAiB,iBAAiB,CAAC;gBACnD,IAAI,EAAE,MAAM,KAAK,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,wBAAwB,CAAC;YAChE,GAAG;QACP,OAAO,IAAI,kBAAkB,QAAQ;YACjC,MAAM,OAAO,CAAC,UAAY,CAAC;oBACvB,MAAM,QAAQ,EAAE,OAAO,CAAC,EAAE,IAAI,EAAE,cAAc,CAAC,EAAE;oBACjD,IAAI,CAAC,OAAO;oBACZ,EAAE,cAAc;oBAChB,EAAE,eAAe;oBACjB,QAAQ;wBACJ,SAAS,MAAM,OAAO;wBACtB,SAAS,MAAM,OAAO;wBACtB,QAAQ;wBACR,SAAS;wBACT,aAAa;wBACb,WAAW,MAAM,UAAU,IAAI;wBAC/B,gBAAgB,IAAM,EAAE,cAAc;wBACtC,iBAAiB,IAAM,EAAE,eAAe;oBAC5C;gBACJ;YACA,MAAM,OAAO;gBAAE,SAAS;YAAM;YAC9B,IAAI,CAAC,MAAM,EAAE,iBAAiB,cAAc,KAAK,IAAI,CAAC,iBAAiB,GAAG;YAC1E,IAAI,CAAC,MAAM,EAAE,iBAAiB,aAAa,KAAK,IAAI,CAAC,iBAAiB,GAAG;YACzE,IAAI,CAAC,MAAM,EAAE,iBAAiB,YAAY,KAAK,IAAI,CAAC,eAAe;YACnE,IAAI,CAAC,MAAM,EAAE,iBAAiB,eAAe,KAAK,IAAI,CAAC,eAAe;YAEtE,0CAA0C;YAC1C,IAAI,CAAC,aAAa,EAAE,iBAAiB,cAAc,CAAC;gBAChD,IAAI,EAAE,MAAM,KAAK,IAAI,CAAC,MAAM,EAAE,KAAK,IAAI,CAAC,0BAA0B,EAAE;YACxE,GAAG;YACH,IAAI,CAAC,aAAa,EAAE,iBAAiB,aAAa,CAAC;gBAC/C,IAAI,EAAE,MAAM,KAAK,IAAI,CAAC,MAAM,EAAE,KAAK,IAAI,CAAC,0BAA0B,EAAE;YACxE,GAAG;YACH,IAAI,CAAC,aAAa,EAAE,iBAAiB,YAAY,CAAC;gBAC9C,IAAI,EAAE,MAAM,KAAK,IAAI,CAAC,MAAM,EAAE,KAAK,IAAI,CAAC,wBAAwB,EAAE;YACtE;YACA,IAAI,CAAC,aAAa,EAAE,iBAAiB,eAAe,CAAC;gBACjD,IAAI,EAAE,MAAM,KAAK,IAAI,CAAC,MAAM,EAAE,KAAK,IAAI,CAAC,wBAAwB,EAAE;YACtE;QACJ,OAAO;YACH,IAAI,CAAC,MAAM,EAAE,iBAAiB,aAAa,IAAI,CAAC,iBAAiB;YACjE,IAAI,CAAC,MAAM,EAAE,iBAAiB,WAAW,IAAI,CAAC,eAAe;YAC7D,IAAI,CAAC,MAAM,EAAE,iBAAiB,cAAc,IAAI,CAAC,eAAe;YAChE,IAAI,CAAC,MAAM,EAAE,iBAAiB,aAAa,IAAI,CAAC,iBAAiB;YAEjE,0CAA0C;YAC1C,IAAI,CAAC,aAAa,EAAE,iBAAiB,aAAa,CAAC;gBAC/C,IAAI,EAAE,MAAM,KAAK,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,0BAA0B,CAAC;YAClE;YACA,IAAI,CAAC,aAAa,EAAE,iBAAiB,aAAa,CAAC;gBAC/C,IAAI,EAAE,MAAM,KAAK,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,0BAA0B,CAAC;YAClE;YACA,IAAI,CAAC,aAAa,EAAE,iBAAiB,WAAW,CAAC;gBAC7C,IAAI,EAAE,MAAM,KAAK,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,wBAAwB,CAAC;YAChE;QACJ;QAEA,gBAAgB;QAChB,OAAO,gBAAgB,CAAC,UAAU,IAAI,CAAC,YAAY,CAAC;YAChD,IAAI,CAAC,OAAO;QAChB;QAEA,kBAAkB;QAClB,IAAI,CAAC,aAAa,EAAE,iBAAiB,SAAS,IAAM,IAAI,CAAC,gBAAgB;QACzE,IAAI,CAAC,QAAQ,EAAE,iBAAiB,SAAS,IAAM,IAAI,CAAC,WAAW;QAC/D,IAAI,CAAC,YAAY,EAAE,iBAAiB,SAAS,IAAM,IAAI,CAAC,eAAe;QACvE,iEAAiE;QACjE,2CAA2C;QAC3C,IAAI,CAAC,KAAK,EAAE,iBAAiB,SAAS,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI;QAChE,IAAI,CAAC,MAAM,EAAE,iBAAiB,SAAS,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI;QAC5D,IAAI,CAAC,WAAW,EAAE,iBAAiB,SAAS,IAAM,IAAI,CAAC,QAAQ;QAC/D,IAAI,CAAC,YAAY,EAAE,iBAAiB,SAAS,IAAM,IAAI,CAAC,SAAS;QACjE,IAAI,CAAC,OAAO,EAAE,iBAAiB,SAAS;YACpC,2BAA2B;YAC3B,OAAO,GAAG,CAAC,OAAO;YAElB,gCAAgC;YAChC,OAAO,GAAG,GAAG,IAAI;QAEjB,2DAA2D;QAC3D,gEAAgE;QAChE,+BAA+B;QAC/B,oCAAoC;QACxC;QAEA,aAAa;QACb,uEAAuE;QACvE,IAAI,CAAC,YAAY,EAAE,iBAAiB,SAAS,IAAM,IAAI,CAAC,aAAa;QACrE,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,YAAY,EACvD,IAAI,eAAe;YACf,MAAM,QAAQ,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,KAAK,IAAI,CAAC,SAAS,CAAC,WAAW,GAAG;YACvE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,GAAG,GAAG,IAAI,MAAM,GAAG,CAAC;YACnD,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,QAAQ,GAAG,GAAG,MAAM,MAAM,GAAG,CAAC;YACtD,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG,MAAM,MAAM,GAAG,CAAC;QACzD,GAAG,OAAO,CAAC,IAAI,CAAC,SAAS;QAG7B,oDAAoD;QACpD,IAAI,CAAC,eAAe,EAAE,iBAAiB,UAAU;YAC7C,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI;YACnD,IAAI,CAAC,cAAc;YACnB,IAAI,CAAC,iBAAiB;QAC1B;QACA,IAAI,CAAC,gBAAgB,EAAE,iBAAiB,UAAU;YAC9C,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI;YAC7C,IAAI,CAAC,cAAc;YACnB,IAAI,CAAC,iBAAiB;QAC1B;QACA,IAAI,CAAC,iBAAiB,EAAE,iBAAiB,UAAU;YAC/C,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI;YAC9C,IAAI,CAAC,cAAc;YACnB,IAAI,CAAC,iBAAiB;QAC1B;QAEA,+BAA+B;QAC/B,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,cAAc,EACvC,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,SAAS;YACvC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC;YAClC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC;QACzC;QAEJ,oBAAoB;QACpB,IAAI,IAAI,CAAC,aAAa,EAAE;YACpB,MAAM,MAAM,IAAI;YAChB,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,SAAS,SAAU,CAAC;gBACpD,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBACtB,IAAI,gBAAgB;YACxB;QACJ;QACA,SAAS,gBAAgB,CAAC,WAAW,CAAC;YAClC,IAAI,EAAE,GAAG,KAAK,YAAY,MAAM,QAAQ,IACpC,MAAM,IAAI;QAElB;QAEA,gDAAgD;QAChD,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,MAAM,MAAM,IAAI;YAChB,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,SAAS,SAAU,CAAC;gBACnD,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBACtB,IAAI,eAAe;YACvB;QACJ;QACA,IAAI,IAAI,CAAC,WAAW,EAAE;YAClB,MAAM,MAAM,IAAI;YAChB,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,SAAS,SAAU,CAAC;gBAClD,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBACtB,IAAI,cAAc;YACtB;QACJ;QAEA,yDAAyD;QACzD,SAAS,gBAAgB,CAAC,kBAAkB,OAAO,CAAC,CAAA;YAChD,GAAG,gBAAgB,CAAC,gBAAgB,CAAA;gBAChC,IAAI,CAAC,WAAW,CAAC,WAAW,GAAG,GAAG,YAAY,CAAC;gBAC/C,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU;gBAC9C,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,OAAO,GAAG;gBACjC,iDAAiD;gBACjD,MAAM,SAAS;gBACf,MAAM,eAAe,IAAI,CAAC,WAAW,CAAC,WAAW;gBACjD,MAAM,gBAAgB,IAAI,CAAC,WAAW,CAAC,YAAY;gBACnD,IAAI,IAAI,EAAE,OAAO,GAAG;gBACpB,IAAI,EAAE,OAAO,GAAG,eAAe,SAAS,OAAO,UAAU,EACvD,IAAI,EAAE,OAAO,GAAG,eAAe;gBAEjC,MAAM,IAAI,EAAE,OAAO,GAAG,gBAAgB;gBACtC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,UAAU,EAAE,EAAE,IAAI,EAAE,EAAE,GAAG,CAAC;YAClE;YACA,GAAG,gBAAgB,CAAC,eAAe,CAAA;gBAC/B,IAAI,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,OAAO,KAAK,SAAS;oBAC5C,iDAAiD;oBACjD,MAAM,SAAS;oBACf,MAAM,eAAe,IAAI,CAAC,WAAW,CAAC,WAAW;oBACjD,MAAM,gBAAgB,IAAI,CAAC,WAAW,CAAC,YAAY;oBACnD,IAAI,IAAI,EAAE,OAAO,GAAG;oBACpB,IAAI,EAAE,OAAO,GAAG,eAAe,SAAS,OAAO,UAAU,EACvD,IAAI,EAAE,OAAO,GAAG,eAAe;oBAEjC,MAAM,IAAI,EAAE,OAAO,GAAG,gBAAgB;oBACtC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,UAAU,EAAE,EAAE,IAAI,EAAE,EAAE,GAAG,CAAC;gBAClE;YACJ;YACA,GAAG,gBAAgB,CAAC,gBAAgB;gBAChC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,OAAO,GAAG;YACrC;YACA,GAAG,gBAAgB,CAAC,eAAe;gBAC/B,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,OAAO,GAAG;YACrC;QACJ;QAEA;YAAC;YAAmB;YAAyB;YAAsB;SAAqB,CACnF,OAAO,CAAC,CAAA,MAAO,SAAS,gBAAgB,CAAC,KAAK,IAAM,IAAI,CAAC,iBAAiB;QAC/E,IAAI,CAAC,iBAAiB;QAEtB,kBAAkB;QAClB,IAAI,CAAC,QAAQ,EAAE,iBAAiB,SAAS,CAAC;YACtC,IAAI,EAAE,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,aAAa;gBACzC,IAAI,IAAI,CAAC,eAAe,EAAE,QAAQ,6CAA6C;gBAC/E,IAAI,CAAC,eAAe,GAAG,EAAE,MAAM,CAAC,EAAE;gBAClC,IAAI,CAAC,iBAAiB;YAC1B;QACJ;IACJ;IAEA,0EAA0E;IAC1E,UAAU;QACN,qBAAqB,IAAI,CAAC,IAAI;QAC9B,cAAc,IAAI,CAAC,WAAW;QAC9B,aAAa,IAAI,CAAC,UAAU;QAC5B,OAAO,mBAAmB,CAAC,UAAU,IAAI,CAAC,SAAS;QACnD,IAAI,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG;QACtC,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,MAAM,GAAG;QACd,IAAI,CAAC,OAAO,GAAG;QACf,oCAAoC;QACpC,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK;YACrC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM;QACzC;QACA,IAAI,CAAC,GAAG,GAAG;IACf;IAEA,6BAA6B;IAC7B,mBAAmB;QACf,IAAI,CAAC,eAAe,GAAG,AAAC,CAAA,IAAI,CAAC,eAAe,GAAG,CAAA,IAAK,IAAI,CAAC,WAAW,CAAC,MAAM;QAC3E,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC;QACjE,IAAI,CAAC,aAAa,CAAC,WAAW,GAAG,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC;QAClE,IAAI,CAAC,cAAc;IACvB;IAEA;;KAEC,GACD,kBAAkB;QAChB,oEAAoE;QACpE,IAAI,IAAI,CAAC,eAAe,KAAK,GAAG;YAC9B,8DAA8D;YAC9D,IAAI,CAAC,eAAe,GAAG;YACvB,IAAI,CAAC,oBAAoB;YACzB,IAAI,CAAC,kBAAkB;YACvB,IAAI,CAAC,mBAAmB,GAAG;YAC3B,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,MAAM,CAAC;YACnC,IAAI,CAAC,aAAa;YAClB;QACF;QACA,oBAAoB;QACpB,IAAI,IAAI,CAAC,mBAAmB,EAAE;YAC5B,IAAI,CAAC,mBAAmB,GAAG;YAC3B,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,GAAG,CAAC;QAClC,OAAO;YACL,IAAI,CAAC,mBAAmB,GAAG;YAC3B,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,MAAM,CAAC;YACnC,IAAI,CAAC,aAAa;QACpB;QACA,IAAI,CAAC,oBAAoB;QACzB,IAAI,CAAC,kBAAkB;IACzB;IAEA;;KAEC,GACD,cAAc;QACZ,gDAAgD;QAChD,IAAI,IAAI,CAAC,eAAe,KAAK,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,EAAE,EAClE,IAAI,CAAC,eAAe,GAAG;aAClB;YACL,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,mBAAmB,GAAG;YAC1D,MAAM,MAAM,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,eAAe;YACtD,IAAI,CAAC,eAAe,GAAG,QAAQ,KAC3B,IAAI,CAAC,QAAQ,CAAC,EAAE,GACf,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,IAAI;QACjC;QACA,IAAI,CAAC,oBAAoB;QACzB,IAAI,CAAC,kBAAkB;QACvB,IAAI,CAAC,cAAc;QACnB,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,MAAM,CAAC;IACrC;IAEA;;KAEC,GACD,SAAS;QACP,kDAAkD;QAClD,IAAI,IAAI,CAAC,eAAe,KAAK,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,EAAE,EACpE,IAAI,CAAC,eAAe,GAAG;aAClB;YACL,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE,IAAI,CAAC,mBAAmB,GAAG;YAC1D,MAAM,MAAM,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,eAAe;YACvD,IAAI,CAAC,eAAe,GAAG,QAAQ,KAC3B,IAAI,CAAC,SAAS,CAAC,EAAE,GAChB,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI;QAClC;QACA,IAAI,CAAC,oBAAoB;QACzB,IAAI,CAAC,kBAAkB;QACvB,IAAI,CAAC,cAAc;QACnB,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,MAAM,CAAC;IACrC;IAEA,wEAAwE;IACxE,4EAA4E;IAC5E,2DAA2D;IAC3D,iCAAiC;IACjC,oCAAoC;IAEpC,SAAS,SAAS,EAAE;QAChB,MAAM,YAAY,AAAC,YAAY,IAAI,CAAC,aAAa,IAAK;QACtD,IAAI,CAAC,aAAa,GAAG;QAErB,IAAI,CAAC,aAAa,CAAC;QAEnB,IAAI,IAAI,CAAC,mBAAmB,EAAE;YAC1B,IAAI,CAAC,iBAAiB,IAAI,AAAC,YAAY,OAAQ,IAAI,CAAC,eAAe;YACnE,IAAI,IAAI,CAAC,iBAAiB,IAAI,GAAG;gBAC7B,IAAI,CAAC,iBAAiB,GAAG;gBACzB,IAAI,IAAI,CAAC,eAAe,GAAG,GAAG;oBAC1B,4CAA4C;oBAC5C,IAAI,CAAC,eAAe,GAAG;oBACvB,IAAI,CAAC,oBAAoB;oBACzB,IAAI,CAAC,kBAAkB;gBAC3B;YACJ;YACA,IAAI,CAAC,UAAU,GAAG;QACtB;QAEA,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAA,IAAK,IAAI,CAAC,gBAAgB,CAAC;YAC/C,IAAI,CAAC,iBAAiB;YACtB,IAAI,CAAC,SAAS;YACd,IAAI,CAAC,UAAU,GAAG;QACtB;QAEA,IAAI,YAAY,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,mBAAmB,EAAE;YAC5D,IAAI,CAAC,kBAAkB;YACvB,IAAI,CAAC,gBAAgB;YACrB,IAAI,CAAC,kBAAkB;YACvB,IAAI,CAAC,cAAc;YACnB,IAAI,CAAC,aAAa,GAAG;QACzB;QAEA,IAAI,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,UAAU,EAC3C,sBAAsB,IAAI,CAAC,QAAQ;aAEnC,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG;IAEhC;IAEA,gBAAgB;QACZ,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE;YACxB,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG;YACxB,sBAAsB,IAAI,CAAC,QAAQ;QACvC;IACJ;IAEA,iBAAiB;QACb,IAAI,CAAC,UAAU,GAAG;QAClB,IAAI,CAAC,aAAa;IACtB;IAEA,aAAa,EAAE,EAAE;QACb,IAAI,UAAU;QACd,OAAO,CAAC,GAAG;YACP,IAAI,CAAC,SAAS;gBACV,UAAU;gBACV,sBAAsB;oBAClB,GAAG,KAAK,CAAC,IAAI,EAAE;oBACf,UAAU;gBACd;YACJ;QACJ;IACJ;IAEA,SAAS,EAAE,EAAE,KAAK,EAAE;QAChB,MAAM,KAAK,SAAS,cAAc,CAAC;QACnC,IAAI,MAAM,GAAG,WAAW,KAAK,OACzB,GAAG,WAAW,GAAG;IAEzB;IAEA,qBAAqB,EAAE,EAAE,YAAY,EAAE,YAAY,EAAE;QACjD,MAAM,KAAK,SAAS,cAAc,CAAC;QACnC,IAAI,CAAC,IAAI;QAET,IAAI,IAAI,CAAC,eAAe,KAAK,IAAI;YAC7B,IAAI,IAAI,CAAC,kBAAkB,EAAE;YAC7B,IAAI,CAAC,GAAG,aAAa,CAAC,UAAU;gBAC5B,GAAG,SAAS,GAAG,CAAC,0BAA0B,EAAE,WAAW,cAAc,OAAO,CAAC,GAAG,EAAE,CAAC;gBACnF,MAAM,QAAQ,GAAG,aAAa,CAAC;gBAC/B,MAAM,SAAS;oBACX,MAAM,SAAS,WAAW,MAAM,KAAK;oBACrC,IAAI,CAAC,eAAe,GAAG;oBACvB,IAAI,CAAC,kBAAkB,GAAG,MAAe,6CAA6C;oBACtF,GAAG,WAAW,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,SAAS,wBAAwB;oBAC/E,IAAI,CAAC,UAAU,CAAC,IAAI;oBACpB,IAAI,CAAC,iBAAiB,IAAmB,+BAA+B;gBAC5E;gBACA,MAAM,gBAAgB,CAAC,QAAQ,QAAQ;oBAAE,MAAM;gBAAK;gBACpD,MAAM,gBAAgB,CAAC,WAAW,CAAC;oBAC/B,IAAI,EAAE,GAAG,KAAK,SACV,MAAM,IAAI;yBACP,IAAI,EAAE,GAAG,KAAK,UAAU;wBAC3B,IAAI,CAAC,eAAe,GAAG;wBACvB,IAAI,CAAC,iBAAiB;oBAC1B;gBACJ;gBACA,WAAW;oBAAQ,MAAM,KAAK;oBAAI,MAAM,MAAM;gBAAI,GAAG;YACzD;QACJ,OACI,IAAI,GAAG,WAAW,KAAK,cACnB,GAAG,WAAW,GAAG;IAG7B;IAEA;;KAEC,GACD,oBAAoB,EAAE,EAAE,GAAG,EAAE;QACzB,IAAI,OAAO,iBAAiB,OAAO,eAAe,OAAO,aACrD,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;QAEzC,IAAI,OAAO,iBAAiB,OAAO,aAC/B,OAAO,GAAG,IAAI,OAAO,CAAC,GAAG,IAAI,CAAC;QAElC,IAAI,OAAO,aACP,OAAO,GAAG,IAAI,OAAO,CAAC,GAAG,GAAG,CAAC;QAEjC,OAAO,OAAO;IAClB;IAEA;;;;KAIC,GACD,oBAAoB;QAChB,IAAI,IAAI,CAAC,eAAe,EAAE;QAC1B,IAAI,CAAC,eAAe,GAAG;QACvB,sBAAsB;YAClB,IAAI,CAAC,eAAe,GAAG;YACvB,IAAI,CAAC,kBAAkB,GAAG,OAAS,uBAAuB;YAC1D,IAAI,CAAC,qBAAqB;QAC9B;IACJ;IAEA,WAAW,EAAE,EAAE,KAAK,EAAE;QAClB,IAAI,YAAY;QAChB,IAAI,MAAM,QAAQ;YACd,IAAI,CAAC,eAAe,GAAG;YACvB,IAAI,CAAC,iBAAiB;YACtB;QACJ;QAEA,MAAM,QAAQ,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,IAAI,CAAC,eAAe;QAEjE,IAAI,OAAO,eAAe;YACtB,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,OAAO;YACzD,YAAY;QAChB,OAAO,IAAI,OAAO,eAAe;YAC7B,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG;YAC5B,YAAY;QAChB,OAAO,IAAI,OAAO;YACd,IAAI,OAAO,aAAa;gBACpB,MAAM,OAAO,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,OAAO;gBAC5C,YAAY;YAChB,OAAO,IAAI,OAAO,aAAa;gBAC3B,MAAM,KAAK,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,OAAO;gBAC1C,YAAY;YAChB,OAAO,IAAI,OAAO,aAAa;gBAC3B,MAAM,MAAM,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,OAAO;gBAC3C,YAAY;YAChB,OAAO,IAAI,OAAO,aAAa;gBAC3B,MAAM,KAAK,GAAG;gBACd,YAAY;YAChB;YAEA,IAAI,AAAC,CAAA,OAAO,eAAe,OAAO,WAAU,KAAM,MAAM,OAAO,KAAK,aAAa,MAAM,KAAK,KAAK,WAAW;gBACxG,MAAM,WAAW,IAAI,CAAC,SAAS,CAAC,MAAM,OAAO;gBAC7C,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,MAAM,KAAK,GAAG,KAAK,GAAG,CAAC;gBAClD,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,MAAM,KAAK,GAAG,KAAK,GAAG,CAAC;YACtD;QACJ;QAEA,IAAI,CAAC,eAAe,GAAG;QACvB,IAAI,CAAC,iBAAiB;QACtB,IAAI,WACA,IAAI,CAAC,cAAc;IAE3B;IAEA,iCAAiC;IACjC,cAAc,SAAS,EAAE;QACrB,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE;QAE/B,MAAM,QAAQ,AAAC,YAAY,OAAQ,KAAK,GAAG,CAAC,IAAI,CAAC,eAAe;QAEhE,iDAAiD;QACjD,MAAM,UAAU,IAAI,OAAkB,qBAAqB;QAC3D,IAAI,aAAa,AAAC,CAAA,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,GAAE,IAAK,MAAM;QAClF,IAAI,KAAK,GAAG,CAAC,eAAe,SACxB,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa;aAEhD,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,AAAC,CAAA,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,KAAK,IAAI,CAAC,cAAc,UAAU,GAAE,IAAK;QAG1F,MAAM,eAAe,MAAM,OAAW,mBAAmB;QACzD,MAAM,UAAU,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK;QAC9D,IAAI,KAAK,GAAG,CAAC,YAAY,cACrB,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY;aAE9C,IAAI,CAAC,OAAO,CAAC,KAAK,IAAI,KAAK,IAAI,CAAC,WAAW;QAG/C,MAAM,iBAAiB,AAAC,YAAY,UAAW,IAAI,CAAC,eAAe;QACnE,MAAM,cAAc,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG;QACzC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,cAAc,KAAK,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM;QAC3E,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,cAAc,KAAK,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM;QAE3E,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAA;YAChB,IAAI,IAAI,CAAC,aAAa,KAAK,MAAM,EAAE,EAAE;YAErC,MAAM,OAAO,MAAM,KAAK,GAAG;YAC3B,MAAM,CAAC,IAAI,OAAO,KAAK,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,MAAM;YACtD,MAAM,CAAC,IAAI,OAAO,KAAK,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,MAAM;YACtD,MAAM,MAAM,AAAC,YAAU,UAAS,KAAK,GAAG,CAAC,IAAI,CAAC,eAAe;YAC7D,MAAM,WAAW,EAAE,OAAO,KAAK,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW;QAChE;IACJ;IAEA,iBAAiB,KAAK,EAAE;QACpB,MAAM,KAAK,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;QACnC,MAAM,KAAK,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;QACnC,MAAM,KAAK,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,OAAO,KAAK,IAAI,CAAC,MAAI,IAAI,MAAI;QAChE,MAAM,OAAO,GAAG,AAAC,CAAA,IAAI,CAAC,SAAS,CAAC,KAAK,KAAK,CAAC,IAAI,OAAO,GAAE,IAAK;QAE7D,MAAM,qBAAqB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM;QACvF,MAAM,cAAc,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,KAAK,GAAG,CAAC;QAClD,MAAM,cAAc,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,KAAK,GAAG,CAAC;QAElD,MAAM,0BAA0B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC,MAAM,MAAM;QACrF,MAAM,aAAa,MAAM,KAAK,GAAG,KAAK,GAAG,CAAC;QAC1C,MAAM,aAAa,MAAM,KAAK,GAAG,KAAK,GAAG,CAAC;QAE1C,MAAM,UAAU,aAAa;QAC7B,MAAM,UAAU,aAAa;QAC7B,MAAM,WAAW,KAAK,IAAI,CAAC,WAAS,IAAI,WAAS;QACjD,MAAM,uBAAuB,IAAI,CAAC,SAAS,CAAC,KAAK,KAAK,CAAC,SAAS;QAEhE,IAAI,CAAC,MAAM,QAAQ,EAAE,MAAM,QAAQ,GAAG;YAAE,GAAG;YAAG,GAAG;YAAG,OAAO;YAAG,SAAS;QAAE;QACzE,MAAM,QAAQ,CAAC,CAAC,GAAG;QACnB,MAAM,QAAQ,CAAC,CAAC,GAAG;QACnB,MAAM,QAAQ,CAAC,KAAK,GAAG;QACvB,MAAM,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,oBAAoB,CAAC;QAEnD,MAAM,uBAAuB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC,MAAM,OAAO;QACnF,MAAM,aAAa,MAAM,KAAK,GAAG,KAAK,GAAG,CAAC;QAC1C,MAAM,aAAa,MAAM,KAAK,GAAG,KAAK,GAAG,CAAC;QAG1C,MAAM,aAAa,AAAC,aAAa,UAAY,aAAa;QAC1D,IAAI,CAAC,MAAM,GAAG,EAAE,MAAM,GAAG,GAAG;YAAE,OAAO;YAAM,MAAM;YAAY,KAAK;QAAK;QACvE,IAAI,WAAW,OAAO;YAClB,MAAM,GAAG,CAAC,KAAK,GAAG;YAClB,MAAM,GAAG,CAAC,IAAI,GAAG;YACjB,MAAM,GAAG,CAAC,GAAG,GAAG;YAChB,MAAM,YAAY,GAAG;QACzB,OAAO;YACH,MAAM,OAAO,CAAC,aAAc,YAAU;YACtC,MAAM,YAAY,GAAG,OAAO;YAC5B,MAAM,OAAO,aAAa,OAAO;YACjC,MAAM,OAAO,aAAa,OAAO;YACjC,IAAI,CAAC,MAAM,WAAW,EAAE,MAAM,WAAW,GAAG;gBAAE,GAAG;gBAAG,GAAG;YAAE;YACzD,MAAM,WAAW,CAAC,CAAC,GAAG;YACtB,MAAM,WAAW,CAAC,CAAC,GAAG;YAEtB,IAAI,MAAM,YAAY,EAAE;gBACpB,MAAM,GAAG,CAAC,KAAK,GAAG;gBAClB,MAAM,GAAG,CAAC,IAAI,GAAG;gBACjB,MAAM,GAAG,CAAC,GAAG,GAAG;YACpB,OAAO;gBACH,MAAM,WAAW,KAAK,IAAI,CAAC,QAAM,IAAI,QAAM;gBAC3C,MAAM,iBAAiB,IAAI,CAAC,SAAS,CAAC,KAAK,KAAK,CAAC,MAAM;gBACvD,MAAM,aAAa,IAAI,CAAC,oBAAoB,CAAC;gBAC7C,MAAM,aAAa,IAAI,CAAC,kBAAkB,CAAC,YAAY,IAAI,CAAC,OAAO,CAAC,MAAM;gBAC1E,MAAM,GAAG,CAAC,KAAK,GAAG,GAAG,SAAS,OAAO,CAAC,GAAG,GAAG,CAAC;gBAC7C,MAAM,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC;gBACjC,MAAM,GAAG,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,YAAY,KAAK,EAAE,YAAY;YACzE;QACJ;QACA,MAAM,2BAA2B,AAAC,CAAA,MAAM,OAAO,GAAG,GAAE,IAAK;QACzD,MAAM,cAAc,AAAC,CAAA,2BAA2B,MAAM,MAAM,GAAG,GAAE,IAAK;QACtE,IAAI,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,GAAG;YAAE,KAAK;YAAI,KAAK;YAAI,MAAM;YAAI,OAAO;YAAI,QAAQ;QAAG;QAE9E,0HAA0H;QAE1H,MAAM,EAAE,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,QAAQ,CAAC,OAAO,EAAE,EAAE,CAAC;QAChE,MAAM,EAAE,CAAC,GAAG,GAAG,GAAG,SAAS,OAAO,CAAC,GAAG,IAAI,CAAC;QAC3C,MAAM,EAAE,CAAC,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC;YAAC,GAAG;YAAS,GAAG;QAAO,GAAG;YAAC,GAAG;YAAY,GAAG;QAAU,GAAG,MAAM,KAAK;QACzG,MAAM,EAAE,CAAC,KAAK,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC,aAAa,IAAI,CAAC;IACzD,iDAAiD;IACrD;IAEA,oBAAoB;QAChB,MAAM,sBAAsB,AAAC,CAAA,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,GAAE,IAAK;QAC9D,MAAM,cAAc,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC;QAC7D,MAAM,eAAe,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,KAAK,GAAG,CAAC;QACpD,MAAM,eAAe,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,KAAK,GAAG,CAAC;QAEpD,MAAM,aAAa,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM;QAC/E,MAAM,cAAc,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,KAAK,GAAG,CAAC;QAClD,MAAM,cAAc,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,KAAK,GAAG,CAAC;QAElD,MAAM,cAAc,eAAe;QACnC,MAAM,cAAc,eAAe;QAEnC,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,KAAK,IAAI,CAAC,eAAa,IAAI,eAAa;QAClE,MAAM,2BAA2B,IAAI,CAAC,SAAS,CAAC,KAAK,KAAK,CAAC,aAAa;QAExE,IAAI,CAAC,YAAY,CAAC,eAAe,GAAG,IAAI,CAAC,oBAAoB,CAAC;IAClE;IAEA,kBAAkB;IAClB,YAAY;QACR,wCAAwC;QACxC,8FAA8F;QAC9F,gCAAgC;QAChC,IAAI,CAAC,GAAG,CAAC,IAAI;QACb,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG;QACrB,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM;QAC7D,IAAI,CAAC,GAAG,CAAC,OAAO;QAEhB,MAAM,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK;QAC9B,IAAI,SAAS,GAAG;QAChB,MAAM,SAAS,OAAO;QACtB,MAAM,SAAS,OAAO,IAAI;QAC1B,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,YAAY,CAAC,KAAK,KAAK,MAAM;YACtD,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG;YAC1B,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG;YAC3B,IAAI,CAAC,eAAe;YACpB,IAAI,CAAC,WAAW,GAAG;QACvB;QACA,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,EAAE,GAAG;QAEzC,IAAI,IAAI,CAAC,WAAW,EAChB,IAAI,CAAC,eAAe,CAAC,QAAQ;QAEjC,IAAI,CAAC,eAAe,CAAC,QAAQ;QAC7B,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAA;YAChB,IAAI,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE;YACjC,IAAI,CAAC,UAAU,CAAC,QAAQ,QAAQ;YAChC,IAAG,IAAI,CAAC,kBAAkB,EACtB,IAAI,CAAC,wBAAwB,CAAC,QAAQ,QAAQ;QAEtD;QACA,IAAG,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,eAAe,KAAK,MAC5C,IAAI,CAAC,gBAAgB,CAAC,QAAQ;QAElC,IAAI,IAAI,CAAC,eAAe,KAAK,MAAM;YAC/B,MAAM,QAAQ,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,IAAI,CAAC,eAAe;YACjE,IAAI,OAAO,IAAI,CAAC,eAAe,CAAC,QAAQ,QAAQ;YAChD,IAAI,CAAC,sBAAsB,CAAC,QAAQ,QAAQ,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,UAAU,EAAE;QACvF;QACA,IAAI,IAAI,CAAC,cAAc,KAAK,QAAQ,IAAI,CAAC,cAAc,KAAK,IAAI,CAAC,eAAe,EAC5E,IAAI,CAAC,sBAAsB,CAAC,QAAQ,QAAQ,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,eAAe,EAAE;IAE/F;IAEA,kBAAkB;QACd,MAAM,OAAO,IAAI,CAAC,YAAY,CAAC,KAAK;QACpC,IAAI,SAAS,GAAG;QAChB,MAAM,SAAS,OAAO;QACtB,MAAM,SAAS,OAAO,IAAI;QAC1B,MAAM,MAAM,IAAI,CAAC,SAAS;QAC1B,IAAI,IAAI;QACR,sCAAsC;QACtC,IAAI,SAAS,GAAG;QAChB,IAAI,QAAQ,CAAC,GAAG,GAAG,MAAM;QACzB,IAAI,WAAW,GAAG,IAAI,CAAC,eAAe;QACtC,IAAI,SAAS,GAAG;QAEhB,IAAI,SAAS;QACb,IAAI,GAAG,CAAC,QAAQ,QAAQ,QAAQ,GAAG,IAAI,KAAK,EAAE;QAC9C,IAAI,MAAM;QAEV,IAAK,IAAI,IAAI,GAAG,IAAI,GAAG,IAAK;YACxB,IAAI,SAAS;YACb,IAAI,GAAG,CAAC,QAAQ,QAAQ,SAAU,CAAA,IAAI,CAAA,GAAI,GAAG,IAAI,KAAK,EAAE;YACxD,IAAI,MAAM;QACd;QAEA,4BAA4B;QAC5B,IAAI,SAAS,GAAG,IAAI,CAAC,eAAe;QACpC,IAAI,IAAI,GAAG,CAAC,KAAK,EAAE,KAAK,GAAG,CAAC,IAAI,SAAS,OAAO,kCAAkC,CAAC;QACnF,IAAI,SAAS,GAAG;QAChB,IAAI,YAAY,GAAG;QACnB,IAAK,IAAI,IAAI,GAAG,KAAK,GAAG,IAAK;YACzB,MAAM,aAAa,SAAU,CAAA,IAAI,CAAA;YACjC,MAAM,QAAQ,IAAI,CAAC,QAAQ,GAAI,CAAA,IAAI,CAAA;YACnC,IAAI,QAAQ,CAAC,MAAM,OAAO,CAAC,IAAI,SAAS,aAAa,iBAAiB;QAC1E;QAEA,+BAA+B;QAC/B,IAAI,IAAI,CAAC,aAAa,EAClB,IAAK,IAAI,MAAM,GAAG,MAAM,KAAK,OAAO,GAAI;YACpC,MAAM,aAAa,kBAAkB,QAAQ,CAAC;YAC9C,IAAI,WAAW,CAAC,aAAa,qBAAqB;YAClD,MAAM,MAAM,IAAI,CAAC,SAAS,CAAC;YAC3B,MAAM,iBAAiB,aAAc,OAAO,IAAK,SAAS,AAAC,CAAA,OAAO,IAAI,MAAK,IAAK;YAChF,MAAM,cAAc;YACpB,IAAI,YAAY;YAChB,IAAI,CAAC,YACD,YAAY,SAAS,MAAO,CAAA,iBAAiB,MAAK;YAEtD,IAAI,SAAS;YACb,IAAI,MAAM,CACN,SAAS,cAAc,KAAK,GAAG,CAAC,MAChC,SAAS,cAAc,KAAK,GAAG,CAAC;YAEpC,IAAI,MAAM,CACN,SAAS,YAAY,KAAK,GAAG,CAAC,MAC9B,SAAS,YAAY,KAAK,GAAG,CAAC;YAElC,IAAI,MAAM;QACd;QAEJ,IAAI,OAAO;IACf;IAEA,eAAe,MAAM,EAAE,MAAM,EAAE;QAAE,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe;QAAE,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG;QAAK,IAAI,CAAC,GAAG,CAAC,SAAS;QAAI,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,QAAQ,QAAQ,GAAG,IAAI,KAAK,EAAE;QAAG,IAAI,CAAC,GAAG,CAAC,MAAM;QAAI,IAAK,IAAI,IAAI,GAAG,IAAI,GAAG,IAAK;YAAE,IAAI,CAAC,GAAG,CAAC,SAAS;YAAI,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,QAAQ,SAAU,CAAA,IAAI,CAAA,GAAI,GAAG,IAAI,KAAK,EAAE;YAAG,IAAI,CAAC,GAAG,CAAC,MAAM;QAAI;IAAE;IAChV,gBAAgB,MAAM,EAAE,MAAM,EAAE;QAC5B,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,eAAe;QACzC,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,KAAK,EAAE,KAAK,GAAG,CAAC,IAAI,SAAS,OAAO,iCAAiC,CAAC;QACvF,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG;QACrB,IAAI,CAAC,GAAG,CAAC,YAAY,GAAG;QACxB,IAAK,IAAI,IAAI,GAAG,KAAK,GAAG,IAAK;YACzB,MAAM,aAAa,SAAU,CAAA,IAAI,CAAA;YACjC,MAAM,QAAQ,IAAI,CAAC,QAAQ,GAAI,CAAA,IAAI,CAAA;YACnC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,MAAM,OAAO,CAAC,IAAI,SAAS,aAAa,iBAAiB;QAC/E;IACJ;IAEA,gBAAgB,MAAM,EAAE,MAAM,EAAE;QAC5B,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU;QACtC,4BAA4B;QAC5B,MAAM,aAAa,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG;QACvC,IAAI,CAAC,GAAG,CAAC,SAAS;QAClB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,QAAQ,YAAY,GAAG,IAAI,KAAK,EAAE;QACvD,IAAI,CAAC,GAAG,CAAC,MAAM;QACf,MAAM,cAAc,IAAI,CAAC,mBAAmB,GAAG;QAC/C,MAAM,cAAc,SAAS,IAAI,CAAC,QAAQ;QAC1C,MAAM,mBAAmB,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,cAAc;QAC5D,MAAM,cAAc,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM;QAChF,MAAM,OAAO,SAAS,mBAAmB,KAAK,GAAG,CAAC;QAClD,MAAM,OAAO,SAAS,mBAAmB,KAAK,GAAG,CAAC;QAClD,IAAI,CAAC,OAAO,CAAC,cAAc,GAAG;YAAE,GAAG;YAAM,GAAG;QAAK;QAIjD,wDAAwD;QACxD,MAAM,gBAAgB,IAAI,CAAC,OAAO,CAAC,aAAa;QAChD,MAAM,eAAgB,IAAI,CAAC,OAAO,CAAC,YAAY;QAC/C,MAAM,aAAa,KAAK,GAAG,CAAC,AAAE,CAAA,gBAAgB,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,GAAE,IAAK,MAAO;QAClF,MAAM,YAAa,KAAK,GAAG,CAAC,eAAe,IAAI,CAAC,OAAO,CAAC,KAAK;QAC7D,IAAI,aAAa,OAAO,YAAY,MAAM;YACtC,MAAM,kBAAkB,eAAe,cAAc;YACrD,MAAM,aAAa,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC;YAC5D,MAAM,QAAQ,SAAS,kBAAkB,KAAK,GAAG,CAAC;YAClD,MAAM,QAAQ,SAAS,kBAAkB,KAAK,GAAG,CAAC;YAClD,IAAI,CAAC,OAAO,CAAC,qBAAqB,GAAG;gBAAE,GAAG;gBAAO,GAAG;YAAM;YAC1D,IAAI,CAAC,GAAG,CAAC,IAAI;YACb,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe;YAC3C,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG;YACrB,IAAI,CAAC,GAAG,CAAC,SAAS;YAClB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ;YACxB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO;YACvB,IAAI,CAAC,GAAG,CAAC,MAAM;YACf,IAAI,CAAC,GAAG,CAAC,OAAO;YAEhB,MAAM,OAAO,IAAI,CAAC,MAAM,CAAC,qBAAqB;YAC9C,MAAM,OAAO,KAAK,IAAI,GAAI,QAAQ,IAAI,CAAC,GAAG;YAC1C,MAAM,OAAO,KAAK,GAAG,GAAI,QAAQ,IAAI,CAAC,GAAG;YACzC,MAAM,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,aAAa,CAAC,eAAe,SAAS,EAAE,aAAa,OAAO,CAAC,GAAG,IAAI,CAAC;YAC9F,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,eAAe;YACpD,IAAI,CAAC,YAAY,CAAC,SAAS,GAAG;YAC9B,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,GAAG;YAClC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,UAAU,EAAE,OAAO,IAAI,CAAC,YAAY,CAAC,WAAW,GAAG,GAAG,IAAI,EAAE,OAAO,IAAI,CAAC,YAAY,CAAC,YAAY,GAAG,GAAG,GAAG,CAAC;QACpJ,OAAO;YACH,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,GAAG;YAClC,IAAI,CAAC,OAAO,CAAC,qBAAqB,GAAG;QACzC;QAEA,MAAM,WAAW,IAAI,CAAC,aAAa,KAAK,aAAa,IAAI,CAAC,QAAQ,KAAK;QACvE,IAAI,YAAY,IAAI,CAAC,OAAO,CAAC,UAAU,KAAK,QAAQ,IAAI,CAAC,OAAO,CAAC,SAAS,KAAK,MAAM;YACjF,MAAM,iBAAiB,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,cAAc;YAC9D,MAAM,YAAY,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU;YAClF,MAAM,QAAQ,SAAS,iBAAiB,KAAK,GAAG,CAAC;YACjD,MAAM,QAAQ,SAAS,iBAAiB,KAAK,GAAG,CAAC;YACjD,IAAI,CAAC,GAAG,CAAC,IAAI;YACb,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU;YACtC,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG;YACrB,IAAI,CAAC,GAAG,CAAC,SAAS;YAClB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ;YACxB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO;YACvB,IAAI,CAAC,GAAG,CAAC,MAAM;YACf,IAAI,CAAC,GAAG,CAAC,OAAO;QACpB;QAEA,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU;QACtC,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG;QACrB,IAAI,CAAC,GAAG,CAAC,SAAS;QAClB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ;QACxB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM;QACtB,IAAI,CAAC,GAAG,CAAC,MAAM;IACnB;IAEA,gBAAgB,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE;QACnC,MAAM,WAAW,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC,MAAM,OAAO;QACvE,MAAM,eAAe,AAAC,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,GAAI;QACrD,MAAM,IAAI,SAAS,eAAe,KAAK,GAAG,CAAC;QAC3C,MAAM,IAAI,SAAS,eAAe,KAAK,GAAG,CAAC;QAC3C,OAAO;YAAE;YAAG;QAAE;IAClB;IAEA,WAAW,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE;QAC9B,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,QAAQ;QACtD,MAAM,aAAa,KAAK,GAAG,CAAC,IAAI,SAAS;QACzC,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU;QACtC,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG;QACrB,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,aAAa,GAAG,IAAI,aAAa,GAAG,YAAY;QACxE,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG;QACrB,MAAM,cAAc,IAAI,CAAC,mBAAmB,GAAG;QAC/C,MAAM,cAAc,SAAS,IAAI,CAAC,QAAQ;QAC1C,MAAM,mBAAmB,MAAM,KAAK,GAAG,cAAc;QACrD,MAAM,cAAc,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC,MAAM,MAAM;QACzE,MAAM,OAAO,IAAI,mBAAmB,KAAK,GAAG,CAAC;QAC7C,MAAM,OAAO,IAAI,mBAAmB,KAAK,GAAG,CAAC;QAC7C,MAAM,cAAc,GAAG;YAAE,GAAG;YAAM,GAAG;QAAK;QAC1C,IAAI,CAAC,GAAG,CAAC,SAAS;QAClB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG;QACnB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM;QACtB,IAAI,CAAC,GAAG,CAAC,MAAM;QACf,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU;QACpC,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,GAAG,KAAK,GAAG,CAAC,IAAI,SAAS,OAAO,kCAAkC,CAAC;QACnF,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG;QACrB,IAAI,CAAC,GAAG,CAAC,YAAY,GAAG;QACxB,IAAI,IAAI,CAAC,YAAY,EACjB,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,MAAM,EAAE,EAAE,IAAI,aAAa,IAAI,GAAG,IAAI,aAAa,IAAI;IAEjF;IAEA,yBAAyB,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE;QAC5C,IAAI,CAAC,MAAM,QAAQ,EAAE;QACrB,MAAM,EAAE,GAAG,MAAM,EAAE,GAAG,MAAM,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,QAAQ;QACtE,MAAM,cAAc,IAAI,CAAC,mBAAmB,GAAG;QAC/C,MAAM,cAAc,SAAS,IAAI,CAAC,QAAQ;QAC1C,MAAM,mBAAmB,MAAM,QAAQ,CAAC,KAAK,GAAG,cAAc;QAC9D,MAAM,iBAAiB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC,MAAM,QAAQ,CAAC,OAAO;QACtF,MAAM,OAAO,SAAS,mBAAmB,KAAK,GAAG,CAAC;QAClD,MAAM,OAAO,SAAS,mBAAmB,KAAK,GAAG,CAAC;QAClD,IAAI,CAAC,GAAG,CAAC,IAAI;QACb,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU;QACtC,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG;QACrB,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC;YAAC;YAAG;SAAE;QAC3B,IAAI,CAAC,GAAG,CAAC,SAAS;QAClB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ;QACxB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM;QACtB,IAAI,CAAC,GAAG,CAAC,MAAM;QACf,IAAI,CAAC,GAAG,CAAC,OAAO;IACpB;IAEA,iBAAiB,MAAM,EAAE,MAAM,EAAE;QAC7B,MAAM,QAAQ,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,IAAI,CAAC,eAAe;QACjE,IAAI,CAAC,SAAS,MAAM,YAAY,IAAI,CAAC,MAAM,WAAW,EAAE;QACxD,MAAM,cAAc,SAAS,IAAI,CAAC,QAAQ;QAE1C,MAAM,aAAa,AAAC,CAAA,IAAI,CAAC,SAAS,CAAC,KAAK,KAAK,CAAC,MAAM,WAAW,CAAC,CAAC,EAAE,MAAM,WAAW,CAAC,CAAC,KAAK,GAAE,IAAK;QAClG,MAAM,iBAAiB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC;QAChE,MAAM,WAAW,KAAK,IAAI,CAAC,MAAM,WAAW,CAAC,CAAC,IAAE,IAAI,MAAM,WAAW,CAAC,CAAC,IAAE;QACzE,MAAM,gBAAgB,WAAW;QACjC,MAAM,OAAO,SAAS,gBAAgB,KAAK,GAAG,CAAC;QAC/C,MAAM,OAAO,SAAS,gBAAgB,KAAK,GAAG,CAAC;QAE/C,IAAI,CAAC,GAAG,CAAC,SAAS;QAClB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,MAAM,MAAM,GAAG,GAAG,IAAI,KAAK,EAAE;QAC1C,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU;QACpC,IAAI,CAAC,GAAG,CAAC,IAAI;QACb,IAAI,CAAC,GAAG,CAAC,IAAI;QACb,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe;QAC3C,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG;QACrB,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC;YAAC;YAAG;SAAE;QAC3B,IAAI,CAAC,GAAG,CAAC,SAAS;QAClB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ;QACxB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM;QACtB,IAAI,CAAC,GAAG,CAAC,MAAM;QACf,IAAI,CAAC,GAAG,CAAC,OAAO;IACpB;IAEA,gBAAgB,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE;QACnC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,QAAQ;QACtD,IAAI,CAAC,GAAG,CAAC,IAAI;QACb,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU;QACtC,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG;QACrB,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC;YAAC;YAAG;SAAE;QAC3B,IAAI,CAAC,GAAG,CAAC,SAAS;QAClB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ;QACxB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG;QACnB,IAAI,CAAC,GAAG,CAAC,MAAM;QACf,IAAI,CAAC,GAAG,CAAC,OAAO;IACpB;IAEA,uBAAuB,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,SAAS,EAAE;QAAE,MAAM,QAAQ,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QAAU,IAAI,CAAC,OAAO;QAAQ,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,QAAQ;QAAQ,MAAM,aAAa,KAAK,GAAG,CAAC,IAAI,SAAS;QAAQ,MAAM,kBAAkB,aAAa;QAAK,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG;QAAO,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG;QAAW,IAAI,CAAC,GAAG,CAAC,SAAS;QAAI,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,iBAAiB,GAAG,IAAI,KAAK,EAAE;QAAG,IAAI,CAAC,GAAG,CAAC,MAAM;IAAI;IAEpc,gBAAgB,MAAM,EAAE,MAAM,EAAE;QAC5B,MAAM,gBAAgB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS;QACtF,MAAM,gBAAgB;QACtB,MAAM,cAAc,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG;QAE1C,MAAM,KAAK,SAAS,KAAK,GAAG,CAAC,iBAAiB;QAC9C,MAAM,KAAK,SAAS,KAAK,GAAG,CAAC,iBAAiB;QAC9C,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG;YAAC,GAAG;YAAI,GAAG;QAAE;QAElC,MAAM,SAAS;QACf,MAAM,SAAS;QACf,MAAM,OAAO,SAAS,KAAK,GAAG,CAAC,iBAAiB;QAChD,MAAM,OAAO,SAAS,KAAK,GAAG,CAAC,iBAAiB;QAChD,IAAI,CAAC,QAAQ,CAAC,aAAa,GAAG;YAAC,GAAG;YAAM,GAAG;QAAI;QAE/C,IAAI,CAAC,GAAG,CAAC,IAAI;QACb,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe;QAC3C,IAAI,CAAC,GAAG,CAAC,SAAS,GAAK,IAAI,CAAC,eAAe;QAC3C,IAAI,CAAC,GAAG,CAAC,IAAI,GAAU,GAAG,KAAK,GAAG,CAAC,IAAI,SAAS,MAAM,kCAAkC,CAAC;QACzF,IAAI,CAAC,GAAG,CAAC,SAAS,GAAK;QACvB,IAAI,CAAC,GAAG,CAAC,YAAY,GAAG;QACxB,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,IAAI;QAC3B,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG;QACrB,IAAI,CAAC,GAAG,CAAC,SAAS;QAClB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ;QACxB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM;QACtB,IAAI,CAAC,GAAG,CAAC,MAAM;QACf,MAAM,aAAa,KAAK,KAAK,CAAC,OAAO,QAAQ,OAAO;QACpD,IAAI,CAAC,GAAG,CAAC,SAAS;QAClB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM;QACtB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,KAAK,KAAK,GAAG,CAAC,aAAa,KAAK,EAAE,GAAG,IAAI,OAAO,KAAK,KAAK,GAAG,CAAC,aAAa,KAAK,EAAE,GAAG;QAC5G,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,KAAK,KAAK,GAAG,CAAC,aAAa,KAAK,EAAE,GAAG,IAAI,OAAO,KAAK,KAAK,GAAG,CAAC,aAAa,KAAK,EAAE,GAAG;QAC5G,IAAI,CAAC,GAAG,CAAC,SAAS;QAClB,IAAI,CAAC,GAAG,CAAC,IAAI;QACb,IAAI,CAAC,GAAG,CAAC,OAAO;QAEhB,IAAI,IAAI,CAAC,kBAAkB,EAAE;YACzB,MAAM,cAAc,SAAS,IAAI,CAAC,QAAQ;YAC1C,MAAM,cAAc,IAAI,CAAC,mBAAmB,GAAG;YAC/C,MAAM,mBAAmB,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,cAAc;YACjE,MAAM,qBAAqB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,YAAY,CAAC,eAAe;YAErG,MAAM,UAAU,SAAS,mBAAmB,KAAK,GAAG,CAAC;YACrD,MAAM,UAAU,SAAS,mBAAmB,KAAK,GAAG,CAAC;YAErD,IAAI,CAAC,GAAG,CAAC,IAAI;YACb,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe;YAC3C,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG;YACrB,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC;gBAAC;gBAAG;aAAE;YAC3B,IAAI,CAAC,GAAG,CAAC,SAAS;YAClB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ;YACxB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,SAAS;YACzB,IAAI,CAAC,GAAG,CAAC,MAAM;YACf,IAAI,CAAC,GAAG,CAAC,OAAO;QACpB;IACJ;IAEA,qBAAqB;IACrB,wBAAwB;QACpB,IAAI,CAAC,kBAAkB;QACvB,IAAI,CAAC,gBAAgB;QACrB,IAAI,CAAC,SAAS;IAClB;IAEA,qBAAqB;QACjB,IAAI,CAAC,oBAAoB,CAAC,eAAe,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM;QAC5G,IAAI,CAAC,oBAAoB,CAAC,eAAe,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK;IACvG;IAEA,mBAAmB;QACf,MAAM,gBAAgB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,IAAI,CAAC,eAAe;QAEzE,IAAI,CAAC,QAAQ,CAAC,YAAY,gBAAgB,cAAc,EAAE,GAAG;QAE7D,IAAI,eAAe;YACf,IAAI,CAAC,oBAAoB,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,cAAc,OAAO,EAAE,EAAE,CAAC,EAAE,cAAc,OAAO;YAC9G,IAAI,CAAC,oBAAoB,CAAC,aAAa,GAAG,cAAc,KAAK,CAAC,OAAO,CAAC,GAAG,GAAG,CAAC,EAAE,cAAc,KAAK;YAClG,IAAI,CAAC,oBAAoB,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,cAAc,MAAM,EAAE,EAAE,CAAC,EAAE,cAAc,MAAM;YAC5G,IAAI,CAAC,oBAAoB,CAAC,aAAa,GAAG,cAAc,KAAK,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,EAAE,cAAc,KAAK;QACvG,OAAO;YACH,IAAI,CAAC,QAAQ,CAAC,aAAa;YAC3B,IAAI,CAAC,QAAQ,CAAC,aAAa;YAC3B,IAAI,CAAC,QAAQ,CAAC,aAAa;YAC3B,IAAI,CAAC,QAAQ,CAAC,aAAa;QAC/B;QAEA,MAAM,SAAS,iBAAiB,IAAI,CAAC,kBAAkB;QACvD,IAAI,CAAC,QAAQ,CAAC,UAAU,SAAS,cAAc,EAAE,CAAC,GAAG,GAAG;QACxD,IAAI,CAAC,QAAQ,CAAC,UAAU,SAAS,cAAc,EAAE,CAAC,GAAG,GAAG;QACxD,IAAI,CAAC,QAAQ,CAAC,WAAW,SAAS,cAAc,EAAE,CAAC,IAAI,GAAG;QAC1D,IAAI,CAAC,QAAQ,CAAC,YAAY,SAAS,cAAc,EAAE,CAAC,KAAK,GAAG;QAC5D,uEAAuE;QAEvE,MAAM,UAAU,iBAAiB,IAAI,CAAC,WAAW,IAAI,CAAC,cAAc,YAAY;QAChF,IAAI,CAAC,QAAQ,CAAC,WAAW,UAAU,cAAc,GAAG,CAAC,GAAG,GAAG;QAC3D,IAAI,CAAC,QAAQ,CAAC,WAAW,UAAU,cAAc,GAAG,CAAC,KAAK,GAAG;QAC7D,IAAI,CAAC,QAAQ,CAAC,YAAY,UAAU,cAAc,GAAG,CAAC,IAAI,GAAG;QAE7D,MAAM,eAAe,IAAI,CAAC,WAAW;QACrC,MAAM,cAAc,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,kBAAkB;QAC/D,MAAM,iBAAiB,AAAC,CAAA,IAAI,CAAC,YAAY,CAAC,eAAe,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,GAAE,IAAK;QACzF,IAAI,CAAC,QAAQ,CAAC,aAAa,eAAe,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,GAAG;QACtI,IAAI,CAAC,QAAQ,CAAC,YAAY,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,gBAAgB,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,GAAG;IACnI;IAEA,qBAAqB;QAEjB,IAAI,CAAC,YAAY,CAAC,SAAS,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,mBAAmB,GAAG,aAAa,cAAc;QACnG,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,SAAS,EAAE;YACjC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,UAAU,IAAI,CAAC,mBAAmB;YACjE,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,mBAAmB;QACvE;QAEA,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,gBAAgB,EAAE,IAAI,CAAC,eAAe,GAAG,IAAI,aAAa,cAAc;QAChG,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC,eAAe,GAAG,IAAI,aAAa,cAAc;IACtG;IAEA,uBAAuB;QACnB,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,GAAG,CAAC;QACpC,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,GAAG,CAAC;QAErC,IAAI,IAAI,CAAC,eAAe,GAAG,GAAG;YAC1B,MAAM,QAAQ,IAAI,CAAC,eAAe,KAAK,KAAK,QACtC,IAAI,CAAC,eAAe,KAAK,KAAK,QAC1B,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;YACpC,IAAI,CAAC,gBAAgB,CAAC,WAAW,GAAG;YACpC,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,MAAM,CAAC;QAC3C,OAAO,IAAI,IAAI,CAAC,eAAe,GAAG,GAAG;YACjC,MAAM,WAAW,KAAK,GAAG,CAAC,IAAI,CAAC,eAAe;YAC9C,MAAM,QAAQ,aAAa,KAAK,QAC1B,aAAa,KAAK,QACd,GAAG,SAAS,CAAC,CAAC;YACxB,IAAI,CAAC,iBAAiB,CAAC,WAAW,GAAG;YACrC,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,MAAM,CAAC;QAC5C;IACJ;IAEA,iBAAiB;QACb,IAAI,CAAC,QAAQ,CAAC,aAAa,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,iBAAiB,GAAG;IACxE;IAEA,UAAU;QACN,MAAM,OAAO;QACb,MAAM,kBAAkB,IAAI,CAAC,aAAa,CAAC,YAAY;QACvD,MAAM,eAAe,IAAI,CAAC,YAAY,CAAC,WAAW;QAClD,MAAM,MAAM,KAAK,GAAG,CAAC,cAAc;QACnC,MAAM,QAAQ,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,KAAK,MAAM;QAEhD,SAAS,eAAe,CAAC,KAAK,CAAC,WAAW,CAAC,cAAc;QACzD,IAAI,CAAC,aAAa,GAAG;QAErB,oDAAoD;QACpD,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,GAAI,GAAG,IAAI,EAAE,CAAC;QACrC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG,IAAI,EAAE,CAAC;QAErC,2FAA2F;QAC3F,MAAM,OAAO;QAEb,IAAI,OAAO,GAAG;YACV,IAAI,CAAC,MAAM,CAAC,KAAK,GAAI,OAAO,IAAI,CAAC,GAAG;YACpC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,OAAO,IAAI,CAAC,GAAG;YACpC,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK;YAC3C,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM;YAC7C,IAAI,CAAC,WAAW,GAAG;QACvB;QAEA,IAAI,CAAC,mBAAmB;QAExB,IAAI,CAAC,cAAc;IACvB;IAEA,QAAQ,KAAK,EAAE;QACX,MAAM,OAAO;QACb,MAAM,UAAU,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,KAAK;QAC5C,SAAS,eAAe,CAAC,KAAK,CAAC,WAAW,CAAC,cAAc;QACzD,IAAI,CAAC,aAAa,GAAG;QAErB,MAAM,OAAO,OAAO;QACpB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,GAAG,GAAG,KAAK,EAAE,CAAC;QACrC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG,KAAK,EAAE,CAAC;QAEtC,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,OAAO,IAAI,CAAC,GAAG;QACnC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,OAAO,IAAI,CAAC,GAAG;QACpC,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK;QAC3C,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM;QAC7C,IAAI,CAAC,WAAW,GAAG;QACnB,IAAI,CAAC,mBAAmB;QACxB,IAAI,CAAC,cAAc;IACvB;IAEA,+BAA+B;IAC/B,kBAAkB,CAAC,EAAE;QACjB,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;YACrB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,OAAO,GAAG;YACjC;QACJ;QAEA,IAAI,cAAc;QAClB,MAAM,OAAO,IAAI,CAAC,MAAM,CAAC,qBAAqB;QAC9C,MAAM,SAAS,AAAC,CAAA,EAAE,OAAO,GAAG,KAAK,IAAI,AAAD,IAAK,IAAI,CAAC,GAAG;QACjD,MAAM,SAAS,AAAC,CAAA,EAAE,OAAO,GAAG,KAAK,GAAG,AAAD,IAAK,IAAI,CAAC,GAAG;QAChD,MAAM,SAAS,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG;QACnC,MAAM,cAAc,AAAC,SAAS,MAAO,IAAI,CAAC,QAAQ;QAElD,IAAI,IAAI,CAAC,QAAQ,KAAK,QAAQ;YAC1B,MAAM,KAAK,SAAS;YACpB,MAAM,KAAK,CAAE,CAAA,SAAS,MAAK;YAC3B,MAAM,WAAW,KAAK,KAAK,CAAC,IAAI,MAAM;YACtC,MAAM,oBAAoB,KAAK,KAAK,CAAC,IAAI;YACzC,MAAM,aAAa,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC;YAE5D,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC,aAAa,CAAC,YAAY,SAAS,EAAE,SAAS,OAAO,CAAC,GAAG,GAAG,CAAC;QAC5F,OAAO,IAAI,IAAI,CAAC,QAAQ,KAAK,UAAU;YACnC,MAAM,SAAS,AAAC,IAAI,CAAC,aAAa,KAAK,YAAa,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,IAAI,CAAC,aAAa;YACpH,IAAI,QAAQ;gBACR,MAAM,aAAa,AAAC,OAAO,EAAE,KAAK,YAAa;oBAAE,GAAG;oBAAQ,GAAG;gBAAO,IAAI,IAAI,CAAC,eAAe,CAAC,QAAS,SAAS,KAAM;gBACvH,MAAM,KAAK,SAAS,WAAW,CAAC;gBAChC,MAAM,KAAK,CAAE,CAAA,SAAS,WAAW,CAAC,AAAD;gBACjC,MAAM,oBAAoB,KAAK,KAAK,CAAC,IAAI;gBACzC,MAAM,YAAY,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC;gBAC3D,MAAM,eAAe,KAAK,KAAK,CAAC,IAAI;gBACpC,MAAM,WAAW,eAAe,cAAe,CAAA,IAAI,CAAC,mBAAmB,GAAG,EAAC;gBAC3E,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC,aAAa,CAAC,WAAW,SAAS,EAAE,SAAS,OAAO,CAAC,GAAG,IAAI,CAAC;YAC5F;QACJ,OAAO,IAAI,IAAI,CAAC,aAAa,KAAK,YAAY;YAC1C,IAAI,IAAI,CAAC,QAAQ,KAAK,iBAClB,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,EAAE,CAAC;iBAClE,IAAI,IAAI,CAAC,QAAQ,KAAK,aACzB,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC;QAElE;QAEA,IAAI,aAAa;YACb,IAAI,IAAI,CAAC,aAAa,KAAK,aAAa,IAAI,CAAC,QAAQ,KAAK,UACtD,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU;iBAE9C,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU;YAElD,IAAI,CAAC,WAAW,CAAC,SAAS,GAAG;YAC7B,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,OAAO,GAAG;YACjC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,UAAU,EAAE,EAAE,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,WAAW,GAAG,GAAG,IAAI,EAAE,EAAE,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,YAAY,GAAG,GAAG,GAAG,CAAC;QAC3J,OACI,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,OAAO,GAAG;IAEzC;IAEA,kBAAkB,CAAC,EAAE;QACjB,IAAI,EAAE,MAAM,KAAK,KAAK,EAAE,OAAO,KAAK,aAAa,EAAE,OAAO,KAAK,GAAG;QAClE,IAAI,IAAI,CAAC,MAAM,CAAC,iBAAiB,IAAI,EAAE,SAAS,KAAK,WACjD,IAAI;YAAE,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,EAAE,SAAS;QAAG,EAAE,OAAO,KAAK,CAAC;QAErE,MAAM,OAAO,IAAI,CAAC,MAAM,CAAC,qBAAqB;QAC9C,MAAM,SAAS,AAAC,CAAA,EAAE,OAAO,GAAG,KAAK,IAAI,AAAD,IAAK,IAAI,CAAC,GAAG;QACjD,MAAM,SAAS,AAAC,CAAA,EAAE,OAAO,GAAG,KAAK,GAAG,AAAD,IAAK,IAAI,CAAC,GAAG;QAChD,MAAM,OAAO,IAAI,CAAC,oBAAoB,CAAC,QAAQ;QAC/C,IAAI,CAAC,cAAc,GAAG;YAAE,GAAG;YAAQ,GAAG;QAAO;QAC7C,IAAI,MAAM;YACN,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG;YAC3B,IAAI,CAAC,aAAa,GAAG,KAAK,EAAE;YAC5B,IAAI,CAAC,eAAe,GAAG,KAAK,IAAI;YAChC,IAAI,CAAC,YAAY,GAAG;gBAAE,GAAG;gBAAQ,GAAG;YAAO;YAC3C,IAAI,KAAK,EAAE,KAAK,aAAa,KAAK,EAAE,KAAK,YACrC,IAAI,CAAC,eAAe,GAAG,KAAK,EAAE;YAElC,IAAI,CAAC,cAAc,GAAG,KAAK,EAAE;YAC7B,IAAI,CAAC,cAAc;QACvB,OAAO;YACH,IAAI,CAAC,aAAa,GAAG;YACrB,IAAI,CAAC,eAAe,GAAG;YACvB,IAAI,CAAC,cAAc,GAAG;QAC1B;IACJ;IAEA,gBAAgB,CAAC,EAAE;QACf,IAAI,IAAI,CAAC,MAAM,CAAC,qBAAqB,IAAI,KAAK,EAAE,SAAS,KAAK,WAC1D,IAAI;YACA,IAAI,CAAC,MAAM,CAAC,qBAAqB,CAAC,EAAE,SAAS;QACjD,EAAE,OAAO,KAAK;QACV,yBAAyB;QAC7B;QAEJ,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG;QAC3B,IAAI,IAAI,CAAC,aAAa,KAAK,aAAa,IAAI,CAAC,QAAQ,KAAK,UACtD;YAAA,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,KAAK,QAAQ,IAAI,CAAC,OAAO,CAAC,SAAS,KAAK,MAAM;gBACrE,IAAI,CAAC,OAAO,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU;gBACpD,IAAI,CAAC,OAAO,CAAC,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS;YACtD;QAAA;QAEJ,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG;QAC1B,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG;QACzB,IAAI,CAAC,aAAa,GAAG;QACrB,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,aAAa,GAAG;QACrB,IAAI,CAAC,eAAe,GAAG;QACvB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,OAAO,GAAG;QACjC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,GAAG;QAClC,IAAI,CAAC,cAAc;IACvB;IACA,2BAA2B,CAAC,EAAE;IAC1B,4DAA4D;IAChE;IACA,2BAA2B,CAAC,EAAE;IAC1B,gEAAgE;IACpE;IAEA,yBAAyB,CAAC,EAAE;IACxB,sEAAsE;IAC1E;IACA,kBAAkB,CAAC,EAAE;QACjB,MAAM,OAAO,IAAI,CAAC,MAAM,CAAC,qBAAqB;QAC9C,MAAM,SAAS,AAAC,CAAA,EAAE,OAAO,GAAG,KAAK,IAAI,AAAD,IAAK,IAAI,CAAC,GAAG;QACjD,MAAM,SAAS,AAAC,CAAA,EAAE,OAAO,GAAG,KAAK,GAAG,AAAD,IAAK,IAAI,CAAC,GAAG;QAEhD,IAAI,IAAI,CAAC,aAAa,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;YAC3C,MAAM,MAAM,SAAS,IAAI,CAAC,cAAc,CAAC,CAAC;YAC1C,MAAM,MAAM,SAAS,IAAI,CAAC,cAAc,CAAC,CAAC;YAC1C,IAAI,KAAK,KAAK,CAAC,KAAK,OAAO,IAAI,CAAC,aAAa,EAAE;gBAC3C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa;gBACvC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,eAAe;gBACpC,IAAI,IAAI,CAAC,aAAa,KAAK,aAAa,IAAI,CAAC,QAAQ,KAAK,UAAU;oBAChE,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa;oBACpD,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY;gBACtD;YACJ;QACJ;QAEA,IAAI,IAAI,CAAC,aAAa,EAAE;YACpB,IAAI,CAAC,iBAAiB,CAAC;YACvB,MAAM,SAAS,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG;YACnC,MAAM,cAAc,AAAC,SAAS,MAAO,IAAI,CAAC,QAAQ;YAClD,IAAI,IAAI,CAAC,aAAa,KAAK,YAAY;gBACnC,MAAM,KAAK,SAAS;gBACpB,MAAM,KAAK,CAAE,CAAA,SAAS,MAAK;gBAC3B,MAAM,oBAAoB,KAAK,KAAK,CAAC,IAAI;gBACzC,IAAI,IAAI,CAAC,QAAQ,KAAK,iBAClB,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC;qBAChE,IAAI,IAAI,CAAC,QAAQ,KAAK,aAAa;oBACtC,MAAM,gBAAgB;oBACtB,MAAM,gBAAgB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS;oBACtF,MAAM,SAAS,SAAS;oBACxB,MAAM,YAAY,SAAS;oBAC3B,MAAM,YAAY,CAAE,CAAA,SAAS,MAAK;oBAClC,MAAM,WAAW,KAAK,GAAG,CAAC;oBAC1B,MAAM,WAAW,KAAK,GAAG,CAAC;oBAC1B,MAAM,kBAAkB,YAAY,WAAW,YAAY;oBAC3D,MAAM,mBAAmB,kBAAkB;oBAC3C,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,KAAK,GAAG,CAAC,GAAG,CAAC,mBAAmB;gBAC1D;gBACA,IAAI,CAAC,cAAc;YACvB,OAAO,IAAI,IAAI,CAAC,QAAQ,KAAK,QAAQ;gBACjC,MAAM,QAAQ,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,IAAI,CAAC,aAAa;gBAC/D,IAAI,OAAO;oBACP,MAAM,gBAAgB,SAAS,IAAI,CAAC,YAAY,CAAC,CAAC;oBAClD,MAAM,gBAAgB,SAAS,IAAI,CAAC,YAAY,CAAC,CAAC;oBAClD,MAAM,YAAY,gBAAgB;oBAClC,MAAM,YAAY,gBAAgB;oBAClC,MAAM,CAAC,IAAI;oBACX,MAAM,CAAC,IAAI;oBACX,IAAI,CAAC,cAAc;gBACvB;YACJ,OAAO,IAAI,IAAI,CAAC,QAAQ,KAAK,UAAU;gBACnC,MAAM,cAAc,IAAI,CAAC,mBAAmB,GAAG;gBAC/C,MAAM,SAAS,AAAC,IAAI,CAAC,aAAa,KAAK,YAAa,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,IAAI,CAAC,aAAa;gBACpH,MAAM,aAAa,AAAC,OAAO,EAAE,KAAK,YAAa;oBAAE,GAAG;oBAAQ,GAAG;gBAAO,IAAI,IAAI,CAAC,eAAe,CAAC,QAAS,SAAS,KAAM;gBAEvH,MAAM,KAAK,SAAS,WAAW,CAAC;gBAChC,MAAM,KAAK,CAAE,CAAA,SAAS,WAAW,CAAC,AAAD;gBAEjC,MAAM,oBAAoB,KAAK,KAAK,CAAC,IAAI;gBACzC,MAAM,YAAY,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC;gBAC3D,MAAM,eAAe,KAAK,IAAI,CAAC,KAAK,KAAK,KAAK;gBAC9C,MAAM,WAAW,eAAe,cAAc;gBAE9C,IAAI,OAAO,EAAE,KAAK,WAAW;oBACzB,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG;oBAC1B,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,KAAK,GAAG,CAAC,GAAG;gBACzC,OAAO;oBACH,OAAO,MAAM,GAAG;oBAChB,OAAO,KAAK,GAAG,KAAK,GAAG,CAAC,GAAG;gBAC/B;gBACA,IAAI,CAAC,cAAc;YACvB;YACA,IAAI,CAAC,YAAY,GAAG;gBAAE,GAAG;gBAAQ,GAAG;YAAO;QAC/C,OAAO;YACH,IAAI,OAAO;YACX,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;gBACrB,OAAO,IAAI,CAAC,oBAAoB,CAAC,QAAQ;gBACzC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,OAAO,SAAS;YAC/C;YACA,MAAM,aAAa,OAAO,KAAK,EAAE,GAAG;YACpC,IAAI,eAAe,IAAI,CAAC,cAAc,EAAE;gBACpC,IAAI,CAAC,cAAc,GAAG;gBACtB,IAAI,CAAC,cAAc;YACvB;QACJ;IACJ;IAEA,qBAAqB,MAAM,EAAE,MAAM,EAAE;QACjC,MAAM,SAAS,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG;QACnC,MAAM,SAAS,SAAS;QACxB,MAAM,eAAe,KAAK,IAAI,CAAC,GAAG;QAClC,MAAM,qBAAqB,KAAK,IAAI,CAAC,GAAG;QAExC,IAAI,IAAI,CAAC,WAAW,EAAE;YAClB,MAAM,UAAU,KAAK,IAAI,CAAC,AAAC,CAAA,SAAS,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,AAAD,KAAI,IAAI,AAAC,CAAA,SAAS,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,AAAD,KAAI;YAChG,IAAI,UAAU,cAAc,OAAO;gBAAE,MAAM;gBAAiB,IAAI;YAAW;YAC3E,MAAM,kBAAkB,KAAK,IAAI,CAAC,AAAC,CAAA,SAAS,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,AAAD,KAAI,IAAI,AAAC,CAAA,SAAS,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,AAAD,KAAI;YAC1H,IAAI,kBAAkB,cAAc,OAAO;gBAAE,MAAM;gBAAa,IAAI;YAAW;QACnF;QAEA,KAAK,MAAM,SAAS,IAAI,CAAC,MAAM,CAAE;YAC7B,MAAM,EAAC,CAAC,EAAE,CAAC,EAAC,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,QAAQ;YACpD,MAAM,OAAO,KAAK,GAAG,CAAC,IAAI,SAAS,SAAS;YAC5C,IAAI,SAAS,IAAI,OAAK,KAAK,SAAS,IAAI,OAAK,KAAK,SAAS,IAAI,OAAK,KAAK,SAAS,IAAI,OAAK,GACvF,OAAO;gBAAC,MAAM;gBAAQ,IAAI,MAAM,EAAE;YAAA;QAE1C;QAEA,MAAM,aAAa;YAAC,IAAI,CAAC,OAAO;eAAK,IAAI,CAAC,MAAM;SAAC;QACjD,KAAK,MAAM,UAAU,WAAY;YAC7B,IAAI,CAAC,OAAO,cAAc,EAAE;YAC5B,MAAM,UAAU,AAAC,OAAO,EAAE,KAAK,YAAa;gBAAC,GAAG;gBAAQ,GAAG;YAAM,IAAI,IAAI,CAAC,eAAe,CAAC,QAAQ,QAAQ;YAC1G,MAAM,gBAAgB,KAAK,KAAK,CAAC,SAAS,QAAQ,CAAC,EAAE,SAAS,QAAQ,CAAC;YACvE,IAAI,gBAAgB,oBAAoB;YACxC,MAAM,QAAQ,OAAO,cAAc;YACnC,MAAM,OAAO,IAAI,CAAC,aAAa,CAAC;gBAAC,GAAG;gBAAQ,GAAG;YAAM,GAAG,SAAS;YACjE,IAAI,OAAO,cAAc,OAAO;gBAAC,MAAM;gBAAU,IAAI,OAAO,EAAE;YAAA;QAClE;QACA,OAAO;IACX;IAEA,iCAAiC;IACjC,mBAAmB;QACf,MAAM,eAAe,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,mBAAmB;QACtE,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,WAAW,CAAC,AAAC,CAAA,eAAe,CAAA,IAAK,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;QACzF,IAAI,CAAC,QAAQ,CAAC,mBAAmB,IAAI,CAAC,mBAAmB,GAAC;QAC1D,IAAI,CAAC,cAAc;IACvB;IAEA,uBAAuB;IACvB,cAAc;QACV,IAAI,CAAC,UAAU,GAAG,AAAC,CAAA,IAAI,CAAC,UAAU,GAAG,CAAA,IAAK,IAAI,CAAC,WAAW,CAAC,MAAM;QACjE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC;QAEjD,+CAA+C;QAC/C,MAAM,UAAU,KAAK,KAAK,CAAC,IAAI,CAAC,QAAQ;QACxC,MAAM,eAAe;YAAC;YAAU;YAAU;YAAW;SAAW;QAChE,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,IAAI;QAClC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,SAAS;QAC9C,IAAI,CAAC,WAAW,GAAG;QACnB,IAAI,CAAC,cAAc;IACvB;IAGA,gBAAgB;QACZ,IAAI,CAAC,WAAW,GAAG,CAAC,IAAI,CAAC,WAAW;QACpC,IAAI,CAAC,cAAc;QACnB,IAAI,CAAC,gBAAgB;IACzB;IAEA,uBAAuB;QACnB,IAAI,CAAC,kBAAkB,GAAG,CAAC,IAAI,CAAC,kBAAkB;QAClD,IAAI,CAAC,cAAc;QACnB,IAAI,CAAC,iBAAiB;IAC1B;IAEA,gBAAgB;QACZ,IAAI,CAAC,WAAW,GAAG,CAAC,IAAI,CAAC,WAAW;QACpC,IAAI,CAAC,cAAc;QACnB,IAAI,CAAC,iBAAiB;IAC1B;IAEA,kBAAkB;QACd,MAAM,aAAa,IAAI,CAAC,mBAAmB;QAC3C,IAAI,CAAC,mBAAmB,GAAG,CAAC,IAAI,CAAC,mBAAmB;QACpD,IAAI,CAAC,eAAe,GAAG;QACvB,IAAI,CAAC,kBAAkB;QACvB,IAAI,CAAC,oBAAoB;QACzB,IAAI,CAAC,YACD,IAAI,CAAC,aAAa;IAE1B;IAEA,cAAc;QACV,MAAM,QAAQ;YAAC;eAAM,IAAI,CAAC,QAAQ;SAAC;QACnC,IAAI,CAAC,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,eAAe,GAAG,GAAG;YACvD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,EAAE;YACvC,IAAI,CAAC,mBAAmB,GAAG;QAC/B,OAAO;YACH,IAAI,MAAM,MAAM,OAAO,CAAC,IAAI,CAAC,eAAe;YAC5C,MAAM,AAAC,CAAA,MAAM,CAAA,IAAK,MAAM,MAAM;YAC9B,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC,IAAI;YACjC,IAAI,CAAC,mBAAmB,GAAG;QAC/B;QACA,IAAI,CAAC,kBAAkB;QACvB,IAAI,CAAC,oBAAoB;QACzB,IAAI,CAAC,aAAa;IACtB;IAEA,SAAS;QACL,MAAM,QAAQ;YAAC;eAAM,IAAI,CAAC,SAAS;SAAC;QACpC,IAAI,CAAC,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,eAAe,GAAG,GAAG;YACvD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,SAAS,CAAC,EAAE;YACxC,IAAI,CAAC,mBAAmB,GAAG;QAC/B,OAAO;YACH,IAAI,MAAM,MAAM,OAAO,CAAC,IAAI,CAAC,eAAe;YAC5C,MAAM,AAAC,CAAA,MAAM,CAAA,IAAK,MAAM,MAAM;YAC9B,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC,IAAI;YACjC,IAAI,CAAC,mBAAmB,GAAG;QAC/B;QACA,IAAI,CAAC,kBAAkB;QACvB,IAAI,CAAC,oBAAoB;QACzB,IAAI,CAAC,aAAa;IACtB;IAEA,WAAW;QACP,MAAM,eAAe,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAA,IAAK,SAAS,EAAE,EAAE,EAAE,KAAK,IAAI,CAAC,CAAC,GAAE,IAAM,IAAI;QAChF,IAAI,SAAS;QACb,MAAO,aAAa,QAAQ,CAAC,QAAS;QACtC,MAAM,QAAQ,OAAO,QAAQ,QAAQ,CAAC,GAAG;QACzC,MAAM,WAAW;YACb,IAAI;YACJ,gBAAgB,KAAK,MAAM,KAAK;YAChC,cAAc,IAAI,CAAC,QAAQ,GAAI,CAAA,MAAM,KAAK,MAAM,KAAK,GAAE;YACvD,QAAQ,KAAK,MAAM,KAAK;YACxB,OAAO,IAAI,KAAK,MAAM,KAAK;QAC/B;QACA,SAAS,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,SAAS,YAAY,GAAG,KAAK,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,cAAc;QACrG,SAAS,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,SAAS,YAAY,GAAG,KAAK,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,cAAc;QACrG,SAAS,WAAW,GAAG,IAAI,kBAAkB;QAC7C,SAAS,IAAI,GAAG,IAAI;QACpB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;QACjB,IAAI,CAAC,eAAe,GAAG;QACvB,IAAI,CAAC,gBAAgB,CAAC;QACtB,IAAI,CAAC,qBAAqB;QAC1B,IAAI,CAAC,cAAc;IACvB;IAEA,YAAY;QACR,IAAI,IAAI,CAAC,eAAe,KAAK,MAAM;QACnC,MAAM,aAAa,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,IAAI,CAAC,eAAe;QAC3E,IAAI,aAAa,IAAI;YACjB,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,YAAY;YAC/B,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,GAAG;gBACxB,MAAM,WAAW,KAAK,GAAG,CAAC,GAAG,aAAa;gBAC1C,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE;YACnD,OACI,IAAI,CAAC,eAAe,GAAG;YAE3B,IAAI,CAAC,qBAAqB;YAC1B,IAAI,CAAC,cAAc;QACvB;IACJ;IAEA,kBAAkB;QACd,IAAI,CAAC,aAAa,GAAG,CAAC,IAAI,CAAC,aAAa;QACxC,IAAI,CAAC,WAAW,GAAG;QACnB,IAAI,CAAC,cAAc;IACvB;IAEA,iBAAiB;QACb,IAAI,CAAC,YAAY,GAAG,CAAC,IAAI,CAAC,YAAY;QACtC,IAAI,CAAC,cAAc;IACvB;IAEA,MAAM,mBAAmB;QACrB,IAAI;YACA,IAAI,CAAC,MAAM,QAAQ,IACf,MAAM,MAAM,OAAO;iBAEnB,MAAM,MAAM,IAAI;QAExB,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,oBAAoB;QACtC;IACJ;IAEA,oBAAoB;QAChB,MAAM,WAAW,CAAC,CAAC,MAAM,QAAQ;QACjC,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,cAAc,WAAW,SAAS;QAClE,IAAI,CAAC,aAAa,CAAC,KAAK,GAAO,WAAW,qBAAqB;QAC/D,IAAI,CAAC,aAAa,CAAC,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK;IAC3D;IAEA,sBAAqB;QACjB,MAAM,MAAM,IAAI,kBAAkB,IAAI,CAAC,WAAW;QAClD,IAAI,CAAC,MAAM,GAAG,IAAI,YAAY,CAAC,IAAI,CAAC,OAAO;QAC3C,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAA;YAAK,EAAE,IAAI,GAAC,IAAI;YAAE,EAAE,WAAW,GAAC,IAAI,kBAAkB;QAAI;QAC9E,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE;QACxC,IAAI,CAAC,mBAAmB,GAAG;QAC3B,IAAI,CAAC,iBAAiB,GAAG;QACzB,IAAI,CAAC,OAAO;QACZ,IAAI,CAAC,mBAAmB,GAAG;QAC3B,IAAI,CAAC,WAAW;QAChB,IAAI,CAAC,cAAc;IACvB;IAEA,gBAAgB;QACZ,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,GAAG;QAC/B,MAAM,OAAO,AAAC,CAAA,OAAO,UAAU,GAAI,IAAI,CAAC,SAAS,CAAC,WAAW,AAAD,IAAM;QAClE,MAAM,MAAO,AAAC,CAAA,OAAO,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,AAAD,IAAK;QAClE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,GAAG,GAAG,KAAK,GAAG,CAAC,GAAG,MAAM,EAAE,CAAC;QACpD,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,GAAI,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,EAAE,CAAC;IACvD;IAEA,gBAAgB;QACZ,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,GAAG;IACnC;IAEA,mCAAmC;IACnC,UAAU,OAAO,EAAE;QAAE,OAAO,UAAU,KAAK,EAAE,GAAG;IAAK;IACrD,UAAU,OAAO,EAAE;QAAE,OAAO,AAAC,CAAA,UAAU,MAAM,KAAK,EAAE,GAAG,GAAE,IAAK;IAAK;IACnE,qBAAqB,OAAO,EAAE;QAAE,OAAO,AAAC,CAAA,MAAM,OAAM,IAAK;IAAK;IAC9D,qBAAqB,KAAK,EAAE;QAAE,OAAO,AAAC,CAAA,MAAM,KAAI,IAAK;IAAK;IAC1D,cAAc,GAAG,EAAE;QAAE,OAAO,KAAK,KAAK,CAAC,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG;IAAM;IACzE,WAAW,KAAK,EAAE;QACd,IAAI,QAAQ,KAAK,CAAC,SAAS,QAAQ,OAAO;QAC1C,MAAM,eAAe,QAAQ;QAC7B,MAAM,IAAI,KAAK,KAAK,CAAC,eAAe;QACpC,MAAM,IAAI,KAAK,KAAK,CAAC,AAAC,eAAe,OAAQ;QAC7C,MAAM,IAAI,KAAK,KAAK,CAAC,eAAe;QACpC,OAAO,GAAG,EAAE,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,EAAE,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,EAAE,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;IAC/G;IACA,mBAAmB,UAAU,EAAE,aAAa,EAAC;QACzC,MAAM,kBAAkB,AAAC,CAAA,aAAa,gBAAgB,GAAE,IAAK;QAC7D,IAAG,mBAAmB,KAAK,kBAAkB,IAAI,OAAO;QACxD,IAAG,mBAAmB,MAAM,kBAAkB,KAAK,OAAO;QAC1D,IAAG,mBAAmB,OAAO,kBAAkB,KAAK,OAAO;QAC3D,OAAO;IACX;IACA,UAAU,WAAW,EAAC;QAClB,IAAG,eAAe,SAAS,cAAc,MAAM,OAAO;QACtD,IAAG,eAAe,QAAQ,cAAc,MAAM,OAAO;QACrD,IAAG,eAAe,QAAQ,cAAc,OAAO,OAAO;QACtD,IAAG,eAAe,SAAS,cAAc,OAAO,OAAO;QACvD,IAAG,eAAe,SAAS,cAAc,OAAO,OAAO;QACvD,IAAG,eAAe,SAAS,cAAc,OAAO,OAAO;QACvD,IAAG,eAAe,SAAS,cAAc,OAAO,OAAO;QACvD,IAAG,eAAe,SAAS,cAAc,OAAO,OAAO;QACvD,OAAO;IACX;IACA,eAAe,gBAAgB,EAAE,cAAc,EAAE,KAAK,EAAC;QACnD,MAAM,eAAe,eAAe,CAAC,GAAG,iBAAiB,CAAC,GAAG,eAAe,CAAC,GAAG,iBAAiB,CAAC;QAClG,IAAG,QAAQ,MAAM,OAAO;QACxB,MAAM,wBAAwB,eAAgB,CAAA,QAAQ,KAAI;QAC1D,MAAM,iBAAiB,AAAC,wBAAwB,MAAM,KAAK,EAAE,GAAI;QACjE,IAAI;QACJ,IAAG,KAAK,GAAG,CAAC,kBAAkB,MAC1B,YAAY;aACT,IAAI,iBAAiB,GACxB,YAAY;aAEZ,YAAY;QAEhB,OAAO,GAAG,KAAK,GAAG,CAAC,gBAAgB,OAAO,CAAC,GAAG,CAAC,EAAE,WAAW;IAChE;IACA,cAAc,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;QACnB,MAAM,KAAK,AAAC,CAAA,EAAE,CAAC,GAAG,EAAE,CAAC,AAAD,KAAI,IAAI,AAAC,CAAA,EAAE,CAAC,GAAG,EAAE,CAAC,AAAD,KAAI;QACzC,IAAI,MAAM,GAAG,OAAO,KAAK,IAAI,CAAC,AAAC,CAAA,EAAE,CAAC,GAAG,EAAE,CAAC,AAAD,KAAI,IAAI,AAAC,CAAA,EAAE,CAAC,GAAG,EAAE,CAAC,AAAD,KAAI;QAC5D,IAAI,IAAI,AAAC,CAAA,AAAC,CAAA,EAAE,CAAC,GAAG,EAAE,CAAC,AAAD,IAAM,CAAA,EAAE,CAAC,GAAG,EAAE,CAAC,AAAD,IAAK,AAAC,CAAA,EAAE,CAAC,GAAG,EAAE,CAAC,AAAD,IAAM,CAAA,EAAE,CAAC,GAAG,EAAE,CAAC,AAAD,CAAC,IAAK;QAClE,IAAI,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG;QAC5B,OAAO,KAAK,IAAI,CAAC,AAAC,CAAA,EAAE,CAAC,GAAI,CAAA,EAAE,CAAC,GAAG,IAAK,CAAA,EAAE,CAAC,GAAG,EAAE,CAAC,AAAD,CAAC,CAAC,KAAI,IAAI,AAAC,CAAA,EAAE,CAAC,GAAI,CAAA,EAAE,CAAC,GAAG,IAAK,CAAA,EAAE,CAAC,GAAG,EAAE,CAAC,AAAD,CAAC,CAAC,KAAI;IAC3F;IACA,sBAAsB;QAClB,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe;QAC3C,IAAI,CAAC,GAAG,CAAC,SAAS,GAAK,IAAI,CAAC,eAAe;QAC3C,IAAI,CAAC,GAAG,CAAC,IAAI,GAAU,GAAG,KAAK,GAAG,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,MAAM,kCAAkC,CAAC;IACxG;AACJ,EAEA,kCAAkC;CAElC,gCAAgC;CAChC,sEAAsE;CACtE,kEAAkE;CAClE,gFAAgF;CAChF,sDAAsD;CACtD,uDAAuD;CACvD,eAAe;CACf,mDAAmD;CACnD,uDAAuD;CACvD,QAAQ;CACR,IAAI;CAEJ,wDAAwD;CACxD,yCAAyC;CACzC,yDAAyD;CACzD,QAAQ;CACR,mCAAmC;CACnC,0BAA0B;CAC1B,sEAAsE;CACtE,2DAA2D;CAC3D,MAAM;CAEN,8CAA8C;CAC9C,sCAAsC;CACtC,8CAA8C;CAC9C,qDAAqD;CACrD,0EAA0E;CAC1E,wFAAwF;CACxF,UAAU;CACV,IAAI","sources":["js/arena.js"],"sourcesContent":["/* ============================================================\n * Scenario generation & COLREGs contact controller\n * ============================================================\n */\nconst ScenarioConfig = {\n    contact_density        : 6,\n    cpa_leeway             : 0.3,\n    time_to_cpa_range      : [15, 30],\n    vector_randomization   : 0.15,\n    maneuvering_probability: 0.35,\n    constraint_density     : 2,\n};\n\n// --- Polar grid rendering constants ---\nconst CARDINAL_BEARINGS   = [0, 90, 180, 270];\nconst DASH_PATTERN_NONCAR = [4, 4];      // dashed\nconst DASH_PATTERN_SOLID  = [];          // solid\nconst LABEL_OFFSET_PX     = 6;           // gap between ring and label\nconst VECTOR_LINE_WIDTH   = 1.4 * 1.2 * 2; // consistent width for all vectors\n\nfunction solveCPA(own, tgt) {\n    const rx = tgt.x - own.x;\n    const ry = tgt.y - own.y;\n    const vx = tgt.vx - own.vx;\n    const vy = tgt.vy - own.vy;\n\n    const v2   = vx*vx + vy*vy;\n    const tCPA = v2 < 1e-6 ? 1e9 : - (rx*vx + ry*vy) / v2;\n    const xCPA = rx + vx*tCPA;\n    const yCPA = ry + vy*tCPA;\n    const dCPA = Math.sqrt(xCPA*xCPA + yCPA*yCPA);\n    return { t: tCPA, d: dCPA };\n}\n\nconst fsApi = {\n  request(el = document.documentElement) {\n    return  el.requestFullscreen?.()     ||\n            el.webkitRequestFullscreen?.()||\n            el.mozRequestFullScreen?.()  ||\n            el.msRequestFullscreen?.();\n  },\n  exit() {\n    return  document.exitFullscreen?.()   ||\n            document.webkitExitFullscreen?.()||\n            document.mozCancelFullScreen?.() ||\n            document.msExitFullscreen?.();\n  },\n  isActive() {\n    return document.fullscreenElement     ||\n           document.webkitFullscreenElement||\n           document.mozFullScreenElement   ||\n           document.msFullscreenElement;\n  }\n};\n\nclass ScenarioGenerator {\n    constructor(cfg){\n        this.cfg = cfg;\n        this.nextId = 1;\n    }\n    makeScenario(ownship){\n        const tracks = [];\n        const archetypes = ['STARBOARD_CROSS','HEAD_ON','OVERTAKE','CONSTRAINED'];\n        const type = archetypes[Math.floor(Math.random()*archetypes.length)];\n        const primary = this._makePrimary(type, ownship);\n        tracks.push(primary);\n        const nExtra = this._randInt(this.cfg.contact_density-1, this.cfg.contact_density+1);\n        for(let i=0;i<nExtra;i++){\n            const c = this._makeSecondary(ownship, tracks);\n            tracks.push(c);\n        }\n        for(let i=0;i<this.cfg.constraint_density;i++){\n            tracks.push(this._makeHazard(ownship));\n        }\n        return tracks;\n    }\n    _makePrimary(type,own){\n        const rng = this._rand(4,8);\n        let brg, crs, spd;\n        switch(type){\n            case 'STARBOARD_CROSS':\n                brg = this._rand(20,60);\n                crs = (own.course + 270 + this._rand(-10,10))%360; break;\n            case 'HEAD_ON':\n                brg = this._rand(350,10);\n                crs = (own.course + 180 + this._rand(-5,5))%360; break;\n            case 'OVERTAKE':\n                brg = this._rand(150,210);\n                crs = own.course + this._rand(-5,5);\n                spd = own.speed - this._rand(2,4); break;\n            case 'CONSTRAINED':\n            default:\n                brg = this._rand(40,60);\n                crs = (own.course + 270)%360; break;\n        }\n        spd = spd ?? this._rand(5,12);\n        const tgt = this._spawn(own, brg, rng, crs, spd);\n        this._tuneCPA(own, tgt);\n        tgt.archetype = type;\n        return tgt;\n    }\n    _makeSecondary(own, existing){\n        const brg = this._rand(0,360);\n        const rng = this._rand(2, own.maxRange??12);\n        const crs = this._rand(0,360);\n        const spd = this._rand(3,15);\n        const c = this._spawn(own, brg, rng, crs, spd);\n        if(Math.random()<this.cfg.maneuvering_probability && existing.length){\n            const tgt = existing[Math.floor(Math.random()*existing.length)];\n            c.course = (Math.atan2(tgt.y-c.y, tgt.x-c.x)*180/Math.PI + 360 + this._rand(-5,5))%360;\n        }\n        return c;\n    }\n    _makeHazard(own){\n        const brg = this._rand(0,360);\n        const rng = this._rand(3, own.maxRange??12);\n        const h = this._spawn(own, brg, rng, 0, 0);\n        h.isHazard = true;\n        return h;\n    }\n    _spawn(own,bearing,range,course,speed){\n        const id  = String(this.nextId++).padStart(4, '0');\n        const rad = bearing * Math.PI / 180;\n        return {\n            id,\n            x: own.x + range * Math.sin(rad),\n            y: own.y + range * Math.cos(rad),\n            course: course % 360,\n            speed,\n            state: 'MONITORING',\n            isUserControlled: false,\n            _base: { course, speed },\n            initialBearing: bearing,\n            initialRange: range,\n        };\n    }\n    _tuneCPA(own,tgt){\n        for(let i=0;i<90;i++){\n            const ownVec=this._vel(own), tgtVec=this._vel(tgt);\n            const {t,d}=solveCPA({...own,...ownVec},{...tgt,...tgtVec});\n            const minT=this.cfg.time_to_cpa_range[0]/60,\n                maxT=this.cfg.time_to_cpa_range[1]/60;\n            if(d<this.cfg.cpa_leeway && t>minT && t<maxT) return;\n            tgt.course=(tgt.course+this._rand(-4,4))%360;\n        }\n    }\n    _vel(v){const rad=(90-v.course)*Math.PI/180;return{vx:v.speed*Math.cos(rad),vy:v.speed*Math.sin(rad)}}\n    _rand(a,b){return a+Math.random()*(b-a)}\n    _randInt(a,b){return Math.floor(this._rand(a,b+1))}\n}\n\nclass ContactController {\n    constructor(track){this.t=track;}\n    update(dtHours,allContacts,cfg){\n        if(this.t.isUserControlled||this.t.isHazard) return;\n        switch(this.t.state){\n            case 'MONITORING':\n                if(this._collisionThreat(allContacts,cfg)){ this._planManeuver(); }\n                break;\n            case 'CALCULATING_MANEUVER': break;\n            case 'EXECUTING_MANEUVER':\n                this._applyManeuver(dtHours); break;\n            case 'RESUMING_COURSE':\n                this._returnToBase(dtHours); break;\n        }\n    }\n    _collisionThreat(all,cfg){\n        const own=this._asParticle(this.t);\n        for(const other of all){\n            if(other===this.t||other.isHazard) continue;\n            const tgt=this._asParticle(other);\n            const {t,d}=solveCPA(own,tgt);\n            if(d<cfg.cpa_leeway && t>0 && t<cfg.time_to_cpa_range[1]/60){\n                this.t.threat=other; return true;\n            }\n        } return false;\n    }\n    _planManeuver(){\n        const rel=(this.t.threat&&this._relativeSituation(this.t,this.t.threat))||'UNKNOWN';\n        let deltaCrs=0, deltaSpd=0;\n        switch(rel){\n            case 'HEAD_ON': deltaCrs=30; break;\n            case 'CROSS_GIVEWAY': deltaCrs=35; break;\n            case 'OVERTAKING': deltaCrs=0; deltaSpd=-0.4*this.t.speed; break;\n            default: deltaCrs=25;\n        }\n        this.t._targetCourse=(this.t.course+deltaCrs+360)%360;\n        this.t._targetSpeed=Math.max(2,this.t.speed+deltaSpd);\n        this.t.state='EXECUTING_MANEUVER';\n    }\n    _applyManeuver(dt){\n        const rateTurn=10*dt*60;\n        const acc=1*dt*60;\n        const diffC=((this.t._targetCourse - this.t.course + 540)%360)-180;\n        if(Math.abs(diffC)>rateTurn){\n            this.t.course=(this.t.course+Math.sign(diffC)*rateTurn+360)%360;\n        }else{ this.t.course=this.t._targetCourse; }\n        if(Math.abs(this.t.speed-this.t._targetSpeed)>acc){\n            this.t.speed+=Math.sign(this.t._targetSpeed - this.t.speed)*acc;\n        }else{ this.t.speed=this.t._targetSpeed; }\n        if(!this._collisionThreat([...this.t._sim.tracks],this.t._sim.scenarioCfg)){\n            this.t.state='RESUMING_COURSE';\n        }\n    }\n    _returnToBase(dt){\n        const rateTurn=5*dt*60;\n        const acc=0.5*dt*60;\n        const diffC=((this.t._base.course - this.t.course + 540)%360)-180;\n        if(Math.abs(diffC)>rateTurn){\n            this.t.course=(this.t.course+Math.sign(diffC)*rateTurn+360)%360;\n        }else{ this.t.course=this.t._base.course; }\n        if(Math.abs(this.t.speed-this.t._base.speed)>acc){\n            this.t.speed+=Math.sign(this.t._base.speed - this.t.speed)*acc;\n        }else{ this.t.speed=this.t._base.speed; }\n        if(Math.abs(diffC)<1 && Math.abs(this.t.speed-this.t._base.speed)<0.1){\n            this.t.state='MONITORING';\n            delete this.t.threat;\n        }\n    }\n    _relativeSituation(a,b){\n        const brg=(Math.atan2(b.y-a.y,b.x-a.x)*180/Math.PI+360)%360;\n        const diffHdgs=Math.abs(((a.course - b.course + 540)%360)-180);\n        if(diffHdgs>150&&diffHdgs<210) return 'HEAD_ON';\n        const relBrg=(brg - a.course + 360)%360;\n        if(relBrg>112.5&&relBrg<247.5) return 'OVERTAKING';\n        if(relBrg>0&&relBrg<112.5) return 'CROSS_GIVEWAY';\n        return 'OTHER';\n    }\n    _asParticle(v){const rad=(90-v.course)*Math.PI/180;return{x:v.x,y:v.y,vx:v.speed*Math.cos(rad),vy:v.speed*Math.sin(rad)}}\n}\n\n/**\n * @class Simulator\n * Encapsulates the entire state and logic for the ship maneuvering simulator.\n */\nclass Simulator {\n    constructor() {\n        // --- Suppress rendering flag for editable fields ---\n        this.suppressEditRender = false;\n        // Flag and helper for debounced UI updates\n        this.uiUpdatePending = false;\n        // --- DOM Element References ---\n        this.canvas = document.getElementById('radarCanvas');\n        this.ctx = this.canvas.getContext('2d');\n        \n        if (!this.canvas) {\n            console.error('radarCanvas element not found in DOM');\n        }\n        console.log('Simulator init: 2D context:', this.ctx);\n        if (!this.ctx) {\n            console.error('Failed to get 2D context for radarCanvas');\n        }\n        this.dragTooltip = document.getElementById('drag-tooltip');\n        this.orderTooltip = document.getElementById('order-tooltip');\n        \n        // Playback controls\n        this.btnPlayPause = document.getElementById('play-pause');\n        this.btnRange = document.getElementById('radar-range');\n        this.btnAddTrack  = document.getElementById('add-track');\n        this.btnDropTrack = document.getElementById('remove-track');\n        this.btnScen = document.getElementById('regenerate');\n        this.btnFf = document.getElementById('future');\n        this.btnRev = document.getElementById('past');\n        this.ffSpeedIndicator = document.getElementById('ff-speed-indicator');\n        this.revSpeedIndicator = document.getElementById('rev-speed-indicator');\n        this.trackDataContainer = document.getElementById('track-data-container');\n        this.rmDataContainer = document.getElementById('rm-data-container');\n        this.cpaDataContainer = document.getElementById('cpa-data-container');\n        this.windDataContainer = document.getElementById('wind-data-container');\n\n        this.simClock = document.getElementById('sim-clock');\n\n        this.mainContainer = document.querySelector('main.radar');\n        // V2 HTML uses <main class=\"radar\"> as container; alias for wrapper\n        this.radarWrapper = this.mainContainer;\n\n        this.btnSettings = document.getElementById('radar-settings');\n        this.settingsDrawer = document.getElementById('radar-settings-menu');\n        this.chkPolarPlot = document.getElementById('polar-plots');\n        this.chkTrackIds = document.getElementById('track-ids');\n        this.btnFullscreen = document.getElementById('full-screen');\n        \n\n        // --- Configuration ---\n        this.radarGreen = getComputedStyle(document.documentElement).getPropertyValue('--radar-green').trim();\n        this.radarWhite = getComputedStyle(document.documentElement).getPropertyValue('--radar-white').trim();\n        this.radarFaintGreen = getComputedStyle(document.documentElement).getPropertyValue('--radar-faint-green').trim();\n        this.radarFaintWhite = getComputedStyle(document.documentElement).getPropertyValue('--radar-faint-white').trim();\n        this.radarDarkOrange = getComputedStyle(document.documentElement).getPropertyValue('--radar-dark-orange').trim();\n        this.scenarioCfg = ScenarioConfig;\n\n        // --- State Data ---\n        this.ownShip = {\n            course: 91,\n            speed: 12.7,\n            id: 'ownShip',\n            x: 0,\n            y: 0,\n            orderedCourse: 91,\n            orderedSpeed: 12.7,\n            dragCourse: null,\n            dragSpeed: null,\n            orderedVectorEndpoint: null\n        };\n        this.tracks = [\n            { id: '01', initialBearing: 327, initialRange: 7.9, course: 255, speed: 6.1 },\n            { id: '02', initialBearing: 345, initialRange: 6.5, course: 250, speed: 7.2 },\n            { id: '03', initialBearing: 190, initialRange: 8.2, course: 75,  speed: 8.0 },\n            { id: '04', initialBearing: 205, initialRange: 5.5, course: 70,  speed: 7.5 },\n            { id: '05', initialBearing: 180, initialRange: 3.1, course: 72,  speed: 8.2 },\n        ];\n\n        this.selectedTrackId = '01';\n        this.hoveredTrackId = null;\n        this.draggedItemId = null;\n        this.dragType = null;\n        this.pendingDragId = null;\n        this.pendingDragType = null;\n        this.DPR = window.devicePixelRatio || 1;\n        this.pointerDownPos = { x: 0, y: 0 };\n        this.dragThreshold = 6 * this.DPR;\n        this.lastMousePos = { x: 0, y: 0 };\n        this.lastTimestamp = 0;\n        this.lastDomUpdate  = 0;\n        this.DOM_UPDATE_INTERVAL = 200;\n        this.sceneDirty = true;\n        this.simulationElapsed = 0;\n        this.activeEditField = null;\n\n        // --- Weather Data ---\n        this.trueWind = {\n            direction: 70,\n            speed: 15,\n            wPos: {x: 0, y: 0},\n            arrowEndpoint: {x: 0, y: 0}\n        };\n        this.relativeWind = {};\n\n        // --- Feature Toggle States ---\n        this.maxRange = 12.0;\n        this.rangeScales = [3.0, 6.0, 12.0, 24.0];\n        this.vectorTimeInMinutes = 15;\n        this.vectorTimes = [3, 15, 30];\n        // Indexes for cycling vector time and range (ensure label updates immediately)\n        this.vectorTimeIndex = this.vectorTimes.indexOf(this.vectorTimeInMinutes);\n        this.rangeIndex = this.rangeScales.indexOf(this.maxRange);\n        this.simulationSpeed = 1;\n        this.ffSpeeds = [25, 50];\n        this.revSpeeds = [-25, -50];\n        this.showRelativeMotion = true;\n        this.showCPAInfo = true;\n        this.isSimulationRunning = true;\n        this.showWeather = false;\n        this.showPolarPlot = true;\n        this.showTrackIds = true;\n        this.uiScaleFactor = 1;\n\n        // Sync data panel visibility with feature toggles\n        this.rmDataContainer.open   = this.showRelativeMotion;\n        this.cpaDataContainer.open  = this.showCPAInfo;\n        this.windDataContainer.open = this.showWeather;\n\n        // Pre-rendered radar backdrop\n        this.staticCanvas = document.createElement('canvas');\n        this.staticCtx = this.staticCanvas.getContext('2d');\n        this.staticDirty = true;\n\n        // Bind methods to ensure correct `this` context\n        this.gameLoop = this.gameLoop.bind(this);\n        this.handlePointerDown = this.handlePointerDown.bind(this);\n        this.handlePointerUp = this.handlePointerUp.bind(this);\n        this.handlePointerMove = this.handlePointerMove.bind(this);\n\n        this._initialize();\n    }\n\n    // --- Main Initialization ---\n    _initialize() {\n        this._attachEventListeners();\n\n        const BASE_CANVAS_SIZE = 900;\n        this.canvas.width = BASE_CANVAS_SIZE * this.DPR;\n        this.canvas.height = BASE_CANVAS_SIZE * this.DPR;\n        this.staticCanvas.width = this.canvas.width;\n        this.staticCanvas.height = this.canvas.height;\n        this.drawStaticRadar();\n        this.staticDirty = false;\n\n        this.simulationElapsed = 0;\n        this.updateSimClock();\n        if (this.tracks.length > 0) {\n            this.tracks.forEach(track => {\n                if (track.initialBearing !== undefined && track.initialRange !== undefined) {\n                    track.x = this.ownShip.x + track.initialRange * Math.sin(this.toRadians(track.initialBearing));\n                    track.y = this.ownShip.y + track.initialRange * Math.cos(this.toRadians(track.initialBearing));\n                } else if (track.x !== undefined && track.y !== undefined) {\n                    const dx = track.x - this.ownShip.x;\n                    const dy = track.y - this.ownShip.y;\n                    track.initialRange = Math.sqrt(dx ** 2 + dy ** 2);\n                    track.initialBearing = (this.toDegrees(Math.atan2(dx, dy)) + 360) % 360;\n                }\n                if (!track._controller) {\n                    track._controller = new ContactController(track);\n                    track._sim = this;\n                }\n            });\n        }\n\n        this.tracks.forEach(t => this.calculateAllData(t));\n        this.calculateWindData();\n\n        this.updateButtonStyles();\n        this.updatePanelsAndRedraw();\n        this.scaleUI();\n\n        this.lastTimestamp = performance.now();\n        if (this.isSimulationRunning) {\n            this.startGameLoop();\n        }\n        if (document.fonts && document.fonts.ready) {\n            document.fonts.ready.then(() => this.scaleUI());\n        }\n    }\n\n    // --- Event Listener Setup ---\n    _attachEventListeners() {\n        // Canvas interaction\n        if (window.PointerEvent) {\n            const opts = { passive: false };\n            this.canvas?.addEventListener('pointerdown', this.handlePointerDown, opts);\n            this.canvas?.addEventListener('pointerup', this.handlePointerUp, opts);\n            this.canvas?.addEventListener('pointerleave', this.handlePointerUp, opts);\n            this.canvas?.addEventListener('pointercancel', this.handlePointerUp, opts);\n            this.canvas?.addEventListener('pointermove', this.handlePointerMove, opts);\n\n            // Guarded container drag: only allow if target is not the canvas\n            this.mainContainer?.addEventListener('pointerdown', (e) => {\n                if (e.target !== this.canvas) this.handleContainerPointerDown(e);\n            }, opts);\n            this.mainContainer?.addEventListener('pointermove', (e) => {\n                if (e.target !== this.canvas) this.handleContainerPointerMove(e);\n            }, opts);\n            this.mainContainer?.addEventListener('pointerup', (e) => {\n                if (e.target !== this.canvas) this.handleContainerPointerUp(e);\n            }, opts);\n            this.mainContainer?.addEventListener('pointercancel', (e) => {\n                if (e.target !== this.canvas) this.handleContainerPointerUp(e);\n            }, opts);\n        } else if ('ontouchstart' in window) {\n            const wrap = (handler) => (e) => {\n                const touch = e.touches[0] || e.changedTouches[0];\n                if (!touch) return;\n                e.preventDefault();\n                e.stopPropagation();\n                handler({\n                    clientX: touch.clientX,\n                    clientY: touch.clientY,\n                    button: 0,\n                    buttons: 1,\n                    pointerType: 'touch',\n                    pointerId: touch.identifier || 0,\n                    preventDefault: () => e.preventDefault(),\n                    stopPropagation: () => e.stopPropagation(),\n                });\n            };\n            const opts = { passive: false };\n            this.canvas?.addEventListener('touchstart', wrap(this.handlePointerDown), opts);\n            this.canvas?.addEventListener('touchmove', wrap(this.handlePointerMove), opts);\n            this.canvas?.addEventListener('touchend', wrap(this.handlePointerUp));\n            this.canvas?.addEventListener('touchcancel', wrap(this.handlePointerUp));\n\n            // Guarded container drag for touch events\n            this.mainContainer?.addEventListener('touchstart', (e) => {\n                if (e.target !== this.canvas) wrap(this.handleContainerPointerDown)(e);\n            }, opts);\n            this.mainContainer?.addEventListener('touchmove', (e) => {\n                if (e.target !== this.canvas) wrap(this.handleContainerPointerMove)(e);\n            }, opts);\n            this.mainContainer?.addEventListener('touchend', (e) => {\n                if (e.target !== this.canvas) wrap(this.handleContainerPointerUp)(e);\n            });\n            this.mainContainer?.addEventListener('touchcancel', (e) => {\n                if (e.target !== this.canvas) wrap(this.handleContainerPointerUp)(e);\n            });\n        } else {\n            this.canvas?.addEventListener('mousedown', this.handlePointerDown);\n            this.canvas?.addEventListener('mouseup', this.handlePointerUp);\n            this.canvas?.addEventListener('mouseleave', this.handlePointerUp);\n            this.canvas?.addEventListener('mousemove', this.handlePointerMove);\n\n            // Guarded container drag for mouse events\n            this.mainContainer?.addEventListener('mousedown', (e) => {\n                if (e.target !== this.canvas) this.handleContainerPointerDown(e);\n            });\n            this.mainContainer?.addEventListener('mousemove', (e) => {\n                if (e.target !== this.canvas) this.handleContainerPointerMove(e);\n            });\n            this.mainContainer?.addEventListener('mouseup', (e) => {\n                if (e.target !== this.canvas) this.handleContainerPointerUp(e);\n            });\n        }\n\n        // Window resize\n        window.addEventListener('resize', this._throttleRAF(() => {\n            this.scaleUI();\n        }));\n\n        // Control buttons\n        this.btnVectorTime?.addEventListener('click', () => this.toggleVectorTime());\n        this.btnRange?.addEventListener('click', () => this.toggleRange());\n        this.btnPlayPause?.addEventListener('click', () => this.togglePlayPause());\n        // Bind playback controls directly to ensure the correct handlers\n        // are invoked when the buttons are pressed\n        this.btnFf?.addEventListener('click', this.fastForward.bind(this));\n        this.btnRev?.addEventListener('click', this.rewind.bind(this));\n        this.btnAddTrack?.addEventListener('click', () => this.addTrack());\n        this.btnDropTrack?.addEventListener('click', () => this.dropTrack());\n        this.btnScen?.addEventListener('click', () => {\n            // 1) Clean up old instance\n            window.sim.destroy();\n\n            // 2) Build a completely new one\n            window.sim = new Simulator();\n\n            // 3) (Optional) If you want randomness on first load only,\n            //    your constructor might already call setupRandomScenario().\n            //    Otherwise, explicitly do:\n            // window.sim.setupRandomScenario();\n        });\n\n        // Help Modal\n        // this.btnHelp?.addEventListener('click', () => this.showHelpModal());\n        this.helpCloseBtn?.addEventListener('click', () => this.hideHelpModal());\n        if (this.helpModal && this.helpContent && this.helpCloseBtn) {\n            new ResizeObserver(() => {\n                const scale = Math.max(0.8, Math.min(1.2, this.helpModal.clientWidth / 500));\n                this.helpContent.style.fontSize = `${1 * scale}rem`;\n                this.helpCloseBtn.style.fontSize = `${0.9 * scale}rem`;\n                this.helpCloseBtn.style.padding = `${0.5 * scale}rem`;\n            }).observe(this.helpModal);\n        }\n\n        // Data panel expand/collapse toggles radar elements\n        this.rmDataContainer?.addEventListener('toggle', () => {\n            this.showRelativeMotion = this.rmDataContainer.open;\n            this.markSceneDirty();\n            this._scheduleUIUpdate();\n        });\n        this.cpaDataContainer?.addEventListener('toggle', () => {\n            this.showCPAInfo = this.cpaDataContainer.open;\n            this.markSceneDirty();\n            this._scheduleUIUpdate();\n        });\n        this.windDataContainer?.addEventListener('toggle', () => {\n            this.showWeather = this.windDataContainer.open;\n            this.markSceneDirty();\n            this._scheduleUIUpdate();\n        });\n\n        // Settings drawer interactions\n        if (this.btnSettings && this.settingsDrawer) {\n            this.btnSettings.addEventListener('click', () => {\n                this.btnSettings.classList.toggle('active');\n                this.settingsDrawer.classList.toggle('active');\n            });\n        }\n        // Fullscreen toggle\n        if (this.btnFullscreen) {\n            const sim = this;\n            this.btnFullscreen.addEventListener('click', function (e) {\n                this.classList.toggle('active');\n                sim.toggleFullScreen();\n            });\n        }\n        document.addEventListener('keydown', (e) => {\n            if (e.key === 'Escape' && fsApi.isActive()) {\n                fsApi.exit();\n            }\n        });\n\n        // Settings toggles for polar plot and track IDs\n        if (this.chkPolarPlot) {\n            const sim = this;\n            this.chkPolarPlot.addEventListener('click', function (e) {\n                this.classList.toggle('active');\n                sim.togglePolarPlot();\n            });\n        }\n        if (this.chkTrackIds) {\n            const sim = this;\n            this.chkTrackIds.addEventListener('click', function (e) {\n                this.classList.toggle('active');\n                sim.toggleTrackIds();\n            });\n        }\n\n        // Shared tooltip behavior for elements with data-tooltip\n        document.querySelectorAll('[data-tooltip]').forEach(el => {\n            el.addEventListener('pointerenter', e => {\n                this.dragTooltip.textContent = el.getAttribute('data-tooltip');\n                this.dragTooltip.style.color = this.radarGreen;\n                this.dragTooltip.style.display = 'block';\n                // Dynamic positioning logic (buffer, edge-aware)\n                const buffer = 10;\n                const tooltipWidth = this.dragTooltip.offsetWidth;\n                const tooltipHeight = this.dragTooltip.offsetHeight;\n                let x = e.clientX + buffer;\n                if (e.clientX + tooltipWidth + buffer > window.innerWidth) {\n                  x = e.clientX - tooltipWidth - buffer;\n                }\n                const y = e.clientY - tooltipHeight - buffer;\n                this.dragTooltip.style.transform = `translate(${x}px, ${y}px)`;\n            });\n            el.addEventListener('pointermove', e => {\n                if (this.dragTooltip.style.display === 'block') {\n                    // Dynamic positioning logic (buffer, edge-aware)\n                    const buffer = 10;\n                    const tooltipWidth = this.dragTooltip.offsetWidth;\n                    const tooltipHeight = this.dragTooltip.offsetHeight;\n                    let x = e.clientX + buffer;\n                    if (e.clientX + tooltipWidth + buffer > window.innerWidth) {\n                      x = e.clientX - tooltipWidth - buffer;\n                    }\n                    const y = e.clientY - tooltipHeight - buffer;\n                    this.dragTooltip.style.transform = `translate(${x}px, ${y}px)`;\n                }\n            });\n            el.addEventListener('pointerleave', () => {\n                this.dragTooltip.style.display = 'none';\n            });\n            el.addEventListener('pointerdown', () => {\n                this.dragTooltip.style.display = 'none';\n            });\n        });\n\n        ['fullscreenchange','webkitfullscreenchange','mozfullscreenchange','MSFullscreenChange']\n            .forEach(evt => document.addEventListener(evt, () => this._syncFullscreenUI()));\n        this._syncFullscreenUI();\n\n        // Editable fields\n        this.dataPane?.addEventListener('click', (e) => {\n            if (e.target.classList.contains('editable')) {\n                if (this.activeEditField) return; // Prevent new input if one is already active\n                this.activeEditField = e.target.id;\n                this._scheduleUIUpdate();\n            }\n        });\n    }\n\n    // Clears all simulation state and graphics buffers for garbage collection\n    destroy() {\n        cancelAnimationFrame(this._raf);\n        clearInterval(this._myInterval);\n        clearTimeout(this._myTimeout);\n        window.removeEventListener('resize', this._onResize);\n        if (this.tracks) this.tracks.length = 0;\n        this.ownShip = null;\n        this.tracks = null;\n        this.targets = null;\n        // wipe canvas to release GPU memory\n        if (this.canvas) {\n          this.canvas.width = this.canvas.width;\n          this.canvas.height = this.canvas.height;\n        }\n        this.ctx = null;\n    }\n\n    // --- Vector Time Toggle ---\n    toggleVectorTime() {\n        this.vectorTimeIndex = (this.vectorTimeIndex + 1) % this.vectorTimes.length;\n        this.vectorTimeInMinutes = this.vectorTimes[this.vectorTimeIndex];\n        this.btnVectorTime.textContent = `${this.vectorTimeInMinutes} min`;\n        this.markSceneDirty();\n    }\n\n    /**\n     * Toggle play/pause of the simulation.\n     */\n    togglePlayPause() {\n      // If FF/RW active, reset to normal play and resume play immediately\n      if (this.simulationSpeed !== 1) {\n        // Stop fast-forward/rewind and resume normal play immediately\n        this.simulationSpeed = 1;\n        this.updateSpeedIndicator();\n        this.updateButtonStyles();\n        this.isSimulationRunning = true;\n        this.btnPlayPause.classList.remove('pause');\n        this.startGameLoop();\n        return;\n      }\n      // Toggle play/pause\n      if (this.isSimulationRunning) {\n        this.isSimulationRunning = false;\n        this.btnPlayPause.classList.add('pause');\n      } else {\n        this.isSimulationRunning = true;\n        this.btnPlayPause.classList.remove('pause');\n        this.startGameLoop();\n      }\n      this.updateSpeedIndicator();\n      this.updateButtonStyles();\n    }\n\n    /**\n     * Cycle forward through fast-forward speeds.\n     */\n    fastForward() {\n      // Cycle through 25/50 or reset to normal (1)\n      if (this.simulationSpeed === this.ffSpeeds[this.ffSpeeds.length - 1]) {\n        this.simulationSpeed = 1;\n      } else {\n        if (!this.isSimulationRunning) this.isSimulationRunning = true;\n        const idx = this.ffSpeeds.indexOf(this.simulationSpeed);\n        this.simulationSpeed = idx === -1\n          ? this.ffSpeeds[0]\n          : (this.ffSpeeds[idx + 1] || 1);\n      }\n      this.updateSpeedIndicator();\n      this.updateButtonStyles();\n      this.markSceneDirty();\n      this.btnPlayPause.classList.remove('pause');\n    }\n\n    /**\n     * Cycle backward through rewind speeds.\n     */\n    rewind() {\n      // Cycle through 25/50 or reset to normal (1)\n      if (this.simulationSpeed === this.revSpeeds[this.revSpeeds.length - 1]) {\n        this.simulationSpeed = 1;\n      } else {\n        if (!this.isSimulationRunning) this.isSimulationRunning = true;\n        const idx = this.revSpeeds.indexOf(this.simulationSpeed);\n        this.simulationSpeed = idx === -1\n          ? this.revSpeeds[0]\n          : (this.revSpeeds[idx + 1] || 1);\n      }\n      this.updateSpeedIndicator();\n      this.updateButtonStyles();\n      this.markSceneDirty();\n      this.btnPlayPause.classList.remove('pause');\n    }\n\n    // TODO: Optimize the simulation loop to handle ~50-100 tracks smoothly.\n    // - Avoid creating new objects or strings every frame (reuse them instead).\n    // - Do minimal work for off-screen or non-selected tracks.\n    // - Keep each frame under ~16ms.\n    // --- Animation & Optimizations ---\n\n    gameLoop(timestamp) {\n        const deltaTime = (timestamp - this.lastTimestamp) || 0;\n        this.lastTimestamp = timestamp;\n\n        this.updatePhysics(deltaTime);\n\n        if (this.isSimulationRunning) {\n            this.simulationElapsed += (deltaTime / 1000) * this.simulationSpeed;\n            if (this.simulationElapsed <= 0) {\n                this.simulationElapsed = 0;\n                if (this.simulationSpeed < 0) {\n                    // Auto-stop rewind at start and resume play\n                    this.simulationSpeed = 1;\n                    this.updateSpeedIndicator();\n                    this.updateButtonStyles();\n                }\n            }\n            this.sceneDirty = true;\n        }\n\n        if (this.sceneDirty) {\n            this.tracks.forEach(t => this.calculateAllData(t));\n            this.calculateWindData();\n            this.drawRadar();\n            this.sceneDirty = false;\n        }\n\n        if (timestamp - this.lastDomUpdate >= this.DOM_UPDATE_INTERVAL) {\n            this.updateOwnShipPanel();\n            this.updateDataPanels();\n            this.updateButtonStyles();\n            this.updateSimClock();\n            this.lastDomUpdate = timestamp;\n        }\n\n        if (this.isSimulationRunning || this.sceneDirty) {\n            requestAnimationFrame(this.gameLoop);\n        } else {\n            this.gameLoop.running = false;\n        }\n    }\n\n    startGameLoop() {\n        if (!this.gameLoop.running) {\n            this.gameLoop.running = true;\n            requestAnimationFrame(this.gameLoop);\n        }\n    }\n\n    markSceneDirty() {\n        this.sceneDirty = true;\n        this.startGameLoop();\n    }\n\n    _throttleRAF(fn) {\n        let running = false;\n        return (...args) => {\n            if (!running) {\n                running = true;\n                requestAnimationFrame(() => {\n                    fn.apply(this, args);\n                    running = false;\n                });\n            }\n        };\n    }\n\n    _setText(id, value) {\n        const el = document.getElementById(id);\n        if (el && el.textContent !== value) {\n            el.textContent = value;\n        }\n    }\n\n    _renderEditableField(id, displayValue, numericValue) {\n        const el = document.getElementById(id);\n        if (!el) return;\n\n        if (this.activeEditField === id) {\n            if (this.suppressEditRender) return;\n            if (!el.querySelector('input')) {\n                el.innerHTML = `<input type=\"text\" value=\"${parseFloat(numericValue).toFixed(1)}\">`;\n                const input = el.querySelector('input');\n                const commit = () => {\n                    const newVal = parseFloat(input.value);\n                    this.activeEditField = null;\n                    this.suppressEditRender = true;          // block editfield render for the next frame\n                    el.textContent = this._formatDisplayValue(id, newVal); // immediate static text\n                    this.commitEdit(id, newVal);\n                    this._scheduleUIUpdate();                // refresh, block lifted inside\n                };\n                input.addEventListener('blur', commit, { once: true });\n                input.addEventListener('keydown', (e) => {\n                    if (e.key === 'Enter') {\n                        input.blur();\n                    } else if (e.key === 'Escape') {\n                        this.activeEditField = null;\n                        this._scheduleUIUpdate();\n                    }\n                });\n                setTimeout(() => { input.focus(); input.select(); }, 0);\n            }\n        } else {\n            if (el.textContent !== displayValue) {\n                el.textContent = displayValue;\n            }\n        }\n    }\n\n    /**\n     * Format the numeric value for immediate static display after editing.\n     */\n    _formatDisplayValue(id, num) {\n        if (id === 'ownship-crs' || id === 'track-crs' || id === 'track-brg') {\n            return `${this.formatBearing(num)} T`;\n        }\n        if (id === 'ownship-spd' || id === 'track-spd') {\n            return `${num.toFixed(1)} KTS`;\n        }\n        if (id === 'track-rng') {\n            return `${num.toFixed(1)} NM`;\n        }\n        return String(num);\n    }\n\n    /**\n     * Schedule a single UI refresh on the next animation frame.\n     * Prevents rapid backtoback redraws that cause visual bounce.\n     * Also clears the temporary suppress flag used during inputblur commits.\n     */\n    _scheduleUIUpdate() {\n        if (this.uiUpdatePending) return;\n        this.uiUpdatePending = true;\n        requestAnimationFrame(() => {\n            this.uiUpdatePending = false;\n            this.suppressEditRender = false;   // lift oneframe block\n            this.updatePanelsAndRedraw();\n        });\n    }\n\n    commitEdit(id, value) {\n        let didUpdate = false;\n        if (isNaN(value)) {\n            this.activeEditField = null;\n            this._scheduleUIUpdate();\n            return;\n        }\n\n        const track = this.tracks.find(t => t.id === this.selectedTrackId);\n\n        if (id === 'ownship-crs') {\n            this.ownShip.orderedCourse = Math.max(0, Math.min(359.9, value));\n            didUpdate = true;\n        } else if (id === 'ownship-spd') {\n            this.ownShip.orderedSpeed = value;\n            didUpdate = true;\n        } else if (track) {\n            if (id === 'track-brg') {\n                track.bearing = Math.max(0, Math.min(359.9, value));\n                didUpdate = true;\n            } else if (id === 'track-rng') {\n                track.range = Math.max(0, Math.min(359.9, value));\n                didUpdate = true;\n            } else if (id === 'track-crs') {\n                track.course = Math.max(0, Math.min(359.9, value));\n                didUpdate = true;\n            } else if (id === 'track-spd') {\n                track.speed = value;\n                didUpdate = true;\n            }\n\n            if ((id === 'track-brg' || id === 'track-rng') && track.bearing !== undefined && track.range !== undefined) {\n                const angleRad = this.toRadians(track.bearing);\n                track.x = this.ownShip.x + track.range * Math.sin(angleRad);\n                track.y = this.ownShip.y + track.range * Math.cos(angleRad);\n            }\n        }\n\n        this.activeEditField = null;\n        this._scheduleUIUpdate();\n        if (didUpdate) {\n            this.markSceneDirty();\n        }\n    }\n\n    // --- Physics & Calculations ---\n    updatePhysics(deltaTime) {\n        if (!this.isSimulationRunning) return;\n\n        const dtSec = (deltaTime / 1000) * Math.abs(this.simulationSpeed);\n\n        // Gradually adjust ownship toward ordered values\n        const maxTurn = 3 * dtSec;            // degrees per second\n        let courseDiff = (this.ownShip.orderedCourse - this.ownShip.course + 540) % 360 - 180;\n        if (Math.abs(courseDiff) <= maxTurn) {\n            this.ownShip.course = this.ownShip.orderedCourse;\n        } else {\n            this.ownShip.course = (this.ownShip.course + Math.sign(courseDiff) * maxTurn + 360) % 360;\n        }\n\n        const maxSpdChange = 0.1 * dtSec;     // knots per second\n        const spdDiff = this.ownShip.orderedSpeed - this.ownShip.speed;\n        if (Math.abs(spdDiff) <= maxSpdChange) {\n            this.ownShip.speed = this.ownShip.orderedSpeed;\n        } else {\n            this.ownShip.speed += Math.sign(spdDiff) * maxSpdChange;\n        }\n\n        const timeMultiplier = (deltaTime / 3600000) * this.simulationSpeed;\n        const ownShipDist = this.ownShip.speed * timeMultiplier;\n        this.ownShip.x += ownShipDist * Math.sin(this.toRadians(this.ownShip.course));\n        this.ownShip.y += ownShipDist * Math.cos(this.toRadians(this.ownShip.course));\n\n        this.tracks.forEach(track => {\n            if (this.draggedItemId === track.id) return;\n\n            const dist = track.speed * timeMultiplier;\n            track.x += dist * Math.sin(this.toRadians(track.course));\n            track.y += dist * Math.cos(this.toRadians(track.course));\n            const dtH = (deltaTime/3600000)*Math.abs(this.simulationSpeed);\n            track._controller?.update(dtH, this.tracks, this.scenarioCfg);\n        });\n    }\n\n    calculateAllData(track) {\n        const dx = track.x - this.ownShip.x;\n        const dy = track.y - this.ownShip.y;\n        track.range = Math.max(0, Math.min(359.9, Math.sqrt(dx**2 + dy**2)));\n        track.bearing = (this.toDegrees(Math.atan2(dx, dy)) + 360) % 360;\n\n        const ownShipCanvasAngle = this.toRadians(this.bearingToCanvasAngle(this.ownShip.course));\n        const ownShipVelX = this.ownShip.speed * Math.cos(ownShipCanvasAngle);\n        const ownShipVelY = this.ownShip.speed * Math.sin(ownShipCanvasAngle);\n\n        const targetCourseCanvasAngle = this.toRadians(this.bearingToCanvasAngle(track.course));\n        const targetVelX = track.speed * Math.cos(targetCourseCanvasAngle);\n        const targetVelY = track.speed * Math.sin(targetCourseCanvasAngle);\n\n        const relVelX = targetVelX - ownShipVelX;\n        const relVelY = targetVelY - ownShipVelY;\n        const relSpeed = Math.sqrt(relVelX**2 + relVelY**2);\n        const relVectorCanvasAngle = this.toDegrees(Math.atan2(relVelY, relVelX));\n\n        if (!track.rmVector) track.rmVector = { x: 0, y: 0, speed: 0, bearing: 0 };\n        track.rmVector.x = relVelX;\n        track.rmVector.y = relVelY;\n        track.rmVector.speed = relSpeed;\n        track.rmVector.bearing = this.canvasAngleToBearing(relVectorCanvasAngle);\n\n        const targetPosCanvasAngle = this.toRadians(this.bearingToCanvasAngle(track.bearing));\n        const targetPosX = track.range * Math.cos(targetPosCanvasAngle);\n        const targetPosY = track.range * Math.sin(targetPosCanvasAngle);\n\n\n        const dotProduct = (targetPosX * relVelX) + (targetPosY * relVelY);\n        if (!track.cpa) track.cpa = { range: '--', time: '--:--:--', brg: '--' };\n        if (relSpeed < 0.001) {\n            track.cpa.range = '--';\n            track.cpa.time = '--:--:--';\n            track.cpa.brg = '--';\n            track.hasPassedCPA = true;\n        } else {\n            const tcpa = -dotProduct / (relSpeed**2);\n            track.hasPassedCPA = tcpa < 0;\n            const cpaX = targetPosX + tcpa * relVelX;\n            const cpaY = targetPosY + tcpa * relVelY;\n            if (!track.cpaPosition) track.cpaPosition = { x: 0, y: 0 };\n            track.cpaPosition.x = cpaX;\n            track.cpaPosition.y = cpaY;\n\n            if (track.hasPassedCPA) {\n                track.cpa.range = '-- nm';\n                track.cpa.time = '--:--:--';\n                track.cpa.brg = '--';\n            } else {\n                const cpaRange = Math.sqrt(cpaX**2 + cpaY**2);\n                const cpaCanvasAngle = this.toDegrees(Math.atan2(cpaY, cpaX));\n                const cpaBearing = this.canvasAngleToBearing(cpaCanvasAngle);\n                const cpaQuarter = this.getRelativeQuarter(cpaBearing, this.ownShip.course);\n                track.cpa.range = `${cpaRange.toFixed(1)} nm`;\n                track.cpa.time = this.formatTime(tcpa);\n                track.cpa.brg = `${this.formatBearing(cpaBearing)} T / ${cpaQuarter}`;\n            }\n        }\n        const ownshipBearingFromTarget = (track.bearing + 180) % 360;\n        const targetAngle = (ownshipBearingFromTarget - track.course + 360) % 360;\n        if (!track.rm) track.rm = { dir: '', spd: '', rate: '', angle: '', aspect: '' };\n\n        // TODO: Only format bearing/speed strings for the selected track or when updating the UI, not for every track each frame.\n\n        track.rm.dir = `${this.formatBearing(track.rmVector.bearing)} T`;\n        track.rm.spd = `${relSpeed.toFixed(1)} kts`;\n        track.rm.rate = this.getBearingRate({x: relVelX, y: relVelY}, {x: targetPosX, y: targetPosY}, track.range);\n        track.rm.angle = `${this.formatBearing(targetAngle)} deg`;\n        // track.rm.aspect = this.getAspect(targetAngle);\n    }\n\n    calculateWindData() {\n        const trueWindVectorAngle = (this.trueWind.direction + 180) % 360;\n        const trueWindRad = this.toRadians(this.bearingToCanvasAngle(trueWindVectorAngle));\n        const trueWindVelX = this.trueWind.speed * Math.cos(trueWindRad);\n        const trueWindVelY = this.trueWind.speed * Math.sin(trueWindRad);\n\n        const ownShipRad = this.toRadians(this.bearingToCanvasAngle(this.ownShip.course));\n        const ownShipVelX = this.ownShip.speed * Math.cos(ownShipRad);\n        const ownShipVelY = this.ownShip.speed * Math.sin(ownShipRad);\n\n        const relWindVelX = trueWindVelX - ownShipVelX;\n        const relWindVelY = trueWindVelY - ownShipVelY;\n\n        this.relativeWind.speed = Math.sqrt(relWindVelX**2 + relWindVelY**2);\n        const relWindVectorCanvasAngle = this.toDegrees(Math.atan2(relWindVelY, relWindVelX));\n\n        this.relativeWind.vectorDirection = this.canvasAngleToBearing(relWindVectorCanvasAngle);\n    }\n\n    // --- Drawing ---\n    drawRadar() {\n        // Debug: log frame and fill red overlay\n        // console.log('drawRadar called:', { width: this.canvas.width, height: this.canvas.height });\n        // Debug fill to confirm drawing\n        this.ctx.save();\n        this.ctx.fillStyle = 'rgba(255, 0, 0, 0.1)';\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n        this.ctx.restore();\n\n        const size = this.canvas.width;\n        if (size === 0) return;\n        const center = size / 2;\n        const radius = size / 2 * 0.9;\n        if (this.staticDirty || this.staticCanvas.width !== size) {\n            this.staticCanvas.width = size;\n            this.staticCanvas.height = size;\n            this.drawStaticRadar();\n            this.staticDirty = false;\n        }\n        this.ctx.drawImage(this.staticCanvas, 0, 0);\n\n        if (this.showWeather) {\n            this.drawWeatherInfo(center, radius);\n        }\n        this.drawOwnShipIcon(center, radius);\n        this.tracks.forEach(track => {\n            if (track.range > this.maxRange) return;\n            this.drawTarget(center, radius, track);\n            if(this.showRelativeMotion) {\n                this.drawRelativeMotionVector(center, radius, track);\n            }\n        });\n        if(this.showCPAInfo && this.selectedTrackId !== null) {\n            this.drawCPAIndicator(center, radius);\n        }\n        if (this.selectedTrackId !== null) {\n            const track = this.tracks.find(t => t.id === this.selectedTrackId);\n            if (track) this.drawBearingLine(center, radius, track);\n            this.drawSelectionIndicator(center, radius, this.selectedTrackId, this.radarWhite, 1.5);\n        }\n        if (this.hoveredTrackId !== null && this.hoveredTrackId !== this.selectedTrackId) {\n            this.drawSelectionIndicator(center, radius, this.hoveredTrackId, this.radarFaintWhite, 1);\n        }\n    }\n\n    drawStaticRadar() {\n        const size = this.staticCanvas.width;\n        if (size === 0) return;\n        const center = size / 2;\n        const radius = size / 2 * 0.9;\n        const ctx = this.staticCtx;\n        ctx.save();\n        // --- Outer and inner range rings ---\n        ctx.fillStyle = '#000000';\n        ctx.fillRect(0, 0, size, size);\n        ctx.strokeStyle = this.radarFaintGreen;\n        ctx.lineWidth = 2.7;\n\n        ctx.beginPath();\n        ctx.arc(center, center, radius, 0, 2 * Math.PI);\n        ctx.stroke();\n\n        for (let i = 1; i < 3; i++) {\n            ctx.beginPath();\n            ctx.arc(center, center, radius * (i / 3), 0, 2 * Math.PI);\n            ctx.stroke();\n        }\n\n        // --- Range ring labels ---\n        ctx.fillStyle = this.radarFaintGreen;\n        ctx.font = `bold ${Math.max(11, radius * 0.038)}px 'IBM Plex Sans Mono', monospace`;\n        ctx.textAlign = 'left';\n        ctx.textBaseline = 'middle';\n        for (let i = 1; i <= 3; i++) {\n            const ringRadius = radius * (i / 3);\n            const range = this.maxRange * (i / 3);\n            ctx.fillText(range.toFixed(1), center + ringRadius + LABEL_OFFSET_PX, center);\n        }\n\n        // --- Radial bearing lines ---\n        if (this.showPolarPlot) {\n            for (let deg = 0; deg < 360; deg += 10) {\n                const isCardinal = CARDINAL_BEARINGS.includes(deg);\n                ctx.setLineDash(isCardinal ? DASH_PATTERN_SOLID : DASH_PATTERN_NONCAR);\n                const ang = this.toRadians(deg);\n                const originalRadius = isCardinal ? (size / 2) : radius + (size / 2 - radius) / 2;\n                const startRadius = radius;\n                let endRadius = originalRadius;\n                if (!isCardinal) {\n                    endRadius = radius + 0.8 * (originalRadius - radius);\n                }\n                ctx.beginPath();\n                ctx.moveTo(\n                    center + startRadius * Math.cos(ang),\n                    center - startRadius * Math.sin(ang)\n                );\n                ctx.lineTo(\n                    center + endRadius * Math.cos(ang),\n                    center - endRadius * Math.sin(ang)\n                );\n                ctx.stroke();\n            }\n        }\n        ctx.restore();\n    }\n\n    drawRangeRings(center, radius) { this.ctx.strokeStyle = this.radarFaintGreen; this.ctx.lineWidth = 2.7; this.ctx.beginPath(); this.ctx.arc(center, center, radius, 0, 2 * Math.PI); this.ctx.stroke(); for (let i = 1; i < 3; i++) { this.ctx.beginPath(); this.ctx.arc(center, center, radius * (i / 3), 0, 2 * Math.PI); this.ctx.stroke(); } }\n    drawRangeLabels(center, radius) {\n        this.ctx.fillStyle = this.radarFaintGreen;\n        this.ctx.font = `bold ${Math.max(11, radius * 0.038)}px 'IBM Plex Sans Mono',monospace`;\n        this.ctx.textAlign = 'left';\n        this.ctx.textBaseline = 'middle';\n        for (let i = 1; i <= 3; i++) {\n            const ringRadius = radius * (i / 3);\n            const range = this.maxRange * (i / 3);\n            this.ctx.fillText(range.toFixed(1), center + ringRadius + LABEL_OFFSET_PX, center);\n        }\n    }\n\n    drawOwnShipIcon(center, radius) {\n        this.ctx.strokeStyle = this.radarGreen;\n        // this.ctx.lineWidth = 1.4;\n        const iconRadius = this.canvas.width * 0.014;\n        this.ctx.beginPath();\n        this.ctx.arc(center, center, iconRadius, 0, 2 * Math.PI);\n        this.ctx.stroke();\n        const timeInHours = this.vectorTimeInMinutes / 60;\n        const pixelsPerNm = radius / this.maxRange;\n        const vectorDistPixels = this.ownShip.speed * timeInHours * pixelsPerNm;\n        const courseAngle = this.toRadians(this.bearingToCanvasAngle(this.ownShip.course));\n        const endX = center + vectorDistPixels * Math.cos(courseAngle);\n        const endY = center - vectorDistPixels * Math.sin(courseAngle);\n        this.ownShip.vectorEndpoint = { x: endX, y: endY };\n        \n        \n\n        // Draw ordered course/speed vector if still manoeuvring\n        const orderedCourse = this.ownShip.orderedCourse;\n        const orderedSpeed  = this.ownShip.orderedSpeed;\n        const diffCourse = Math.abs(((orderedCourse - this.ownShip.course + 540) % 360) - 180);\n        const diffSpeed  = Math.abs(orderedSpeed - this.ownShip.speed);\n        if (diffCourse > 0.5 || diffSpeed > 0.05) {\n            const orderDistPixels = orderedSpeed * timeInHours * pixelsPerNm;\n            const orderAngle = this.toRadians(this.bearingToCanvasAngle(orderedCourse));\n            const oEndX = center + orderDistPixels * Math.cos(orderAngle);\n            const oEndY = center - orderDistPixels * Math.sin(orderAngle);\n            this.ownShip.orderedVectorEndpoint = { x: oEndX, y: oEndY };\n            this.ctx.save();\n            this.ctx.strokeStyle = this.radarDarkOrange;\n            this.ctx.lineWidth = VECTOR_LINE_WIDTH;\n            this.ctx.beginPath();\n            this.ctx.moveTo(center, center);\n            this.ctx.lineTo(oEndX, oEndY);\n            this.ctx.stroke();\n            this.ctx.restore();\n\n            const rect = this.canvas.getBoundingClientRect();\n            const tipX = rect.left + (oEndX / this.DPR);\n            const tipY = rect.top + (oEndY / this.DPR);\n            const txt = `Crs: ${this.formatBearing(orderedCourse)} T\\nSpd: ${orderedSpeed.toFixed(1)} kts`;\n            this.orderTooltip.style.color = this.radarDarkOrange;\n            this.orderTooltip.innerText = txt;\n            this.orderTooltip.style.display = 'block';\n            this.orderTooltip.style.transform = `translate(${tipX - this.orderTooltip.offsetWidth - 10}px, ${tipY - this.orderTooltip.offsetHeight - 10}px)`;\n        } else {\n            this.orderTooltip.style.display = 'none';\n            this.ownShip.orderedVectorEndpoint = null;\n        }\n\n        const dragging = this.draggedItemId === 'ownShip' && this.dragType === 'vector';\n        if (dragging && this.ownShip.dragCourse !== null && this.ownShip.dragSpeed !== null) {\n            const dragDistPixels = this.ownShip.dragSpeed * timeInHours * pixelsPerNm;\n            const dragAngle = this.toRadians(this.bearingToCanvasAngle(this.ownShip.dragCourse));\n            const dEndX = center + dragDistPixels * Math.cos(dragAngle);\n            const dEndY = center - dragDistPixels * Math.sin(dragAngle);\n            this.ctx.save();\n            this.ctx.strokeStyle = this.radarWhite;\n            this.ctx.lineWidth = VECTOR_LINE_WIDTH;\n            this.ctx.beginPath();\n            this.ctx.moveTo(center, center);\n            this.ctx.lineTo(dEndX, dEndY);\n            this.ctx.stroke();\n            this.ctx.restore();\n        }\n\n        this.ctx.strokeStyle = this.radarGreen;\n        this.ctx.lineWidth = VECTOR_LINE_WIDTH;\n        this.ctx.beginPath();\n        this.ctx.moveTo(center, center);\n        this.ctx.lineTo(endX, endY);\n        this.ctx.stroke();\n    }\n\n    getTargetCoords(center, radius, track) {\n        const angleRad = this.toRadians(this.bearingToCanvasAngle(track.bearing));\n        const distOnCanvas = (track.range / this.maxRange) * radius;\n        const x = center + distOnCanvas * Math.cos(angleRad);\n        const y = center - distOnCanvas * Math.sin(angleRad);\n        return { x, y };\n    }\n\n    drawTarget(center, radius, track) {\n        const { x, y } = this.getTargetCoords(center, radius, track);\n        const targetSize = Math.max(11, radius * 0.038);\n        this.ctx.strokeStyle = this.radarGreen;\n        this.ctx.lineWidth = 1.8;\n        this.ctx.strokeRect(x - targetSize / 2, y - targetSize / 2, targetSize, targetSize);\n        this.ctx.lineWidth = VECTOR_LINE_WIDTH;\n        const timeInHours = this.vectorTimeInMinutes / 60;\n        const pixelsPerNm = radius / this.maxRange;\n        const vectorDistPixels = track.speed * timeInHours * pixelsPerNm;\n        const courseAngle = this.toRadians(this.bearingToCanvasAngle(track.course));\n        const endX = x + vectorDistPixels * Math.cos(courseAngle);\n        const endY = y - vectorDistPixels * Math.sin(courseAngle);\n        track.vectorEndpoint = { x: endX, y: endY };\n        this.ctx.beginPath();\n        this.ctx.moveTo(x, y);\n        this.ctx.lineTo(endX, endY);\n        this.ctx.stroke();\n        this.ctx.fillStyle = this.radarGreen;\n        this.ctx.font = `${Math.max(11, radius * 0.038)}px 'IBM Plex Sans Mono', monospace`;\n        this.ctx.textAlign = 'left';\n        this.ctx.textBaseline = 'top';\n        if (this.showTrackIds) {\n            this.ctx.fillText(track.id, x + targetSize / 2 + 3, y + targetSize / 2 + 3);\n        }\n    }\n\n    drawRelativeMotionVector(center, radius, track) {\n        if (!track.rmVector) return;\n        const { x: startX, y: startY } = this.getTargetCoords(center, radius, track);\n        const timeInHours = this.vectorTimeInMinutes / 60;\n        const pixelsPerNm = radius / this.maxRange;\n        const vectorDistPixels = track.rmVector.speed * timeInHours * pixelsPerNm;\n        const vectorAngleRad = this.toRadians(this.bearingToCanvasAngle(track.rmVector.bearing));\n        const endX = startX + vectorDistPixels * Math.cos(vectorAngleRad);\n        const endY = startY - vectorDistPixels * Math.sin(vectorAngleRad);\n        this.ctx.save();\n        this.ctx.strokeStyle = this.radarGreen;\n        this.ctx.lineWidth = VECTOR_LINE_WIDTH;\n        this.ctx.setLineDash([5, 5]);\n        this.ctx.beginPath();\n        this.ctx.moveTo(startX, startY);\n        this.ctx.lineTo(endX, endY);\n        this.ctx.stroke();\n        this.ctx.restore();\n    }\n\n    drawCPAIndicator(center, radius) {\n        const track = this.tracks.find(t => t.id === this.selectedTrackId);\n        if (!track || track.hasPassedCPA || !track.cpaPosition) return;\n        const pixelsPerNm = radius / this.maxRange;\n\n        const cpaBearing = (this.toDegrees(Math.atan2(track.cpaPosition.x, track.cpaPosition.y)) + 360) % 360;\n        const cpaCanvasAngle = this.toRadians(this.bearingToCanvasAngle(cpaBearing));\n        const cpaRange = Math.sqrt(track.cpaPosition.x**2 + track.cpaPosition.y**2);\n        const cpaDistCanvas = cpaRange * pixelsPerNm;\n        const cpaX = center + cpaDistCanvas * Math.cos(cpaCanvasAngle);\n        const cpaY = center - cpaDistCanvas * Math.sin(cpaCanvasAngle);\n\n        this.ctx.beginPath();\n        this.ctx.arc(cpaX, cpaY, 4, 0, 2 * Math.PI);\n        this.ctx.fillStyle = this.radarGreen;\n        this.ctx.fill();\n        this.ctx.save();\n        this.ctx.strokeStyle = this.radarFaintGreen;\n        this.ctx.lineWidth = 1;\n        this.ctx.setLineDash([2, 3]);\n        this.ctx.beginPath();\n        this.ctx.moveTo(center, center);\n        this.ctx.lineTo(cpaX, cpaY);\n        this.ctx.stroke();\n        this.ctx.restore();\n    }\n\n    drawBearingLine(center, radius, track) {\n        const { x, y } = this.getTargetCoords(center, radius, track);\n        this.ctx.save();\n        this.ctx.strokeStyle = this.radarWhite;\n        this.ctx.lineWidth = 1;\n        this.ctx.setLineDash([2, 4]);\n        this.ctx.beginPath();\n        this.ctx.moveTo(center, center);\n        this.ctx.lineTo(x, y);\n        this.ctx.stroke();\n        this.ctx.restore();\n    }\n\n    drawSelectionIndicator(center, radius, trackId, color, lineWidth) { const track = this.tracks.find(t => t.id === trackId); if (!track) return; const { x, y } = this.getTargetCoords(center, radius, track); const targetSize = Math.max(11, radius * 0.038); const indicatorRadius = targetSize * 1.2; this.ctx.strokeStyle = color; this.ctx.lineWidth = lineWidth; this.ctx.beginPath(); this.ctx.arc(x, y, indicatorRadius, 0, 2 * Math.PI); this.ctx.stroke(); }\n\n    drawWeatherInfo(center, radius) {\n        const windFromAngle = this.toRadians(this.bearingToCanvasAngle(this.trueWind.direction));\n        const pixelsPerKnot = 4;\n        const arrowLength = this.trueWind.speed * pixelsPerKnot;\n\n        const wX = center + Math.cos(windFromAngle) * radius;\n        const wY = center - Math.sin(windFromAngle) * radius;\n        this.trueWind.wPos = {x: wX, y: wY};\n\n        const startX = wX;\n        const startY = wY;\n        const endX = startX - Math.cos(windFromAngle) * arrowLength;\n        const endY = startY + Math.sin(windFromAngle) * arrowLength;\n        this.trueWind.arrowEndpoint = {x: endX, y: endY};\n\n        this.ctx.save();\n        this.ctx.strokeStyle = this.radarFaintGreen;\n        this.ctx.fillStyle   = this.radarFaintGreen;\n        this.ctx.font        = `${Math.max(12, radius * 0.08)}px 'IBM Plex Sans Mono', monospace`;\n        this.ctx.textAlign   = 'center';\n        this.ctx.textBaseline = 'middle';\n        this.ctx.fillText('W', wX, wY);\n        this.ctx.lineWidth = VECTOR_LINE_WIDTH;\n        this.ctx.beginPath();\n        this.ctx.moveTo(startX, startY);\n        this.ctx.lineTo(endX, endY);\n        this.ctx.stroke();\n        const arrowAngle = Math.atan2(endY - startY, endX - startX);\n        this.ctx.beginPath();\n        this.ctx.moveTo(endX, endY);\n        this.ctx.lineTo(endX - 15 * Math.cos(arrowAngle - Math.PI / 6), endY - 15 * Math.sin(arrowAngle - Math.PI / 6));\n        this.ctx.lineTo(endX - 15 * Math.cos(arrowAngle + Math.PI / 6), endY - 15 * Math.sin(arrowAngle + Math.PI / 6));\n        this.ctx.closePath();\n        this.ctx.fill();\n        this.ctx.restore();\n\n        if (this.showRelativeMotion) {\n            const pixelsPerNm = radius / this.maxRange;\n            const timeInHours = this.vectorTimeInMinutes / 60;\n            const vectorDistPixels = this.relativeWind.speed * timeInHours * pixelsPerNm;\n            const relWindCanvasAngle = this.toRadians(this.bearingToCanvasAngle(this.relativeWind.vectorDirection));\n\n            const vecEndX = center + vectorDistPixels * Math.cos(relWindCanvasAngle);\n            const vecEndY = center - vectorDistPixels * Math.sin(relWindCanvasAngle);\n\n            this.ctx.save();\n            this.ctx.strokeStyle = this.radarFaintGreen;\n            this.ctx.lineWidth = VECTOR_LINE_WIDTH;\n            this.ctx.setLineDash([5, 5]);\n            this.ctx.beginPath();\n            this.ctx.moveTo(center, center);\n            this.ctx.lineTo(vecEndX, vecEndY);\n            this.ctx.stroke();\n            this.ctx.restore();\n        }\n    }\n\n    // --- UI Updates ---\n    updatePanelsAndRedraw() {\n        this.updateOwnShipPanel();\n        this.updateDataPanels();\n        this.drawRadar();\n    }\n\n    updateOwnShipPanel() {\n        this._renderEditableField('ownship-crs', `${this.formatBearing(this.ownShip.course)} T`, this.ownShip.course);\n        this._renderEditableField('ownship-spd', `${this.ownShip.speed.toFixed(1)} kts`, this.ownShip.speed);\n    }\n\n    updateDataPanels() {\n        const selectedTrack = this.tracks.find(t => t.id === this.selectedTrackId);\n\n        this._setText('track-id', selectedTrack ? selectedTrack.id : '--');\n\n        if (selectedTrack) {\n            this._renderEditableField('track-brg', `${this.formatBearing(selectedTrack.bearing)} T`, selectedTrack.bearing);\n            this._renderEditableField('track-rng', `${selectedTrack.range.toFixed(1)} nm`, selectedTrack.range);\n            this._renderEditableField('track-crs', `${this.formatBearing(selectedTrack.course)} T`, selectedTrack.course);\n            this._renderEditableField('track-spd', `${selectedTrack.speed.toFixed(1)} kts`, selectedTrack.speed);\n        } else {\n            this._setText('track-brg', '--');\n            this._setText('track-rng', '--');\n            this._setText('track-crs', '--');\n            this._setText('track-spd', '--');\n        }\n\n        const showRM = selectedTrack && this.showRelativeMotion;\n        this._setText('rm-dir', showRM ? selectedTrack.rm.dir : '--');\n        this._setText('rm-spd', showRM ? selectedTrack.rm.spd : '--');\n        this._setText('rm-rate', showRM ? selectedTrack.rm.rate : '--');\n        this._setText('rm-angle', showRM ? selectedTrack.rm.angle : '--');\n        // this._setText('rm-aspect', showRM ? selectedTrack.rm.aspect : '--');\n\n        const showCPA = selectedTrack && this.showCPAInfo && !selectedTrack.hasPassedCPA;\n        this._setText('cpa-brg', showCPA ? selectedTrack.cpa.brg : '--');\n        this._setText('cpa-rng', showCPA ? selectedTrack.cpa.range : '--');\n        this._setText('cpa-time', showCPA ? selectedTrack.cpa.time : '--');\n\n        const showTrueWind = this.showWeather;\n        const showRelWind = this.showWeather && this.showRelativeMotion;\n        const relWindBearing = (this.relativeWind.vectorDirection - this.ownShip.course + 360) % 360;\n        this._setText('wind-true', showTrueWind ? `${this.formatBearing(this.trueWind.direction)} T  ${this.trueWind.speed.toFixed(1)} kts` : '--');\n        this._setText('wind-rel', showRelWind ? `${this.formatBearing(relWindBearing)} R  ${this.relativeWind.speed.toFixed(1)} kts` : '--');\n    }\n\n    updateButtonStyles() {\n    \n        this.btnPlayPause.className = `controlplay ${this.isSimulationRunning ? 'selected' : 'unselected'}`;\n        if (this.iconPlay && this.iconPause) {\n            this.iconPlay.classList.toggle('d-none', this.isSimulationRunning);\n            this.iconPause.classList.toggle('d-none', !this.isSimulationRunning);\n        }\n\n        this.btnFf.className = `control-forward ${this.simulationSpeed > 1 ? 'selected' : 'unselected'}`;\n        this.btnRev.className = `control-backward ${this.simulationSpeed < 0 ? 'selected' : 'unselected'}`;\n    }\n\n    updateSpeedIndicator() {\n        this.ffSpeedIndicator.classList.add('d-none');\n        this.revSpeedIndicator.classList.add('d-none');\n\n        if (this.simulationSpeed > 1) {\n            const label = this.simulationSpeed === 25 ? '25x'\n                : this.simulationSpeed === 50 ? '50x'\n                    : `${this.simulationSpeed}x`;\n            this.ffSpeedIndicator.textContent = label;\n            this.ffSpeedIndicator.classList.remove('d-none');\n        } else if (this.simulationSpeed < 0) {\n            const absSpeed = Math.abs(this.simulationSpeed);\n            const label = absSpeed === 25 ? '25x'\n                : absSpeed === 50 ? '50x'\n                    : `${absSpeed}x`;\n            this.revSpeedIndicator.textContent = label;\n            this.revSpeedIndicator.classList.remove('d-none');\n        }\n    }\n\n    updateSimClock() {\n        this._setText('sim-clock', this.formatTime(this.simulationElapsed / 3600));\n    }\n\n    scaleUI() {\n        const BASE = 900;\n        const containerHeight = this.mainContainer.clientHeight;\n        const wrapperWidth = this.radarWrapper.clientWidth;\n        const dim = Math.min(wrapperWidth, containerHeight);\n        const scale = Math.max(0.7, Math.min(1.5, dim / BASE));\n\n        document.documentElement.style.setProperty('--ui-scale', scale);\n        this.uiScaleFactor = scale;\n\n        // size the canvas display to match container square\n        this.canvas.style.width  = `${dim}px`;\n        this.canvas.style.height = `${dim}px`;\n\n        // Canvas resolution depends on its current size in the DOM, which is now controlled by JS.\n        const size = dim;\n\n        if (size > 0) {\n            this.canvas.width  = size * this.DPR;\n            this.canvas.height = size * this.DPR;\n            this.staticCanvas.width = this.canvas.width;\n            this.staticCanvas.height = this.canvas.height;\n            this.staticDirty = true;\n        }\n\n        this.prepareStaticStyles();\n\n        this.markSceneDirty();\n    }\n\n    setZoom(scale) {\n        const BASE = 900;\n        const clamped = Math.max(0.7, Math.min(1.5, scale));\n        document.documentElement.style.setProperty('--ui-scale', clamped);\n        this.uiScaleFactor = clamped;\n\n        const size = BASE * clamped;\n        this.canvas.style.width = `${size}px`;\n        this.canvas.style.height = `${size}px`;\n\n        this.canvas.width = size * this.DPR;\n        this.canvas.height = size * this.DPR;\n        this.staticCanvas.width = this.canvas.width;\n        this.staticCanvas.height = this.canvas.height;\n        this.staticDirty = true;\n        this.prepareStaticStyles();\n        this.markSceneDirty();\n    }\n\n    // --- Interaction Handlers ---\n    updateDragTooltip(e) {\n        if (!this.draggedItemId) {\n            this.dragTooltip.style.display = 'none';\n            return;\n        }\n\n        let tooltipText = '';\n        const rect = this.canvas.getBoundingClientRect();\n        const mouseX = (e.clientX - rect.left) * this.DPR;\n        const mouseY = (e.clientY - rect.top) * this.DPR;\n        const center = this.canvas.width / 2;\n        const pixelsPerNm = (center * 0.9) / this.maxRange;\n\n        if (this.dragType === 'icon') {\n            const dx = mouseX - center;\n            const dy = -(mouseY - center);\n            const newRange = Math.hypot(dx, dy) / pixelsPerNm;\n            const newCanvasAngleRad = Math.atan2(dy, dx);\n            const newBearing = this.canvasAngleToBearing(this.toDegrees(newCanvasAngleRad));\n\n            tooltipText = `Brg: ${this.formatBearing(newBearing)} T\\nRng: ${newRange.toFixed(1)} nm`;\n        } else if (this.dragType === 'vector') {\n            const vessel = (this.draggedItemId === 'ownShip') ? this.ownShip : this.tracks.find(t => t.id === this.draggedItemId);\n            if (vessel) {\n                const startPoint = (vessel.id === 'ownShip') ? { x: center, y: center } : this.getTargetCoords(center, (center * 0.9), vessel);\n                const dx = mouseX - startPoint.x;\n                const dy = -(mouseY - startPoint.y);\n                const newCanvasAngleRad = Math.atan2(dy, dx);\n                const newCourse = this.canvasAngleToBearing(this.toDegrees(newCanvasAngleRad));\n                const distOnCanvas = Math.hypot(dx, dy);\n                const newSpeed = distOnCanvas / pixelsPerNm / (this.vectorTimeInMinutes / 60);\n                tooltipText = `Crs: ${this.formatBearing(newCourse)} T\\nSpd: ${newSpeed.toFixed(1)} kts`;\n            }\n        } else if (this.draggedItemId === 'trueWind') {\n            if (this.dragType === 'windDirection') {\n                tooltipText = `Dir: ${this.formatBearing(this.trueWind.direction)} T`;\n            } else if (this.dragType === 'windSpeed') {\n                tooltipText = `Spd: ${this.trueWind.speed.toFixed(1)} kts`;\n            }\n        }\n\n        if (tooltipText) {\n            if (this.draggedItemId === 'ownShip' && this.dragType === 'vector') {\n                this.dragTooltip.style.color = this.radarWhite;\n            } else {\n                this.dragTooltip.style.color = this.radarGreen;\n            }\n            this.dragTooltip.innerText = tooltipText;\n            this.dragTooltip.style.display = 'block';\n            this.dragTooltip.style.transform = `translate(${e.clientX - this.dragTooltip.offsetWidth - 10}px, ${e.clientY - this.dragTooltip.offsetHeight - 10}px)`;\n        } else {\n            this.dragTooltip.style.display = 'none';\n        }\n    }\n\n    handlePointerDown(e) {\n        if (e.button !== 0 && e.buttons !== undefined && e.buttons !== 1) return;\n        if (this.canvas.setPointerCapture && e.pointerId !== undefined) {\n            try { this.canvas.setPointerCapture(e.pointerId); } catch (err) {}\n        }\n        const rect = this.canvas.getBoundingClientRect();\n        const mouseX = (e.clientX - rect.left) * this.DPR;\n        const mouseY = (e.clientY - rect.top) * this.DPR;\n        const item = this.getInteractiveItemAt(mouseX, mouseY);\n        this.pointerDownPos = { x: mouseX, y: mouseY };\n        if (item) {\n            this.canvas.style.cursor = 'grabbing';\n            this.pendingDragId = item.id;\n            this.pendingDragType = item.type;\n            this.lastMousePos = { x: mouseX, y: mouseY };\n            if (item.id !== 'ownShip' && item.id !== 'trueWind') {\n                this.selectedTrackId = item.id;\n            }\n            this.hoveredTrackId = item.id;\n            this.markSceneDirty();\n        } else {\n            this.pendingDragId = null;\n            this.pendingDragType = null;\n            this.hoveredTrackId = null;\n        }\n    }\n\n    handlePointerUp(e) {\n        if (this.canvas.releasePointerCapture && e && e.pointerId !== undefined) {\n            try {\n                this.canvas.releasePointerCapture(e.pointerId);\n            } catch (err) {\n                // ignore if not captured\n            }\n        }\n        this.canvas.style.cursor = 'grab';\n        if (this.draggedItemId === 'ownShip' && this.dragType === 'vector') {\n            if (this.ownShip.dragCourse !== null && this.ownShip.dragSpeed !== null) {\n                this.ownShip.orderedCourse = this.ownShip.dragCourse;\n                this.ownShip.orderedSpeed = this.ownShip.dragSpeed;\n            }\n        }\n        this.ownShip.dragCourse = null;\n        this.ownShip.dragSpeed = null;\n        this.draggedItemId = null;\n        this.dragType = null;\n        this.pendingDragId = null;\n        this.pendingDragType = null;\n        this.dragTooltip.style.display = 'none';\n        this.orderTooltip.style.display = 'none';\n        this.markSceneDirty();\n    }\n    handleContainerPointerMove(e) {\n        // Prevent crash. Implement dragging-to-pan later if needed.\n    }\n    handleContainerPointerDown(e) {\n        // Optional: track pointer start position for dragging container\n    }\n\n    handleContainerPointerUp(e) {\n        // Optional: reset state if you want dragging or container interaction\n    }\n    handlePointerMove(e) {\n        const rect = this.canvas.getBoundingClientRect();\n        const mouseX = (e.clientX - rect.left) * this.DPR;\n        const mouseY = (e.clientY - rect.top) * this.DPR;\n\n        if (this.pendingDragId && !this.draggedItemId) {\n            const dx0 = mouseX - this.pointerDownPos.x;\n            const dy0 = mouseY - this.pointerDownPos.y;\n            if (Math.hypot(dx0, dy0) > this.dragThreshold) {\n                this.draggedItemId = this.pendingDragId;\n                this.dragType = this.pendingDragType;\n                if (this.draggedItemId === 'ownShip' && this.dragType === 'vector') {\n                    this.ownShip.dragCourse = this.ownShip.orderedCourse;\n                    this.ownShip.dragSpeed = this.ownShip.orderedSpeed;\n                }\n            }\n        }\n\n        if (this.draggedItemId) {\n            this.updateDragTooltip(e);\n            const center = this.canvas.width / 2;\n            const pixelsPerNm = (center * 0.9) / this.maxRange;\n            if (this.draggedItemId === 'trueWind') {\n                const dx = mouseX - center;\n                const dy = -(mouseY - center);\n                const newCanvasAngleRad = Math.atan2(dy, dx);\n                if (this.dragType === 'windDirection') {\n                    this.trueWind.direction = this.canvasAngleToBearing(this.toDegrees(newCanvasAngleRad));\n                } else if (this.dragType === 'windSpeed') {\n                    const pixelsPerKnot = 4;\n                    const windFromAngle = this.toRadians(this.bearingToCanvasAngle(this.trueWind.direction));\n                    const radius = center * 0.9;\n                    const mouseVecX = mouseX - center;\n                    const mouseVecY = -(mouseY - center);\n                    const windVecX = Math.cos(windFromAngle);\n                    const windVecY = Math.sin(windFromAngle);\n                    const projectedLength = mouseVecX * windVecX + mouseVecY * windVecY;\n                    const arrowPixelLength = projectedLength - radius;\n                    this.trueWind.speed = Math.max(0, -arrowPixelLength / pixelsPerKnot);\n                }\n                this.markSceneDirty();\n            } else if (this.dragType === 'icon') {\n                const track = this.tracks.find(t => t.id === this.draggedItemId);\n                if (track) {\n                    const deltaX_pixels = mouseX - this.lastMousePos.x;\n                    const deltaY_pixels = mouseY - this.lastMousePos.y;\n                    const deltaX_nm = deltaX_pixels / pixelsPerNm;\n                    const deltaY_nm = deltaY_pixels / pixelsPerNm;\n                    track.x += deltaX_nm;\n                    track.y -= deltaY_nm;\n                    this.markSceneDirty();\n                }\n            } else if (this.dragType === 'vector') {\n                const timeInHours = this.vectorTimeInMinutes / 60;\n                const vessel = (this.draggedItemId === 'ownShip') ? this.ownShip : this.tracks.find(t => t.id === this.draggedItemId);\n                const startPoint = (vessel.id === 'ownShip') ? { x: center, y: center } : this.getTargetCoords(center, (center * 0.9), vessel);\n\n                const dx = mouseX - startPoint.x;\n                const dy = -(mouseY - startPoint.y);\n\n                const newCanvasAngleRad = Math.atan2(dy, dx);\n                const newCourse = this.canvasAngleToBearing(this.toDegrees(newCanvasAngleRad));\n                const distOnCanvas = Math.sqrt(dx * dx + dy * dy);\n                const newSpeed = distOnCanvas / pixelsPerNm / timeInHours;\n\n                if (vessel.id === 'ownShip') {\n                    this.ownShip.dragCourse = newCourse;\n                    this.ownShip.dragSpeed = Math.max(0, newSpeed);\n                } else {\n                    vessel.course = newCourse;\n                    vessel.speed = Math.max(2, newSpeed);\n                }\n                this.markSceneDirty();\n            }\n            this.lastMousePos = { x: mouseX, y: mouseY };\n        } else {\n            let item = null;\n            if (!this.pendingDragId) {\n                item = this.getInteractiveItemAt(mouseX, mouseY);\n                this.canvas.style.cursor = item ? 'grab' : 'default';\n            }\n            const newHoverId = item ? item.id : null;\n            if (newHoverId !== this.hoveredTrackId) {\n                this.hoveredTrackId = newHoverId;\n                this.markSceneDirty();\n            }\n        }\n    }\n\n    getInteractiveItemAt(mouseX, mouseY) {\n        const center = this.canvas.width / 2;\n        const radius = center * 0.9;\n        const hitTolerance = 15 * this.DPR;\n        const minVecPickDistance = 25 * this.DPR;\n\n        if (this.showWeather) {\n            const distToW = Math.sqrt((mouseX - this.trueWind.wPos.x)**2 + (mouseY - this.trueWind.wPos.y)**2);\n            if (distToW < hitTolerance) return { type: 'windDirection', id: 'trueWind' };\n            const distToArrowhead = Math.sqrt((mouseX - this.trueWind.arrowEndpoint.x)**2 + (mouseY - this.trueWind.arrowEndpoint.y)**2);\n            if (distToArrowhead < hitTolerance) return { type: 'windSpeed', id: 'trueWind' };\n        }\n\n        for (const track of this.tracks) {\n            const {x, y} = this.getTargetCoords(center, radius, track);\n            const size = Math.max(11, radius * 0.038) * 1.5;\n            if (mouseX > x - size/2 && mouseX < x + size/2 && mouseY > y - size/2 && mouseY < y + size/2) {\n                return {type: 'icon', id: track.id};\n            }\n        }\n\n        const allVessels = [this.ownShip, ...this.tracks];\n        for (const vessel of allVessels) {\n            if (!vessel.vectorEndpoint) continue;\n            const startPt = (vessel.id === 'ownShip') ? {x: center, y: center} : this.getTargetCoords(center, radius, vessel);\n            const distFromStart = Math.hypot(mouseX - startPt.x, mouseY - startPt.y);\n            if (distFromStart < minVecPickDistance) continue;\n            const endPt = vessel.vectorEndpoint;\n            const dist = this.distToSegment({x: mouseX, y: mouseY}, startPt, endPt);\n            if (dist < hitTolerance) return {type: 'vector', id: vessel.id};\n        }\n        return null;\n    }\n\n    // --- Control Button Actions ---\n    toggleVectorTime() {\n        const currentIndex = this.vectorTimes.indexOf(this.vectorTimeInMinutes);\n        this.vectorTimeInMinutes = this.vectorTimes[(currentIndex + 1) % this.vectorTimes.length];\n        this._setText('btn-vector-time', this.vectorTimeInMinutes+' min');\n        this.markSceneDirty();\n    }\n\n    // --- Range Toggle ---\n    toggleRange() {\n        this.rangeIndex = (this.rangeIndex + 1) % this.rangeScales.length;\n        this.maxRange = this.rangeScales[this.rangeIndex];\n\n        // Update button class to reflect current range\n        const rounded = Math.round(this.maxRange);\n        const rangeClasses = ['range-3','range-6','range-12','range-24'];\n        this.btnRange.classList.remove(...rangeClasses);\n        this.btnRange.classList.add(`range-${rounded}`);\n        this.staticDirty = true;\n        this.markSceneDirty();\n    }\n\n    \n    toggleWeather() {\n        this.showWeather = !this.showWeather;\n        this.markSceneDirty();\n        this.updateDataPanels();\n    }\n\n    toggleRelativeMotion() {\n        this.showRelativeMotion = !this.showRelativeMotion;\n        this.markSceneDirty();\n        this._scheduleUIUpdate();\n    }\n\n    toggleCPAInfo() {\n        this.showCPAInfo = !this.showCPAInfo;\n        this.markSceneDirty();\n        this._scheduleUIUpdate();\n    }\n\n    togglePlayPause() {\n        const wasRunning = this.isSimulationRunning;\n        this.isSimulationRunning = !this.isSimulationRunning;\n        this.simulationSpeed = 1;\n        this.updateButtonStyles();\n        this.updateSpeedIndicator();\n        if (!wasRunning) {\n            this.startGameLoop();\n        }\n    }\n\n    fastForward() {\n        const cycle = [1, ...this.ffSpeeds];\n        if (!this.isSimulationRunning || this.simulationSpeed < 0) {\n            this.simulationSpeed = this.ffSpeeds[0];\n            this.isSimulationRunning = true;\n        } else {\n            let idx = cycle.indexOf(this.simulationSpeed);\n            idx = (idx + 1) % cycle.length;\n            this.simulationSpeed = cycle[idx];\n            this.isSimulationRunning = true;\n        }\n        this.updateButtonStyles();\n        this.updateSpeedIndicator();\n        this.startGameLoop();\n    }\n\n    rewind() {\n        const cycle = [1, ...this.revSpeeds];\n        if (!this.isSimulationRunning || this.simulationSpeed > 0) {\n            this.simulationSpeed = this.revSpeeds[0];\n            this.isSimulationRunning = true;\n        } else {\n            let idx = cycle.indexOf(this.simulationSpeed);\n            idx = (idx + 1) % cycle.length;\n            this.simulationSpeed = cycle[idx];\n            this.isSimulationRunning = true;\n        }\n        this.updateButtonStyles();\n        this.updateSpeedIndicator();\n        this.startGameLoop();\n    }\n\n    addTrack() {\n        const existingNums = this.tracks.map(t => parseInt(t.id, 10)).sort((a,b) => a - b);\n        let newNum = 1;\n        while (existingNums.includes(newNum)) newNum++;\n        const newId = String(newNum).padStart(4, '0');\n        const newTrack = {\n            id: newId,\n            initialBearing: Math.random() * 360,\n            initialRange: this.maxRange * (0.1 + Math.random() * 0.8),\n            course: Math.random() * 360,\n            speed: 2 + Math.random() * 13\n        };\n        newTrack.x = this.ownShip.x + newTrack.initialRange * Math.sin(this.toRadians(newTrack.initialBearing));\n        newTrack.y = this.ownShip.y + newTrack.initialRange * Math.cos(this.toRadians(newTrack.initialBearing));\n        newTrack._controller = new ContactController(newTrack);\n        newTrack._sim = this;\n        this.tracks.push(newTrack);\n        this.selectedTrackId = newId;\n        this.calculateAllData(newTrack);\n        this.updatePanelsAndRedraw();\n        this.markSceneDirty();\n    }\n\n    dropTrack() {\n        if (this.selectedTrackId === null) return;\n        const trackIndex = this.tracks.findIndex(t => t.id === this.selectedTrackId);\n        if (trackIndex > -1) {\n            this.tracks.splice(trackIndex, 1);\n            if (this.tracks.length > 0) {\n                const newIndex = Math.max(0, trackIndex - 1);\n                this.selectedTrackId = this.tracks[newIndex].id;\n            } else {\n                this.selectedTrackId = null;\n            }\n            this.updatePanelsAndRedraw();\n            this.markSceneDirty();\n        }\n    }\n\n    togglePolarPlot() {\n        this.showPolarPlot = !this.showPolarPlot;\n        this.staticDirty = true;\n        this.markSceneDirty();\n    }\n\n    toggleTrackIds() {\n        this.showTrackIds = !this.showTrackIds;\n        this.markSceneDirty();\n    }\n\n    async toggleFullScreen() {\n        try {\n            if (!fsApi.isActive()) {\n                await fsApi.request();\n            } else {\n                await fsApi.exit();\n            }\n        } catch (err) {\n            console.error('Fullscreen error', err);\n        }\n    }\n\n    _syncFullscreenUI() {\n        const entering = !!fsApi.isActive();\n        this.btnFullscreen.setAttribute('data-state', entering ? 'exit' : 'enter');\n        this.btnFullscreen.title     = entering ? 'Exit full screen' : 'Enter full screen';\n        this.btnFullscreen.ariaLabel = this.btnFullscreen.title;\n    }\n\n    setupRandomScenario(){\n        const gen = new ScenarioGenerator(this.scenarioCfg);\n        this.tracks = gen.makeScenario(this.ownShip);\n        this.tracks.forEach(t=>{ t._sim=this; t._controller=new ContactController(t); });\n        this.selectedTrackId = this.tracks[0].id;\n        this.isSimulationRunning = true;\n        this.simulationElapsed = 0;\n        this.scaleUI();\n        this.isSimulationRunning = true;\n        this._initialize();\n        this.markSceneDirty();\n    }\n\n    showHelpModal() {\n        this.helpModal.style.display = 'flex';\n        const left = (window.innerWidth  - this.helpModal.offsetWidth)  / 2;\n        const top  = (window.innerHeight - this.helpModal.offsetHeight) / 2;\n        this.helpModal.style.left = `${Math.max(0, left)}px`;\n        this.helpModal.style.top  = `${Math.max(0, top)}px`;\n    }\n\n    hideHelpModal() {\n        this.helpModal.style.display = 'none';\n    }\n\n    // --- Utility & Helper Methods ---\n    toRadians(degrees) { return degrees * Math.PI / 180; }\n    toDegrees(radians) { return (radians * 180 / Math.PI + 360) % 360; }\n    bearingToCanvasAngle(bearing) { return (450 - bearing) % 360; }\n    canvasAngleToBearing(angle) { return (450 - angle) % 360; }\n    formatBearing(num) { return Math.round(num).toString().padStart(3, '0'); }\n    formatTime(hours) {\n        if (hours < 0 || !isFinite(hours)) return '--:--:--';\n        const totalSeconds = hours * 3600;\n        const h = Math.floor(totalSeconds / 3600);\n        const m = Math.floor((totalSeconds % 3600) / 60);\n        const s = Math.floor(totalSeconds % 60);\n        return `${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;\n    }\n    getRelativeQuarter(cpaBearing, ownShipCourse){\n        const relativeBearing = (cpaBearing - ownShipCourse + 360) % 360;\n        if(relativeBearing >= 0 && relativeBearing < 90) return 'STBD BOW';\n        if(relativeBearing >= 90 && relativeBearing < 180) return 'STBD QTR';\n        if(relativeBearing >= 180 && relativeBearing < 270) return 'PORT QTR';\n        return 'PORT BOW';\n    }\n    getAspect(targetAngle){\n        if(targetAngle >= 337.5 || targetAngle < 22.5) return 'BOW';\n        if(targetAngle >= 22.5 && targetAngle < 67.5) return 'STBD BOW';\n        if(targetAngle >= 67.5 && targetAngle < 112.5) return 'STBD BM';\n        if(targetAngle >= 112.5 && targetAngle < 157.5) return 'STBD QTR';\n        if(targetAngle >= 157.5 && targetAngle < 202.5) return 'STERN';\n        if(targetAngle >= 202.5 && targetAngle < 247.5) return 'PORT QTR';\n        if(targetAngle >= 247.5 && targetAngle < 292.5) return 'PORT BM';\n        if(targetAngle >= 292.5 && targetAngle < 337.5) return 'PORT BOW';\n        return 'N/A';\n    }\n    getBearingRate(relativeVelocity, targetPosition, range){\n        const crossProduct = targetPosition.x * relativeVelocity.y - targetPosition.y * relativeVelocity.x;\n        if(range < 0.01) return '0.00 STEADY';\n        const bearingRateRadPerHour = crossProduct / (range * range);\n        const bearingRateDpm = (bearingRateRadPerHour * 180 / Math.PI) / 60;\n        let direction;\n        if(Math.abs(bearingRateDpm) < 0.01) {\n            direction = 'STEADY';\n        } else if (bearingRateDpm > 0) {\n            direction = 'LEFT';\n        } else {\n            direction = 'RIGHT';\n        }\n        return `${Math.abs(bearingRateDpm).toFixed(2)} ${direction}`;\n    }\n    distToSegment(p, v, w) {\n        const l2 = (v.x - w.x)**2 + (v.y - w.y)**2;\n        if (l2 == 0) return Math.sqrt((p.x - v.x)**2 + (p.y - v.y)**2);\n        let t = ((p.x - v.x) * (w.x - v.x) + (p.y - v.y) * (w.y - v.y)) / l2;\n        t = Math.max(0, Math.min(1, t));\n        return Math.sqrt((p.x - (v.x + t * (w.x - v.x)))**2 + (p.y - (v.y + t * (w.y - v.y)))**2);\n    }\n    prepareStaticStyles() {\n        this.ctx.strokeStyle = this.radarFaintGreen;\n        this.ctx.fillStyle   = this.radarFaintGreen;\n        this.ctx.font        = `${Math.max(12, this.canvas.width * 0.04)}px 'IBM Plex Sans Mono', monospace`;\n    }\n}\n\n// --- Application Entry Point ---\n\n// function enforceLandscape() {\n//     const warning = document.getElementById('orientation-warning');\n//     const isMobile = /Mobi|Android/i.test(navigator.userAgent);\n//     if (!isMobile || window.matchMedia('(orientation: landscape)').matches) {\n//         document.body.classList.remove('portrait');\n//         if (warning) warning.style.display = 'none';\n//     } else {\n//         document.body.classList.add('portrait');\n//         if (warning) warning.style.display = 'flex';\n//     }\n// }\n\n// document.addEventListener('DOMContentLoaded', () => {\n//     if (window.navigator.standalone) {\n//         document.body.classList.add('pwa-standalone');\n//     }\n//     const sim = new Simulator();\n//     enforceLandscape();\n//     window.addEventListener('orientationchange', enforceLandscape);\n//     window.addEventListener('resize', enforceLandscape);\n// });\n\n// Register service worker for offline support\n// if ('serviceWorker' in navigator) {\n//     window.addEventListener('load', () => {\n//         navigator.serviceWorker.register('/sw.js')\n//             .then(reg => console.log('Service Worker registered', reg))\n//             .catch(err => console.error('Service Worker registration failed:', err));\n//     });\n// }\n"],"names":[],"version":3,"file":"Maneuver-Core-Simulation.e36cf8d6.js.map","sourceRoot":"/__parcel_source_root/"}